define(["translations","pgadmin.browser.endpoints","pgadmin.browser.utils","pgadmin.user_management.current_user","pgadmin.browser.messages","pgadmin.server.supported_servers"],function(n,a,r,i,o,s){return function(l){function e(e){for(var t,n,a=e[0],r=e[1],i=e[2],o=0,s=[];o<a.length;o++)n=a[o],Object.prototype.hasOwnProperty.call(c,n)&&c[n]&&s.push(c[n][0]),c[n]=0;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(l[t]=r[t]);for(f&&f(e);s.length;)s.shift()();return u.push.apply(u,i||[]),d()}function d(){for(var e,t=0;t<u.length;t++){for(var n=u[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==c[i]&&(a=!1)}a&&(u.splice(t--,1),e=p(p.s=n[0]))}return e}var n={},c={5:0,6:0},u=[];function p(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,p),t.l=!0,t.exports}p.e=function(r){var e=[],n=c[r];if(0!==n)if(n)e.push(n[2]);else{var t=new Promise(function(e,t){n=c[r]=[e,t]});e.push(n[2]=t);var a,i=document.createElement("script");i.charset="utf-8",i.timeout=120,p.nc&&i.setAttribute("nonce",p.nc),i.src=function(e){return p.p+""+({13:"vendors~chart"}[e]||e)+".chunk.js"}(r);var o=new Error;a=function(e){i.onerror=i.onload=null,clearTimeout(s);var t=c[r];if(0!==t){if(t){var n=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;o.message="Loading chunk "+r+" failed.\n("+n+": "+a+")",o.name="ChunkLoadError",o.type=n,o.request=a,t[1](o)}c[r]=void 0}};var s=setTimeout(function(){a({type:"timeout",target:i})},12e4);i.onerror=i.onload=a,document.head.appendChild(i)}return Promise.all(e)},p.m=l,p.c=n,p.d=function(e,t,n){p.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},p.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.t=function(t,e){if(1&e&&(t=p(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(p.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)p.d(n,a,function(e){return t[e]}.bind(null,a));return n},p.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return p.d(t,"a",t),t},p.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},p.p="",p.oe=function(e){throw console.error(e),e},Object.defineProperty(p,"p",{get:function(){try{if("function"!=typeof getChunkURL)throw new Error("WebpackRequireFrom: 'getChunkURL' is not a function or not available at runtime. See https://github.com/agoldis/webpack-require-from#troubleshooting");return getChunkURL()}catch(e){return""}}});var t=window.webpackJsonp=window.webpackJsonp||[],a=t.push.bind(t);t.push=e,t=t.slice();for(var r=0;r<t.length;r++)e(t[r]);var f=a;return u.push([327,2,3,1,0,4]),d()}([,,function(e,t,n){"use strict";var a,r;n(23),n(40),n(4),n(29),a=[n(93)],void 0===(r=function(a){return function(e){var t=a[e]?a[e]:e;if(1==arguments.length)return t;try{var n=arguments;return t.split("%s").map(function(e,t){return 0<t?t<n.length?[n[t],e].join(""):["%s",e].join(""):e}).join("")}catch(e){return console.error(e),t}}}.apply(t,a))||(e.exports=r)},function(n,a,r){"use strict";(function(e){var t;function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r(21),r(26),r(27),r(19),r(73),r(33),r(12),r(79),r(37),r(4),r(46),r(24),r(62),r(8),r(29),r(22),void 0===(t=function(){var e=window.pgAdmin=window.pgAdmin||{};function n(e,t,n){return void 0===n||0==+n?Math[e](t):(t=+t,n=+n,isNaN(t)||"number"!=typeof n||n%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n))))}return function(e,t,d){function c(e,t,n,a){n=n||"width";var r,i,o,s=(t.match(b)||[])[2],l="px"===s?1:h[s+"toPx"];if(l||/r?em/i.test(s)&&!a)e=l?e:"rem"===s?f:"fontSize"===n&&e.parentNode||e,l=l||parseFloat(u(e,"fontSize")),o=parseFloat(t)*l;else{i=(r=e.style)[n];try{r[n]=t}catch(e){return 0}o=r[n]?parseFloat(u(e,n)):0,r[n]=i!==d?i:null}return o}function u(e,t){var n,a,r,i,o,s=["paddingTop","paddingBottom","borderTop","borderBottom"],l=4;if(a=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)],"%"===(r=((n=g?g(e)[t]:a?a+"px":"fontSize"===t?c(e,"1em","left",1)+"px":e.currentStyle[t]).match(b)||[])[2])&&p)if(/^top|bottom/.test(t)){for(i=(o=e.parentNode||e).offsetHeight;l--;)i-=parseFloat(u(o,s[l]));n=parseFloat(n)/100*i+"px"}else n=c(e,n);else("auto"===n||r&&"px"!==r)&&g?n=0:r&&"px"!==r&&!g&&(n=c(e,n)+"px");return n}var p,n=t.createElement("test"),f=t.documentElement,a=t.defaultView,g=a&&a.getComputedStyle,b=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,h={},r=[1/25.4,1/2.54,1/72,1/6],i=["mm","cm","pt","pc","in","mozmm"],o=6;for(f.appendChild(n),g&&(n.style.marginTop="1%",p="1%"===g(n).marginTop);o--;)h[i[o]+"toPx"]=r[o]?r[o]*h.inToPx:c(n,"1"+i[o]);f.removeChild(n),n=d,e.toPx=c}(e,window.document),e.natural_sort=function(e,t,n){n=n||{};function a(e){return n.insensitive&&(""+e).toLowerCase()||""+e}var r,i,o=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,d=/^0x[0-9a-f]+$/i,c=/^0/,u=a(e).replace(s,"")||"",p=a(t).replace(s,"")||"",f=u.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=p.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),b=parseInt(u.match(d))||1!==f.length&&u.match(l)&&Date.parse(u),h=parseInt(p.match(d))||b&&p.match(l)&&Date.parse(p)||null,m=n.desc?-1:1;if(h){if(b<h)return-1*m;if(h<b)return 1*m}for(var _=0,v=Math.max(f.length,g.length);_<v;_++){if(r=!(f[_]||"").match(c)&&parseFloat(f[_])||f[_]||0,i=!(g[_]||"").match(c)&&parseFloat(g[_])||g[_]||0,isNaN(r)!==isNaN(i))return(isNaN(r)?1:-1)*m;if(y(r)!==y(i)&&(r+="",i+=""),r<i)return-1*m;if(i<r)return 1*m}return 0},Math.round10||(Math.round10=function(e,t){return n("round",e,t)}),Math.floor10||(Math.floor10=function(e,t){return n("floor",e,t)}),Math.ceil10||(Math.ceil10=function(e,t){return n("ceil",e,t)}),e}.apply(a,[]))||(n.exports=t)}).call(this,r(3))},,function(e,t,n){"use strict";var a,r;n(4),n(8),a=[n(94)],void 0===(r=function(a){return function(e,r){var t=a[e],n=t;return t?n=n.replace(/([<])([^:^>]*:)?([^>]+)([>])/g,function(e,t,n,a){return a in r?r[a]:e}):t}}.apply(t,a))||(e.exports=r)},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(10),n(16),n(23),n(40),n(33),n(7),n(37),n(4),n(143),n(8),n(65),n(29),n(6),Object.defineProperty(t,"__esModule",{value:!0}),t.parseShortcutValue=function(e){var t="";e.alt&&(t+="alt+");e.shift&&(t+="shift+");e.control&&(t+="ctrl+");return t+=e.key.char.toLowerCase()},t.findAndSetFocus=function(t){if(0==t.length)return;setTimeout(function(){var e=t.find("button.fa-plus:first");0==e.length&&(e=t.find("\n          .pgadmin-controls:first input:enabled,\n          .pgadmin-controls:first .btn:not(.toggle),\n          .CodeMirror-scroll").find('*[tabindex]:not([tabindex="-1"])')),0<e.length?e[0].focus():t[0].focus()},200)},t.getEpoch=function(e){var t=e||new Date;return parseInt(t.getTime()/1e3)},t.getGCD=function(e){function n(e,t){return 0==e?t:n(t%e,e)}var t=e.length;if(t<=2)return n(e[0],e[1]);for(var a=e[0],r=1;r<t;r++)a=n(e[r],a);return a},t.getMod=function(e,t){return(e%t+t)%t},t.parseFuncParams=function(e){var t=[],n="",a="";if(e.endsWith("()"))n=e.substring(0,e.length-2);else if(e.endsWith(")")){if(!e.endsWith("()")&&e.endsWith(")")){var r=0,i=e.length;for(r=e.length-2;0<=r;){if("("==e[r]){i=r;break}if('"'==e[r])for(r--;'"'!=e[r];)r--;r--}n=e.substring(0,i),a=e.substring(i+1,e.length-1);var o=0,s="",l=["IN","OUT","INOUT","VARIADIC"];for(o=r=0;r<a.length;){if('"'==a[r])for(r++;'"'!=a[r];)r++;else" "==a[r]?(""==s||-1<l.indexOf(s))&&(s=a.substring(o,r),o=r+1):","==a[r]&&(t.push([s,a.substring(o,r)]),s="",o=r+1);r++}t.push([s,a.substring(o)])}}else n=e;return{func_name:n,param_string:a,params:t}},t.quote_ident=o,t.fully_qualify=function(e,t,n){var a=i.getTreeNodeHierarchyFromIdentifier.call(e,n),r="";void 0!==a.schema?r=o(a.schema._label):void 0!==a.view?r=o(a.view._label):void 0!==a.catalog&&(r=o(a.catalog._label));void 0!==a.package&&"package"!=t._type&&(""==r?r=o(a.package._label):r+="."+o(a.package._label));return""!=r?r+"."+o(t._label):o(t._label)},t.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},t.titleize=function(e){return""===e||null===e?e:e.split(" ").map(function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()}).join(" ")},t.sprintf=function(t){try{var n=arguments;return t.split("%s").map(function(e,t){return 0<t?t<n.length?[n[t],e].join(""):["%s",e].join(""):e}).join("")}catch(e){return console.error(e),t}},t.isString=t.isFunction=t.isValidData=void 0;var a,r=(a=n(1))&&a.__esModule?a:{default:a},i=n(57);t.isValidData=function(e){return!r.default.isUndefined(e)&&!r.default.isNull(e)};t.isFunction=function(e){return r.default.isFunction(e)};function o(e){var t=!1;return isNaN(parseInt(e))||(t=!0),-1<e.search(/[^a-z0-9_]/g)&&(e=e.replace(/"/g,'""'),t=!0),t?'"'.concat(e,'"'):e}t.isString=function(e){return r.default.isString(e)}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){var t=null;try{t=window.opener&&window.opener.pgAdmin?window.opener:window.parent&&window.parent.pgAdmin?window.parent:window.top&&window.top.pgAdmin?window.top:window}catch(e){t=window}return t}();t.default=a},,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(l){function a(e){var t,n,a=0,r=0,i={};do{var o=e.getData();if(o._type in this.Nodes&&this.Nodes[o._type].hasId){var s=(t=o._type,n=r,"partition"===t&&0<n?"table":t);void 0===i[s]&&(i[s]=l.extend({},o,{priority:a}),a-=1)}r+=1,e=e.hasParent()?e.parent():null}while(e);return i}n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.getTreeNodeHierarchyFromElement=function(e,t){return a.call(e,t)},t.getTreeNodeHierarchyFromIdentifier=function(e){var t=this.treeMenu.translateTreeNodeIdFromACITree(e),n=this.treeMenu.findNode(t);return null===n?null:a.call(this,n)},t.getTreeNodeHierarchy=a}).call(this,n(1))},,,,,,,,,,,,function(e,t,n){"use strict";var a,r;n(23),n(73),n(141),n(4),n(8),a=[n(0),n(1),n(2),n(5)],void 0===(r=function(n,a,s,l){var d={epicRandomString:function(e){for(var t=[],n="0123456789abcdef",a=0;a<36;a++)t[a]=n.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=n.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("").replace(/-/g,"").substr(0,e)},getHash:function(e){for(var t=0,n=e.length,a=0;a<n;a++)t=(t<<5)-t+e.charCodeAt(a),t|=0;return t},calculateColumnWidth:function(e){n("body").append('<span id="pg_text" style="visibility: hidden;">'+e+"</span>");var t=n("#pg_text").width()+23;return n("#pg_text").remove(),t},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},previousStatus:null,fetchConnectionStatus:function(e,r,i){var t=l("sqleditor.connection_status",{trans_id:e.transId});if("visible"===document.visibilityState&&"visible"===r.data("panel-visible")&&!i.hasClass("obtaining-conn")){var o=e;n.ajax({url:t,method:"GET"}).done(function(e){if(e&&e.data){var t=e.data.status,n=e.data.message,a=!1;switch(o.update_notifications(e.data.notifies),t){case 1:t!=d.previousStatus||i.hasClass("fa-hourglass-half")||(i.removeClass().addClass("fa fa-hourglass-half"),a=!0);break;case 2:d.previousStatus==t||i.hasClass("fa-clock-o")||(i.removeClass().addClass("fa fa-clock-o"),a=!0);break;case 3:d.previousStatus==t||i.hasClass("fa-exclamation-circle")||(i.removeClass().addClass("fa fa-exclamation-circle"),a=!0);break;case 4:d.previousStatus==t||i.hasClass("fa-exclamation-triangle")||(i.removeClass().addClass("fa fa-exclamation-triangle"),a=!0);break;default:d.previousStatus==t||i.hasClass("fa-query_tool_connected")||(i.removeClass().addClass("pg-font-icon icon-query-tool-connected"),a=!0)}d.previousStatus=t,a&&(r.popover("hide"),r.attr("data-content",n))}else d.previousStatus=-99,n=s("An unexpected error occurred - ensure you are logged into the application."),r.attr("data-content",n),i.hasClass("icon-query-tool-disconnected")||(r.popover("hide"),i.removeClass().addClass("pg-icon-font icon-query-tool-disconnected"))}).fail(function(e){d.previousStatus=-1;var t=s("Transaction status check failed.");0==e.readyState?t=s("Not connected to the server or the connection to the server has been closed."):e.responseJSON&&e.responseJSON.errormsg&&(t=e.responseJSON.errormsg),r.attr("data-content",t),i.hasClass("icon-query-tool-disconnected")||(r.popover("hide"),i.removeClass().addClass("pg-font-icon icon-query-tool-disconnected"))})}},updateConnectionStatusFlag:function(e){var t=n(".connection_status");t.data("panel-visible")!=e&&t.data("panel-visible",e)},calcFontSize:function(e){if(e){var t=Number(Math.round(e+"e+2")+"e-2");if(0<t)return t+"em"}return"1em"},addEditableIcon:function(e,t){var n={cssClass:"editable-column-header-icon",content:t?'<i class="fa fa-pencil"></i>':'<i class="fa fa-lock"></i>'};a.isUndefined(e.header)||a.isUndefined(e.header.buttons)?e.header={buttons:[n]}:e.header.buttons.push(n)}};return d}.apply(t,a))||(e.exports=r)},,,,,function(e,t,n){"use strict";n(36),n(10),n(7),n(4),n(65),Object.defineProperty(t,"__esModule",{value:!0}),t.processEventDebugger=function(e,t,n,a){var r,i,o="";this.validateShortcutKeys(n.edit_grid_values,t)?(this._stopEventPropagation(t),(r=e.find('div.wcPanelTabContent:not(".wcPanelTabContentHidden")')).length&&(i=(0,y.default)(r).find("td.editable:first")).length&&i.trigger("click")):this.validateShortcutKeys(n.move_next,t)?(this._stopEventPropagation(t),o=N(a,"right")):this.validateShortcutKeys(n.move_previous,t)?(this._stopEventPropagation(t),o=N(a,"left")):this.validateShortcutKeys(n.switch_panel,t)&&(this._stopEventPropagation(t),o=N(a,"switch"));return o},t.processEventQueryTool=function(e,t,n,a){if(e.isQueryRunning())return;var r=n.which||n.keyCode,i="",o=e.preferences.execute_query,s=e.preferences.explain_query,l=e.preferences.explain_analyze_query,d=e.preferences.download_csv,c=e.preferences.move_next,u=e.preferences.move_previous,p=e.preferences.switch_panel,f=e.preferences.toggle_case,g=e.preferences.commit_transaction,b=e.preferences.rollback_transaction,h=e.preferences.save_data;if(this.validateShortcutKeys(o,n))this._stopEventPropagation(n),t.executeQuery(e);else if(this.validateShortcutKeys(s,n))this._stopEventPropagation(n),t.explain(e);else if(this.validateShortcutKeys(l,n))this._stopEventPropagation(n),t.explainAnalyze(e);else if(this.validateShortcutKeys(d,n))this._stopEventPropagation(n),t.download(e);else if(this.validateShortcutKeys(f,n))this._stopEventPropagation(n),t.toggleCaseOfSelectedText(e);else if(this.validateShortcutKeys(g,n))e.is_transaction_buttons_disabled||(this._stopEventPropagation(n),t.executeCommit(e));else if(this.validateShortcutKeys(b,n))e.is_transaction_buttons_disabled||(this._stopEventPropagation(n),t.executeRollback(e));else if(this.validateShortcutKeys(h,n))this._stopEventPropagation(n),t.saveDataChanges(e);else if((this.isMac()&&n.metaKey||!this.isMac()&&n.ctrlKey)&&!n.altKey&&n.shiftKey&&r===x)this._stopEventPropagation(n),t.commentBlockCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(n)&&n.metaKey||!this.isMac()&&!this.isKeyAltShift(n)&&n.ctrlKey)&&r===x)this._stopEventPropagation(n),t.commentLineCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(n)&&n.metaKey||!this.isMac()&&!this.isKeyAltShift(n)&&n.ctrlKey)&&r===w)this._stopEventPropagation(n),t.uncommentLineCode(e);else if(r==k)t.focusOut(e),(0,y.default)(n.target).hasClass("dropdown-item")&&0<(0,y.default)(n.target).closest(".dropdown-submenu").length&&(0,y.default)(n.target).closest(".dropdown-submenu").find(".dropdown-menu").removeClass("show");else if(this.validateShortcutKeys(c,n))this._stopEventPropagation(n),i=N(a,"right");else if(this.validateShortcutKeys(u,n))this._stopEventPropagation(n),i=N(a,"left");else if(this.validateShortcutKeys(p,n))this._stopEventPropagation(n),i=N(a,"switch");else if(r===D||r===j){if(0<(0,y.default)(n.target).closest(".dropdown-menu").length){this._stopEventPropagation(n);var m=(0,y.default)(n.target).closest("li");for((0,y.default)(n.target).closest(".dropdown-menu").find(".show").removeClass("show"),r===D?m=m.prev():r===j&&(m=m.next());m.hasClass("dropdown-divider")||m.hasClass("d-none")||m.find(".dropdown-item").first().hasClass("disabled");)r===D?m=m.prev():r===j&&(m=m.next());m.find(".dropdown-item").trigger("focus")}}else if((r===C||r===S)&&0<(0,y.default)(n.target).closest(".dropdown-menu").length){this._stopEventPropagation(n);var _=(0,y.default)(n.target).closest("li");if(r===S)_.hasClass("dropdown-submenu")&&(_.find(".dropdown-menu").addClass("show"),_=_.find(".dropdown-menu .dropdown-item").first().trigger("focus"));else if(r===C){var v=_.closest(".dropdown-menu");0<v.closest(".dropdown-submenu").length&&(v.removeClass("show"),(_=v.closest(".dropdown-submenu")).find(".dropdown-item").trigger("focus"))}}return i},t.focusDockerPanel=N,t.validateShortcutKeys=function(e,t){if(!e)return!1;var n=t.which||t.keyCode;return e.alt==t.altKey&&e.shift==t.shiftKey&&e.control==t.ctrlKey&&e.key.key_code==n},t._stopEventPropagation=function(e){e.cancelBubble=!0,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},t.isMac=function(){return-1!=window.navigator.platform.search("Mac")},t.isKeyCtrlAlt=function(e){return e.ctrlKey||e.altKey},t.isKeyAltShift=function(e){return e.altKey||e.shiftKey},t.isKeyCtrlShift=function(e){return e.ctrlKey||e.shiftKey},t.isKeyCtrlAltShift=function(e){return e.ctrlKey||e.altKey||e.shiftKey},t.isAltShiftBoth=function(e){return e.altKey&&e.shiftKey&&!e.ctrlKey},t.isCtrlShiftBoth=function(e){return e.ctrlKey&&e.shiftKey&&!e.altKey},t.isCtrlAltBoth=function(e){return e.ctrlKey&&e.altKey&&!e.shiftKey},t.shortcut_key=i,t.shortcut_title=function(e,t){var n="";if(null==t)return n;t.alt&&(n=(0,a.default)("Alt")+"+");t.shift&&(n+=(0,a.default)("Shift")+"+");t.control&&(n+=(0,a.default)("Ctrl")+"+");return n+=i(t),"".concat(e," (").concat(n,")")},t.shortcut_accesskey_title=function(e,t){return"".concat(e," (").concat((0,a.default)("accesskey")," + ").concat(i(t),")")};var y=r(n(0)),a=r(n(2)),l=n(25);function r(e){return e&&e.__esModule?e:{default:e}}var w=190,x=191,k=27,C=37,D=38,S=39,j=40;function i(e){var t="";return e.key&&e.key.char&&(t=e.key.char.toUpperCase()),t}function N(e,t){if(e){if(!e._focusFrame){if(0==e._frameList.length&&0==e._frameList[0]._panelList.length)return;e._frameList[0]._panelList[e._frameList[0]._curTab].focus()}var n=e._focusFrame,a=0,r=!1;if("switch"==t){var i=0,o=e._frameList.length;for(i=0;i<o&&n!==e._frameList[i];i++);a=(n=e._frameList[(0,l.getMod)(i+1,o)])._curTab,r=!0}else"left"==t?(a=(0,l.getMod)(n._curTab-1,n._panelList.length),r=!1):"right"==t&&(a=(0,l.getMod)(n._curTab+1,n._panelList.length),r=!1);var s=n._panelList[a];return s.$container.find('*[tabindex]:not([tabindex="-1"])').trigger("focus"),s.focus(r),s._type}}},,,,,,,,,,,,,,function(e,t,n){"use strict";(function(o){n(36),n(11),n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.getPanelTitle=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;null==t&&(t=e.treeMenu.selected());var n=r.getTreeNodeHierarchyFromIdentifier.call(e,t);if(function(e){return void 0===e.server}(n))return;var a=function(e){return e.database?e.database.label:e.server.db}(n);return"".concat(a,"/").concat(n.server.user.name,"@").concat(n.server.label)},t.setQueryToolDockerTitle=function(e,t,n,a){var r="",i="";r=a||"true"==a?(i=(0,s.default)("File - ")+n,"fa fa-file-text-o"):"false"==t||0==t?(i=(0,s.default)("View/Edit Data - ")+n,"fa fa-table"):(i=(0,s.default)("Query Tool - ")+n,"pg-font-icon icon-query-tool");e.title('<span title="'+o.escape(i)+'">'+o.escape(n)+"</span>"),e.icon(r)};var e,r=n(57),s=(e=n(2))&&e.__esModule?e:{default:e}}).call(this,n(1))},,,,,function(e,t){e.exports=n},function(e,t){e.exports=a},,function(e,t,n){"use strict";n(10);var a=o(n(0)),r=o(n(1)),i=o(n(41));function o(e){return e&&e.__esModule?e:{default:e}}e.exports={modifyAcitreeAnimation:function(e,t){var n=e.get_preference("browser","enable_acitree_animation").value;r.default.isUndefined(t)&&(t=e.tree),n?t.options({animateRoot:!0,unanimated:!1,show:r.default.extend(t.options().show,{duration:75}),hide:r.default.extend(t.options().hide,{duration:75}),view:r.default.extend(t.options().view,{duration:75})}):t.options({animateRoot:!1,unanimated:!0,show:r.default.extend(t.options().show,{duration:0}),hide:r.default.extend(t.options().hide,{duration:0}),view:r.default.extend(t.options().view,{duration:0})})},modifyAlertifyAnimation:function(e){(r.default.isUndefined(e)||r.default.isNull(e))&&(e=i.default.pgAdmin.Browser),e.get_preference("browser","enable_alertify_animation").value?((0,a.default)(document).find("body").removeClass("alertify-no-animation"),r.default.each(document.getElementsByTagName("iframe"),function(e){(0,a.default)(e.contentDocument).find("body").removeClass("alertify-no-animation")})):((0,a.default)(document).find("body").addClass("alertify-no-animation"),r.default.each(document.getElementsByTagName("iframe"),function(e){(0,a.default)(e.contentDocument).find("body").addClass("alertify-no-animation")}))}}},,,,,,,function(e,t,n){"use strict";n(7),n(12),n(148),Object.defineProperty(t,"__esModule",{value:!0}),t.setPGCSRFToken=function(a,r){if(!r)throw"csrf-token meta tag has not been set";var i=l.default.sync;l.default.sync=function(e,t,n){return n.beforeSend=function(e){e.setRequestHeader(a,r)},i(e,t,n)};var o=l.default.get;l.default.get=function(e,t,n){return n.beforeSend=function(e){e.setRequestHeader(a,r)},o(e,t,n)},s.default.ajaxSetup({beforeSend:function(e){e.setRequestHeader(a,r)}}),d.default.interceptors.request.use(function(e){return e.headers[a]=r,e},function(e){return Promise.reject(e)})};var s=a(n(0)),l=a(n(15)),d=a(n(70));function a(e){return e&&e.__esModule?e:{default:e}}},,,,,,,,,,,,,,,,function(e,g,b){"use strict";(function(o){b(21),b(26),b(27),b(53),b(10),b(58),b(19),b(23),b(18),b(145),b(75),b(7),b(32),b(76),b(48),b(12),b(4),b(24),b(8),b(29),b(83),b(63),b(22),b(6),Object.defineProperty(g,"__esModule",{value:!0}),g.isValidTreeNodeData=g.Tree=g.TreeNode=void 0;var e=b(25),s=t(b(0)),l=t(b(14));function t(e){return e&&e.__esModule?e:{default:e}}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var u=function(){function r(e,t,n,a){i(this,r),this.id=e,this.data=t,this.setParent(a),this.children=[],this.domNode=n}return n(r,[{key:"hasParent",value:function(){return null!==this.parentNode&&void 0!==this.parentNode}},{key:"parent",value:function(){return this.parentNode}},{key:"setParent",value:function(e){this.parentNode=e,this.path=this.id,null!=e&&void 0!==e.path&&(this.path=e.path+"."+this.id)}},{key:"getData",value:function(){if(void 0!==this.data)return null===this.data?null:Object.assign({},this.data)}},{key:"getHtmlIdentifier",value:function(){return this.domNode}},{key:"reload",value:function(e){var t=this;this.unload(e),e.aciTreeApi.setInode(this.domNode),e.aciTreeApi.deselect(this.domNode),setTimeout(function(){e.selectNode(t.domNode)},0)}},{key:"unload",value:function(e){this.children=[],e.aciTreeApi.unload(this.domNode)}},{key:"ancestorNode",value:function(e){for(var t=this;t.hasParent();)if(e(t=t.parent()))return t;return null}},{key:"anyFamilyMember",value:function(e){return!!e(this)||null!==this.ancestorNode(e)}},{key:"anyParent",value:function(e){return null!==this.ancestorNode(e)}}]),r}();g.TreeNode=u;var p=function(){function e(){i(this,e),this.rootNode=new u(void 0,{}),this.aciTreeApi=void 0,this.draggableTypes={}}return n(e,[{key:"registerDraggableType",value:function(t,e){var n=this,a=1<arguments.length&&void 0!==e?e:null;"object"==r(t)?Object.keys(t).forEach(function(e){n.registerDraggableType(e,t[e])}):null!=a&&t.replace(/ +/," ").split(" ").forEach(function(e){n.draggableTypes[e]=a})}},{key:"getDraggable",value:function(e){return this.draggableTypes[e]?this.draggableTypes[e]:null}},{key:"prepareDraggable",value:function(a,r){var i=this.getDraggable(a._type);null!=i&&r.find(".aciTreeItem").attr("draggable",!0)[0].addEventListener("dragstart",function(e){var t=i(a,r);if("string"==typeof t?t={text:t,cur:{from:t.length,to:t.length}}:t.cur||(t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach(function(e){c(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,{cur:{from:t.text.length,to:t.text.length}})),e.dataTransfer.setData("text",JSON.stringify(t)),e.dataTransfer.dropEffect&&(e.dataTransfer.dropEffect="move"),e.dataTransfer.setDragImage){var n=(0,s.default)('\n              <div class="drag-tree-node">\n                <span>'.concat(o.escape(t.text),"</span>\n              </div>"));(0,s.default)("body .drag-tree-node").remove(),(0,s.default)("body").append(n),e.dataTransfer.setDragImage(n[0],0,0)}})}},{key:"addNewNode",value:function(e,t,n,a){var r=this.findNode(a);return this.createOrUpdateNode(e,t,r,n)}},{key:"findNode",value:function(e){return null==e||0===e.length?this.rootNode:function(e,i){return null!==i?function e(t){if(void 0!==t.path&&void 0!==i&&!i.startsWith(t.path))return null;for(var n=0,a=t.children.length;n<a;n++){var r=e(t.children[n]);if(null!==r)return r}return t.path===i?t:null}(e):e}(this.rootNode,e.join("."))}},{key:"findNodeByDomElement",value:function(e){var t=this.translateTreeNodeIdFromACITree(e);if(t&&t[0])return this.findNode(t)}},{key:"selected",value:function(){return this.aciTreeApi.selected()}},{key:"selectNode",value:function(e){this.aciTreeApi.select(e)}},{key:"createOrUpdateNode",value:function(e,t,n,a){var r=[e];null!=n&&(r=[n.path,e]);var i=this.findNode(r);if(null!==i)return i.data=t,i;var o=new u(e,t,a,n);return n===this.rootNode&&(o.parentNode=null),n.children.push(o),o}},{key:"register",value:function(e){e.on("acitree",function(e,t,n,a){if(t.isItem(n)&&("added"===a||"idset"===a)){var r=t.getId(n),i=t.itemData(n);"added"===a&&this.prepareDraggable(i,n);var o=this.translateTreeNodeIdFromACITree(t.parent(n));this.addNewNode(r,i,n,o),i.errmsg&&l.default.error(i.errmsg)}}.bind(this)),this.aciTreeApi=e.aciTree("api")}},{key:"translateTreeNodeIdFromACITree",value:function(e){for(var t=e,n=[];null!=t&&0<t.length&&(n.unshift(this.aciTreeApi.getId(t)),this.aciTreeApi.hasParent(t));)t=this.aciTreeApi.parent(t);return n}}]),e}();g.Tree=p;var f=e.isValidData;g.isValidTreeNodeData=f}).call(this,b(1))},,function(e,t,n){"use strict";n(122),n(11),n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.initializeToolbar=function(e,t){l=e,r.default.each(d,function(e){u(e)}),r.default.each(c,function(e){u(e)}),e.on(t.EVENT.BUTTON,function(e){"name"in e&&e.name===(0,a.default)("Query Tool")?i.default.DataGrid.show_query_tool("",i.default.Browser.tree.selected()):"name"in e&&e.name===(0,a.default)("View Data")?i.default.DataGrid.show_data_grid({mnuid:3},i.default.Browser.tree.selected()):"name"in e&&e.name===(0,a.default)("Filtered Rows")&&i.default.DataGrid.show_filtered_row({mnuid:4},i.default.Browser.tree.selected())})},t.enable=function(e,t){e in s?l.buttonEnable(e,t):console.warn("Developer warning: No tool button found with label: "+e)};var a=o(n(2)),r=o(n(1)),i=o(n(3));function o(e){return e&&e.__esModule?e:{default:e}}var s={},l=null,d=[{label:(0,a.default)("Filtered Rows"),btnClass:"pg-font-icon icon-filter-table-toolbar",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-secondary",enabled:!1},{label:(0,a.default)("View Data"),btnClass:"fa fa-table",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-secondary",enabled:!1},{label:(0,a.default)("Query Tool"),btnClass:"pg-font-icon icon-query-tool",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-secondary",enabled:!1}],c=[];function u(e){e.label in s&&!(r.default.findIndex(l._buttonList,{name:e.label})<0)||(l.addButton(e.label,e.btnClass,e.text,e.label,e.toggled,e.toggleClass,e.parentClass,e.enabled),s[e.label]=e)}},,,function(e,t){e.exports=r},function(e,t,n){"use strict";n(10),n(18),n(7),n(6);var s=a(n(0)),r=a(n(105)),l=n(25);function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function a(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.dialogContainer=e,this.tabSwitching=!1,this.tabs=this.dialogContainer.find(".nav-tabs"),0<this.tabs.length&&(this.tabs=this.tabs[0]),this.dialogTabBackward=(0,l.parseShortcutValue)(t),this.dialogTabForward=(0,l.parseShortcutValue)(n),(0,r.default)(this.dialogContainer[0]).bind(this.dialogTabBackward,this.onKeyboardEvent.bind(this)),(0,r.default)(this.dialogContainer[0]).bind(this.dialogTabForward,this.onKeyboardEvent.bind(this))}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(a,[{key:"onKeyboardEvent",value:function(e,t){var n=this.dialogContainer.find(".tab-content:first > .tab-pane.active:first"),a=this.isActivePaneHasChildTabs(n);this.tabSwitching||(this.tabSwitching=!0,a&&this.navigate(t,a.childTab,a.childTabPane,e)||this.navigate(t,this.tabs,n,e))}},{key:"isActivePaneHasChildTabs",value:function(e){var t=e.find(".nav-tabs:first");return 0<t.length?{childTab:t,childTabPane:e.find(".tab-content:first > .tab-pane.active:first")}:null}},{key:"navigate",value:function(e,t,n,a){return e==this.dialogTabBackward?this.navigateBackward(t,n,a):e==this.dialogTabForward&&this.navigateForward(t,n,a)}},{key:"navigateBackward",value:function(e,t,n){var a,r,i=this,o=(0,s.default)(e).find("li").has("a.active").prev("li");return 0<o.length?(o.find("a").tab("show"),0<(r=(a=t.prev()).find(".tab-content:first > .tab-pane.active:first")).length?(0,l.findAndSetFocus)(r):(0,l.findAndSetFocus)(a),setTimeout(function(){i.tabSwitching=!1},200),n.stopPropagation(),!0):this.tabSwitching=!1}},{key:"navigateForward",value:function(e,t,n){var a,r,i=this,o=(0,s.default)(e).find("li").has("a.active").next("li");return 0<o.length?(o.find("a").tab("show"),0<(r=(a=t.next()).find(".tab-content:first > .tab-pane.active:first")).length?(0,l.findAndSetFocus)(r):(0,l.findAndSetFocus)(a),setTimeout(function(){i.tabSwitching=!1},200),n.stopPropagation(),!0):this.tabSwitching=!1}},{key:"detach",value:function(){(0,r.default)(this.dialogContainer[0]).unbind(this.dialogTabBackward),(0,r.default)(this.dialogContainer[0]).unbind(this.dialogTabForward)}}]),a}();e.exports={dialogTabNavigator:o}},,function(e,t,n){"use strict";n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.getTransId=function(e){return r.default.ajax({data:e,type:"POST",async:!1,url:(0,a.default)("file_manager.get_trans_id"),dataType:"json",contentType:"application/json; charset=utf-8"})},t.removeTransId=function(e){return r.default.ajax({type:"GET",async:!1,url:(0,a.default)("file_manager.delete_trans_id",{trans_id:e}),dataType:"json",contentType:"application/json; charset=utf-8"})},t.set_last_traversed_dir=function(e,t){return r.default.ajax({url:(0,a.default)("file_manager.save_last_dir",{trans_id:t}),type:"POST",data:JSON.stringify(e),contentType:"application/json"})};var a=i(n(5)),r=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";(function(i){n(16),n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.enabled=function(e,t,n,a){if(!(0,o.isValidTreeNodeData)(n))return!1;var r=e.findNodeByDomElement(a);return!!r&&(function(e){return"database"===e._type&&e.allowConn||"database"!==e._type}(n)&&-1!==i.indexOf(t,n._type)&&!function(e){return e.anyFamilyMember(function(e){return"catalog"===e.getData()._type})}(r))};var o=n(119)}).call(this,n(1))},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(7),n(4),n(8),Object.defineProperty(t,"__esModule",{value:!0}),t.getHelpUrl=function(e,t,n){var a=Math.floor(n/1e4),r=Math.floor(n/100)-100*a,i="";i=10<=a?e.replace("$VERSION$",a):e.replace("$VERSION$",a+"."+r);"/"!=i.substr(-1)&&(i+="/");return i+t}},,,,,function(e,t,n){"use strict";n(36);var a,s=(a=n(1))&&a.__esModule?a:{default:a};e.exports={generate_url:function(e,t,n,a,r,i){var o="";return s.default.each(s.default.sortBy(s.default.pick(t,r),function(e){return e.priority}),function(e){o="".concat(o,"/").concat(encodeURI(e._id))}),o=i?"".concat(o,"/").concat(i):"".concat(o,"/"),"".concat(e).concat(a,"/").concat(n).concat(o)}}},,function(e,t,n){"use strict";n(21),n(26),n(27),n(10),n(195),n(16),n(126),n(19),n(23),n(50),n(33),n(7),n(12),n(4),n(46),n(24),n(65),n(29),n(22),n(6),Object.defineProperty(t,"__esModule",{value:!0}),t.browserTreeState=t.pgBrowser=void 0;var p=s(n(1)),a=s(n(0)),r=s(n(5)),i=s(n(2)),o=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var f=o.default.Browser=o.default.Browser||{},l=(t.pgBrowser=f).browserTreeState=f.browserTreeState||{};t.browserTreeState=l,p.default.extend(f.browserTreeState,{parent:"server",orig_parent:"server_group",stored_state:{},last_state:{},current_state:{},init:function(){var e=f.get_preference("browser","browser_tree_state_save_interval");p.default.isUndefined(e)||-1===e.value?p.default.isUndefined(e)||a.default.ajax({url:(0,r.default)("settings.reset_tree_state"),type:"DELETE"}).fail(function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,i.default)('Error resetting the tree saved state."'),t)}):(setInterval(this.save_state,1e3*e.value),this.fetch_state.apply(this),f.Events.on("pgadmin:browser:tree:expand-from-previous-tree-state",this.expand_from_previous_state,this),f.Events.on("pgadmin:browser:tree:remove-from-tree-state",this.remove_from_cache,this),f.Events.on("pgadmin:browser:tree:update-tree-state",this.update_cache,this))},save_state:function(){var e=f.browserTreeState;e.last_state!=JSON.stringify(e.current_state)&&a.default.ajax({url:(0,r.default)("settings.save_tree_state"),type:"POST",contentType:"application/json",data:JSON.stringify(e.current_state)}).done(function(){e.last_state=JSON.stringify(e.current_state)}).fail(function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,i.default)('Error saving the tree state."'),t)})},fetch_state:function(){var t=this;a.default.ajax({url:(0,r.default)("settings.get_tree_state"),type:"GET",dataType:"json",contentType:"application/json"}).done(function(e){t.stored_state=e}).fail(function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,i.default)("Error fetching the tree state."),t)})},update_cache:function(e){var t,n=e&&f.tree.itemData(e),a=(n&&f.Nodes[n._type]).getTreeNodeHierarchy(e),r=f.tree.pathId(e),i=r.join(),o=[],s=-1;if(f.tree.hasParent(e)&&this.parent in a){if(t=a[this.parent]._id,f.tree.isOpen(e)){r.push(n.id),o=r.join(),t in this.current_state||(this.current_state[t]={paths:[],selected:{},conn_status:{},is_opened:{}});var l=p.default.find(this.current_state[t].paths,function(e){return-1!==e.search(o)});p.default.isUndefined(l)&&(p.default.isUndefined(this.current_state[t].paths)?this.current_state[t].paths=[]:s=this.current_state[t].paths.indexOf(i),-1!==s?this.current_state[t].paths[s]=o:this.current_state[t].paths.push(o))}this.update_database_status(e),this.update_current_selected_item(a)}},remove_from_cache:function(e){var a=this,t=a.stored_state||{},r=e&&f.tree.itemData(e),n=r&&f.Nodes[r._type],i=n&&n.getTreeNodeHierarchy(e);if(null!==i&&f.tree.hasParent(e)&&a.parent in i){var o=i&&i[a.parent]._id,s=i&&i[a.orig_parent].id;if(this.update_database_status(e),r._type!=a.parent&&"database"!=r._type){if(f.tree.isClosed(e)){var l=a.current_state[o].paths,d=void 0;if("database"in i&&(d=i.database.id),!p.default.isUndefined(l)&&!p.default.isUndefined(l.length)){var c=0,u=void 0;p.default.each(l,function(e){if(!p.default.isUndefined(e)){var t=e.split(",");if(-1!==t.indexOf(r.id)&&(void 0===d||void 0!==d&&-1!==t.indexOf(d))){var n=t.indexOf(r.id);t.splice(n),(u=t.join())==s?a.current_state[o].paths.splice(e,1):a.current_state[o].paths[c]=u}c++}})}}}else o in t&&"paths"in t[o]&&(t[o].paths=a.current_state[o].paths,a.save_state())}},expand_from_previous_state:function(r){var i=this,o=i.stored_state||{},s=r&&f.tree.itemData(r),e=s&&f.Nodes[s._type],l=e&&e.getTreeNodeHierarchy(r);if(null!==l&&f.tree.hasParent(r)&&i.parent in l&&(s._type!=i.parent||!1!==f.tree.isOpen(r))){var t=o[l[i.parent]._id];if(!("database"==s._type&&t&&"conn_status"in t&&"is_opened"in t)||0!==t.conn_status[s.id]&&0!==t.is_opened[s.id]&&s.id in t.is_opened){if(!p.default.isUndefined(t)&&"paths"in t&&!p.default.isUndefined(t.paths.length)){var n=c(t.paths),d=void 0;"database"in l&&(d=l.database.id),p.default.each(n,function(e){if(!p.default.isUndefined(e)){var t=e.split(",");if(-1!==t.indexOf(s.id)&&(void 0===d||void 0!==d&&-1!==t.indexOf(d))){var n=t.indexOf(s.id);if(f.tree.toggle(r),n==t.length-1){var a=o[l[i.parent]._id].paths.indexOf(e);o[l[i.parent]._id].paths.splice(a,1)}}}})}this.select_tree_item(r)}}},update_database_status:function(e){var t=e&&f.tree.itemData(e),n=(t&&f.Nodes[t._type]).getTreeNodeHierarchy(e);if("database"in n){var a=n.database.id,r=n&&n[this.parent]._id;r in this.current_state&&"selected"in this.current_state[r]&&(n.database.connected?this.current_state[r].conn_status[a]=1:this.current_state[r].conn_status[a]=0,"database"==t._type&&(f.tree.isOpen(e)?this.current_state[r].is_opened[a]=1:this.current_state[r].is_opened[a]=0))}},update_current_selected_item:function(e){if(this.parent in e){var t=e&&e[this.parent]._id,n=f.tree.itemData(f.tree.selected()),a=void 0;n=n?n.id:void 0,"database"in e&&(a=e.database.id),t in this.current_state&&"selected"in this.current_state[t]&&!p.default.isUndefined(n)&&(this.current_state[t].selected[e[this.parent].id]=n,p.default.isUndefined(a)||(this.current_state[t].selected[a]=n))}},select_tree_item:function(e){var t=this.stored_state||{},n=e&&f.tree.itemData(e),a=n&&f.Nodes[n._type],r=a&&a.getTreeNodeHierarchy(e),i=t[r[this.parent]._id];if("database"in r){var o=r.database.id;i&&"selected"in i&&o in i.selected&&i.selected[o]==n.id&&f.tree.select(e)}}})},function(e,t,n){n(17)({target:"Object",stat:!0,sham:!n(43)},{create:n(100)})},function(e,t,n){var a=n(17),r=n(35),i=n(64),o=n(174),s=n(232);a({target:"Object",stat:!0,forced:r(function(){o(1)}),sham:!s},{getPrototypeOf:function(e){return o(i(e))}})},function(e,t,n){n(17)({target:"Object",stat:!0},{setPrototypeOf:n(175)})},function(e,t,n){"use strict";var a,r;n(10),n(16),n(79),n(37),n(4),n(8),n(29),n(6),a=[n(2),n(5),n(0),n(1),n(15),n(14),n(3),n(9),n(28),n(41),n(59)],void 0===(r=function(B,I,z,L,t,F,e,U,q,R){function H(e){var t=e.get("type");if(-1!=t.indexOf("[]"))switch(t.replace("[]","")){case"boolean":return q.Extension.InputBooleanArrayCell;case"integer":case"smallint":case"bigint":case"serial":case"smallserial":case"bigserial":case"oid":case"cid":case"xid":case"tid":return q.Extension.InputIntegerArrayCell;case"real":case"numeric":case"double precision":case"decimal":return q.Extension.InputNumberArrayCell;default:return q.Extension.InputStringArrayCell}else switch(t){case"boolean":return q.BooleanCell.extend({formatter:q.BooleanCellFormatter});case"integer":case"smallint":case"bigint":case"serial":case"smallserial":case"bigserial":case"oid":case"cid":case"xid":case"tid":return null!=e.get("value")&&e.set({value:parseInt(e.get("value"))},{silent:!0}),q.IntegerCell;case"real":case"numeric":case"double precision":case"decimal":return null!=e.get("value")&&e.set({value:parseFloat(e.get("value"))},{silent:!0}),q.NumberCell;case"string":return q.StringCell;case"date":return q.DateCell;default:return q.Cell}}function V(e){return-1!=e.get("type").indexOf("[]")?q.StringCell:q.BooleanCell}function G(e){return e instanceof t.Model&&e.get("use_default")}function $(e){if(e instanceof t.Model)return-1==e.get("type").indexOf("[]")}var p=window.wcDocker,n=t.Model.extend({defaults:{name:void 0,type:void 0,is_null:void 0,expr:void 0,value:void 0,use_default:void 0,default_value:void 0},validate:function(){if(L.isUndefined(this.get("value"))||L.isNull(this.get("value"))||""==String(this.get("value")).replace(/^\s+|\s+$/g,"")){var e=B("Please enter a value for the parameter.");return this.errorModel.set("value",e),e}return this.errorModel.unset("value"),null}}),K=t.Collection.extend({model:n});return function(e,t,n,a){F.debuggerInputArgsDialog||F.dialog("debuggerInputArgsDialog",function(){return{main:function(e,t,n,a,r){this.preferences=R.default.pgAdmin.Browser.get_preferences_for_module("debugger"),this.set("title",e),this.set("debug_info",t),this.set("restart_debug",n),this.set("trans_id",r);var i,o,s,l,d,c,u=this.func_args_data=[];if(0==n){var p=U.tree,f=p.selected(),g=f&&1==f.length?p.itemData(f):void 0,b=g&&U.Nodes[g._type];if(!g)return;var h,m=b.getTreeNodeHierarchy.apply(b,[f]);"function"==g._type?h=I("debugger.get_arguments",{sid:m.server._id,did:m.database._id,scid:m.schema._id,func_id:m.function._id}):"procedure"==g._type?h=I("debugger.get_arguments",{sid:m.server._id,did:m.database._id,scid:m.schema._id,func_id:m.procedure._id}):"edbfunc"==g._type?h=I("debugger.get_arguments",{sid:m.server._id,did:m.database._id,scid:m.schema._id,func_id:m.edbfunc._id}):"edbproc"==g._type&&(h=I("debugger.get_arguments",{sid:m.server._id,did:m.database._id,scid:m.schema._id,func_id:m.edbproc._id}))}else h=I("debugger.get_arguments",{sid:t.server_id,did:t.database_id,scid:t.schema_id,func_id:t.function_id});z.ajax({url:h,method:"GET",async:!1}).done(function(e){if(0!=e.data.args_count)for(f=0;f<e.data.result.length;f++)u.push({arg_id:e.data.result[f].arg_id,is_null:e.data.result[f].is_null,is_expression:e.data.result[f].is_expression,use_default:e.data.result[f].use_default,value:e.data.result[f].value})}).fail(function(){F.alert(B("Debugger Error"),B("Unable to fetch the arguments from server"))});var _,v,y,w,x,k,C=q.HeaderCell.extend({className:"width_percent_25"}),D=[],S=[{name:"name",label:B("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:B("Type"),type:"text",editable:!1,cell:"string"},{name:"is_null",label:B("Null?"),type:"boolean",cell:"boolean"},{name:"expr",label:B("Expression?"),type:"boolean",cellFunction:V,editable:$},{name:"value",label:B("Value"),type:"text",editable:!0,cellFunction:H,headerCell:C},{name:"use_default",label:B("Use Default?"),type:"boolean",cell:"boolean",editable:G},{name:"default_value",label:B("Default"),type:"text",editable:!1,cell:"string"}],j=[],N=[],T=this.input_arg_id=[];if(null!=t.proargmodes){var E=t.proargmodes.split(",");for(_=0;_<E.length;_++)("i"==E[_]||"b"==E[_]||a&&"o"==E[_])&&T.push(_)}else{var P=t.proargtypenames.split(",");for(_=0;_<P.length;_++)T.push(_)}if(o=t.proargtypenames.split(","),null!=t.proargmodes&&(s=t.proargmodes.split(",")),t.pronargdefaults&&(l=t.pronargdefaults,d=t.proargdefaults.split(","),c=l),null!=t.proargnames){for(k=(i=t.proargnames.split(",")).length-1;0<=k;k--)null!=t.proargmodes?("i"==s[k]||"b"==s[k]||a&&"o"==s[k])&&(c?(c-=1,D[k]=d[c]):D[k]="<no default>"):c?(c-=1,D[k]=d[c]):D[k]="<no default>";if(0!=o.length)for(f=0;f<o.length;f++)null!=t.proargmodes?("i"==s[f]||"b"==s[f]||a&&"o"==s[f])&&(x=!1,"<no default>"!=D[f]&&(x=!0),j.push({name:i[f],type:o[f],use_default:x,default_value:D[f]})):(x=!1,"<no default>"!=D[f]&&(x=!0),j.push({name:i[f],type:o[f],use_default:x,default_value:D[f]}));if(0!=u.length)for(f=0;f<u.length;f++)null!=t.proargmodes&&"o"==s[f]&&!a||(w=u[f].arg_id,y=[],-1!=o[w].indexOf("[]")?(v=u[f].value.split(","),L.each(v,function(e){y.push({value:e})})):y=u[f].value,N.push({name:i[w],type:o[w],is_null:!!u[f].is_null,expr:!!u[f].is_expression,value:y,use_default:!!u[f].use_default,default_value:D[w]}))}else{var O=[];for(f=0;f<o.length;f++)O[f]="dbgparam"+(f+1);if(t.pronargdefaults){for(k=O.length-1;0<=k;k--)t.proargmodes,c?(c-=1,D[k]=d[c]):D[k]="<No default value>";for(f=0;f<o.length;f++)null==t.proargmodes?(x=!1,"<No default value>"!=D[f]&&(x=!0),j.push({name:O[f],type:o[f],use_default:x,default_value:D[f]})):("i"==s[f]||"b"==s[f]||a&&"o"==s[f])&&(x=!1,"<No default value>"!=D[f]&&(x=!0),j.push({name:O[f],type:o[f],use_default:x,default_value:D[f]}))}else for(f=0;f<o.length;f++)j.push({name:O[f],type:o[f],use_default:!1,default_value:"<No default value>"}),D[f]="<No default value>";if(0!=u.length)for(f=0;f<u.length;f++)w=u[f].arg_id,y=[],-1!=o[w].indexOf("[]")?(v=u[f].value.split(","),L.each(v,function(e){y.push({value:e})})):y=u[f].value,N.push({name:O[w],type:o[w],is_null:!!u[f].is_null,expr:!!u[f].is_expression,value:y,use_default:!!u[f].use_default,default_value:D[w]})}0==u.length?this.debuggerInputArgsColl=new K(j):this.debuggerInputArgsColl=new K(N),this.grid&&(this.grid.remove(),this.grid=null);var M=this.grid=new q.Grid({columns:S,collection:this.debuggerInputArgsColl,className:"backgrid table table-bordered table-noouter-border table-bottom-border"});M.render(),z(this.elements.content).html(M.el);var A=z(M.el).find("input:checkbox").first();A.length&&setTimeout(function(){A.trigger("click")},250)},settings:{debug_info:void 0,restart_debug:void 0,trans_id:void 0},setup:function(){return{buttons:[{text:B("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:B("Debug"),key:13,className:"btn btn-primary fa fa-bug pg-alertify-button"}],options:{padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}},callback:function(e){if(e.button.text===B("Debug")){var i=this;if(0==i.setting("restart_debug")){var t=U.tree,n=t.selected(),o=n&&1==n.length?t.itemData(n):void 0,a=o&&U.Nodes[o._type];if(!o)return;var s=a.getTreeNodeHierarchy.apply(a,[n])}var r,l=[],d=this.sqlite_func_args_list=[],c=0;if(this.grid.collection.each(function(e){var t;(e.get("is_null")?l.push({name:e.get("name"),type:e.get("type"),value:"NULL"}):e.get("use_default")?l.push({name:e.get("name"),type:e.get("type"),value:e.get("default_value")}):l.push({name:e.get("name"),type:e.get("type"),value:e.get("value")}),0==i.setting("restart_debug"))?("function"==o._type?t=s.function._id:"procedure"==o._type?t=s.procedure._id:"edbfunc"==o._type?t=s.edbfunc._id:"edbproc"==o._type&&(t=s.edbproc._id),d.push({server_id:s.server._id,database_id:s.database._id,schema_id:s.schema._id,function_id:t,arg_id:i.input_arg_id[c],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")})):d.push({server_id:i.setting("debug_info").server_id,database_id:i.setting("debug_info").database_id,schema_id:i.setting("debug_info").schema_id,function_id:i.setting("debug_info").function_id,arg_id:i.input_arg_id[c],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")});c+=1}),0==i.setting("restart_debug"))"function"==o._type?r=I("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:i.setting("trans_id"),sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.function._id}):"procedure"==o._type?r=I("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:i.setting("trans_id"),sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.procedure._id}):"edbfunc"==o._type?r=I("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:i.setting("trans_id"),sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.edbfunc._id}):"edbproc"==o._type&&(r=I("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:i.setting("trans_id"),sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.edbproc._id})),z.ajax({url:r,method:"POST",data:{data:JSON.stringify(l)}}).done(function(t){var e,n=I("debugger.direct",{trans_id:t.data.debuggerTransId});if(i.preferences.debugger_new_browser_tab)window.open(n,"_blank");else{U.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",function(e){e.openURL(n)});var a=U.docker.findPanels("properties"),r=U.docker.addPanel("frm_debugger",p.DOCK.STACKED,a[0]);r.focus(),r.on(p.EVENT.CLOSED,function(){var e=I("debugger.close",{trans_id:t.data.debuggerTransId});z.ajax({url:e,method:"DELETE"})})}"function"==o._type?e=I("debugger.set_arguments",{sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.function._id}):"procedure"==o._type?e=I("debugger.set_arguments",{sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.procedure._id}):"edbfunc"==o._type?e=I("debugger.set_arguments",{sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.edbfunc._id}):"edbproc"==o._type&&(e=I("debugger.set_arguments",{sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.edbproc._id})),z.ajax({url:e,method:"POST",data:{data:JSON.stringify(d)}}).done(function(){}).fail(function(){F.alert(B("Debugger Error"),B("Unable to set the arguments on the server"))})}).fail(function(e){F.alert(B("Debugger Target Initialization Error"),e.responseJSON.errormsg)});else{r=I("debugger.start_listener",{trans_id:i.setting("debug_info").trans_id}),z.ajax({url:r,method:"POST",data:{data:JSON.stringify(l)}}).done(function(){}).fail(function(e){F.alert(B("Debugger Listener Startup Error"),e.responseJSON.errormsg)});var u=I("debugger.set_arguments",{sid:i.setting("debug_info").server_id,did:i.setting("debug_info").database_id,scid:i.setting("debug_info").schema_id,func_id:i.setting("debug_info").function_id});z.ajax({url:u,method:"POST",data:{data:JSON.stringify(d)}}).done(function(){}).fail(function(){F.alert(B("Debugger Error"),B("Unable to set the arguments on the server"))})}return!0}if(e.button.text===B("Cancel"))return z.ajax({method:"DELETE",url:I("debugger.close",{trans_id:this.setting("trans_id")})}),!1},build:function(){F.pgDialogBuild.apply(this)},prepare:function(){var n,e;z(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),0==this.func_args_data.length?this.__internal.buttons[1].element.disabled=!0:this.__internal.buttons[1].element.disabled=!1,this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:edited",(n=this,function(){for(var e=!1,t=0;t<this.collection.length;t++)if(this.collection.models[t].get("is_null"))e=!(n.__internal.buttons[1].element.disabled=!1);else if(null==this.collection.models[t].get("value")||null==this.collection.models[t].get("value")){if(e=!0,!this.collection.models[t].get("use_default")){n.__internal.buttons[1].element.disabled=!0;break}n.__internal.buttons[1].element.disabled=!1}e||(n.__internal.buttons[1].element.disabled=!1)})),this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:error",(e=this,function(){e.__internal.buttons[1].element.disabled=!0}))}}}),F.debuggerInputArgsDialog(B("Debugger"),e,t,n,a).resizeTo(U.stdW.md,U.stdH.md)}}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";e.exports={setFocusToDebuggerEditor:function(e,t){t&&9!==(t.which||t.keyCode)&&e.focus()},getFunctionId:function(e){var t;return e&&(e.function&&e.function._id?t=e.function._id:e.edbfunc&&e.edbfunc._id&&(t=e.edbfunc._id)),t},getProcedureId:function(e){var t;return e&&(e.procedure&&e.procedure._id?t=e.procedure._id:e.edbproc&&e.edbproc._id&&(t=e.edbproc._id)),t}}},,function(e,t){e.exports=i},function(e,t,n){"use strict";var a,r;n(10),n(16),n(23),n(30),n(33),n(11),n(12),n(4),n(46),n(8),n(6),n(31),a=[n(2),n(5),n(0),n(1),n(14),n(9),n(15),n(56),n(68),n(80),n(161),n(153),n(144)],void 0===(r=function(p,n,f,g,b,a,h,m,r,e,i){if(a.UserManagement)return a.UserManagement;var _=n("user_management.users"),v=n("user_management.roles");return a.UserManagement={init:function(){if(!this.initialized)return this.initialized=!0,this},change_password:function(e){var t=p("Change Password");b.ChangePassword||b.dialog("ChangePassword",function(){return{main:function(e,t){this.set({title:e,url:t})},build:function(){b.pgDialogBuild.apply(this)},settings:{url:void 0},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-secondary pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:p("Change Password"),url:n("help.static",{filename:"change_user_password.html"})}},{text:p("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{padding:!1,overflow:!1,modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,closable:!1}}},hooks:{onclose:function(){return setTimeout(function(){return b.ChangePassword().destroy()},500)}},prepare:function(){var e=document.createElement("iframe");e.frameBorder="no",e.width="100%",e.height="100%",e.src=this.setting("url"),this.elements.content.appendChild(e)},callback:function(e){if("dialog_help"==e.button.element.name)return e.cancel=!0,void a.showHelp(e.button.element.name,e.button.element.getAttribute("url"),null,null)}}}),b.ChangePassword(t,e).resizeTo(a.stdW.lg,a.stdH.md)},isPgaLoginRequired:function(e){return void 0===e.responseJSON&&void 0!==e.data?401===e.status&&e.data&&e.data.info&&"PGADMIN_LOGIN_REQUIRED"===e.data.info:401===e.status&&e.responseJSON&&e.responseJSON.info&&"PGADMIN_LOGIN_REQUIRED"===e.responseJSON.info},pgaLogin:function(e){var t=p("pgAdmin 4 login");e=e||n("security.login"),b.PgaLogin||b.dialog("PgaLogin",function(){return{main:function(e,t){this.set({title:e,url:t})},build:function(){b.pgDialogBuild.apply(this)},settings:{url:void 0},setup:function(){return{buttons:[{text:p("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{padding:!1,overflow:!1,modal:!0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,closable:!1}}},hooks:{onclose:function(){return setTimeout(function(){return b.PgaLogin().destroy()})}},prepare:function(){var e=this,t=document.createElement("iframe"),n=this.setting("url");t.onload=function(){-1==(this.contentDocument||this.contentWindow.document).location.href.indexOf(n)&&(this.contentWindow.stop(),this.onload=null,e.close(),a.Events.trigger("pgadmin:user:logged-in"))},t.frameBorder="no",t.width="100%",t.height="100%",t.src=n,e.elements.content.appendChild(t)}}}),b.PgaLogin(t,e).resizeTo(a.stdW.md,a.stdH.md)},show_users:function(){if(i.is_admin){var d=[],c=a.Node.Model.extend({idAttribute:"id",urlRoot:_,defaults:{id:void 0,email:void 0,active:!0,role:void 0,newPassword:void 0,confirmPassword:void 0},schema:[{id:"email",label:p("Email"),type:"text",cell:m.Extension.StringDepCell,cellHeaderClasses:"width_percent_30",deps:["id"],editable:function(e){return!(e instanceof h.Collection)&&!!e.isNew()}},{id:"role",label:p("Role"),type:"text",control:"Select2",cellHeaderClasses:"width_percent_20",cell:"select2",select2:{allowClear:!1,openOnEnter:!1},options:function(e){var t=[];return e instanceof r.Control?g.each(d,function(e){t.push({label:e.name,value:e.id.toString()})}):g.each(d,function(e){t.push([e.name,e.id.toString()])}),t},editable:function(e){return e instanceof h.Collection||e.get("id")!=i.id}},{id:"active",label:p("Active"),type:"switch",cell:"switch",cellHeaderClasses:"width_percent_10",editable:function(e){return e instanceof h.Collection||e.get("id")!=i.id}},{id:"newPassword",label:p("New password"),type:"password",disabled:!1,control:"input",cell:"password",cellHeaderClasses:"width_percent_20"},{id:"confirmPassword",label:p("Confirm password"),type:"password",disabled:!1,control:"input",cell:"password",cellHeaderClasses:"width_percent_20"}],validate:function(){var e=null,t=this.changed||{};if(("email"in t||!this.isNew())&&(g.isUndefined(this.get("email"))||g.isNull(this.get("email"))||""==String(this.get("email")).replace(/^\s+|\s+$/g,"")))return e=p("Email address cannot be empty."),this.errorModel.set("email",e),e;if(this.get("email")&&!/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(this.get("email")))return e=p("Invalid email address: %s.",this.get("email")),this.errorModel.set("email",e),e;if(this.get("email")&&1<this.collection.where({email:this.get("email")}).length)return e=p("The email address %s already exists.",this.get("email")),this.errorModel.set("email",e),e;if(this.errorModel.unset("email"),"role"in t&&(g.isUndefined(this.get("role"))||g.isNull(this.get("role"))||""==String(this.get("role")).replace(/^\s+|\s+$/g,"")))return e=p("Role cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("role",e),e;if(this.errorModel.unset("role"),this.isNew()){if("newPassword"in t&&(g.isUndefined(this.get("newPassword"))||g.isNull(this.get("newPassword"))||""==this.get("newPassword")))return e=p("Password cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("newPassword",e),e;if(!g.isUndefined(this.get("newPassword"))&&!g.isNull(this.get("newPassword"))&&this.get("newPassword").length<6)return e=p("Password must be at least 6 characters for user %s.",this.get("email")||""),this.errorModel.set("newPassword",e),e;if(this.errorModel.unset("newPassword"),"confirmPassword"in t&&(g.isUndefined(this.get("confirmPassword"))||g.isNull(this.get("confirmPassword"))||""==this.get("confirmPassword")))return e=p("Confirm Password cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",e),e;if(this.errorModel.unset("confirmPassword"),this.get("newPassword")&&this.get("confirmPassword")&&this.get("newPassword")!=this.get("confirmPassword"))return e=p("Passwords do not match for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",e),e;this.errorModel.unset("confirmPassword")}else if((g.isUndefined(this.get("newPassword"))||g.isNull(this.get("newPassword"))||""==this.get("newPassword"))&&(g.isUndefined(this.get("confirmPassword"))||g.isNull(this.get("confirmPassword"))||""==this.get("confirmPassword")))this.errorModel.unset("newPassword"),""==this.get("newPassword")&&this.set({newPassword:void 0}),this.errorModel.unset("confirmPassword"),""==this.get("confirmPassword")&&this.set({confirmPassword:void 0});else{if(!g.isUndefined(this.get("newPassword"))&&!g.isNull(this.get("newPassword"))&&""==!this.get("newPassword")&&this.get("newPassword").length<6)return e=p("Password must be at least 6 characters for user %s.",this.get("email")||""),this.errorModel.set("newPassword",e),e;if(g.isUndefined(this.get("confirmPassword"))||g.isNull(this.get("confirmPassword"))||""==this.get("confirmPassword"))return e=p("Confirm Password cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",e),e;if(this.get("newPassword")&&this.get("confirmPassword")&&this.get("newPassword")!=this.get("confirmPassword"))return e=p("Passwords do not match for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",e),e;this.errorModel.unset("newPassword"),this.errorModel.unset("confirmPassword")}return null}}),u=r.generateGridColumnsFromModel(null,c,"edit"),e=m.Extension.DeleteCell.extend({deleteRow:function(e){var t=this;if(e.preventDefault(),t.model.get("id")==i.id)return b.alert(p("Cannot delete user."),p("Cannot delete currently logged in user."),function(){return!0}),!0;!(!g.isUndefined(this.column.get("canDeleteRow"))&&g.isFunction(this.column.get("canDeleteRow")))||m.callByNeed(this.column.get("canDeleteRow"),this.column,this.model)?t.model.isNew()?t.model.destroy():b.confirm(p("Delete user?"),p("Are you sure you wish to delete this user?"),function(){t.model.destroy({wait:!0,success:function(){b.success(p("User deleted."))},error:function(){b.error(p("Error during deleting user."))}})},function(){return!0}):b.alert(p("Error"),p("This user cannot be deleted."),function(){return!0})}});u.columns.unshift({name:"pg-backform-delete",label:"",cell:e,editable:!1,cell_priority:-1,canDeleteRow:!0}),b.UserManagement||b.dialog("UserManagement",function(){return{main:function(e){this.set("title",e)},build:function(){b.pgDialogBuild.apply(this)},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-secondary pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:p("Users"),url:n("help.static",{filename:"user_management.html"})}},{text:p("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button user_management_pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{title:p("User Management"),padding:!1,overflow:!1,modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,closable:!1}}},hooks:{onclose:function(){this.view&&(this.view.remove({data:!0,internal:!0,silent:!0}),this.$content.remove())}},prepare:function(){var e=g.template(['<div class="pg-prop-footer" style="visibility:hidden;">',' <div class="pg-prop-status-bar">','    <div class="error-in-footer"> ','      <div class="d-flex px-2 py-1"> ','        <div class="pr-2"> ','          <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i> ',"        </div> ",'        <div class="alert-text" role="status></div> ','        <div class="ml-auto close-error-bar"> ','          <a class="close-error fa fa-times text-danger"></a> ',"        </div> ","      </div> ","    </div> "," </div>","</div>"].join("\n")),a=f(e()),t=m.Row.extend({userInvalidClass:"bg-user-invalid",initialize:function(){m.Row.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"pgadmin:user:invalid",this.userInvalid),this.listenTo(this.model,"pgadmin:user:valid",this.userValid)},userInvalid:function(){f(this.el).removeClass("new"),f(this.el).addClass(this.userInvalidClass)},userValid:function(){f(this.el).removeClass(this.userInvalidClass)}}),n=h.Collection.extend({model:c,url:_,initialize:function(){h.Collection.prototype.initialize.apply(this,arguments);var n=this;n.changedUser=null,n.invalidUsers={},n.on("add",n.onModelAdd),n.on("remove",n.onModelRemove),n.on("pgadmin-session:model:invalid",function(e,t){n.invalidUsers[t.cid]=e,t.trigger("pgadmin:user:invalid",t),a.find(".alert-text").html(e),a.css("visibility","visible")}),n.on("pgadmin-session:model:valid",function(e){delete n.invalidUsers[e.cid],e.trigger("pgadmin:user:valid",e),this.updateErrorMsg(),this.saveUser(e)})},onModelAdd:function(e){e.startNewSession()},onModelRemove:function(e){delete this.invalidUsers[e.cid],this.updateErrorMsg()},updateErrorMsg:function(){var e=null;for(var t in this.invalidUsers)if(e=this.invalidUsers[t])break;e?(a.find(".alert-text").html(e),a.css("visibility","visible")):(a.find(".alert-text").empty(),a.css("visibility","hidden"))},saveUser:function(n){var e=n.toJSON(!0);return!(n.isNew()&&!(n.get("email")&&n.get("role")&&n.get("newPassword")&&n.get("confirmPassword")&&n.get("newPassword")==n.get("confirmPassword")))&&(!(!n.isNew()&&n.get("newPassword")!=n.get("confirmPassword"))&&void(n.sessChanged()&&e&&!g.isEmpty(e)&&(n.stopSession(),n.save({},{attrs:e,wait:!0,success:function(){n.set({newPassword:void 0,confirmPassword:void 0}),n.startNewSession(),b.success(p("User '%s' saved.",n.get("email")))},error:function(e,t){n.startNewSession(),b.error(p("Error saving user: '%s'",t.responseJSON.errormsg))}}))))}}),s=this.userCollection=new n,r=g.template('<div class="navtab-inline-controls">\n                    <div class="input-group">\n                      <div class="input-group-prepend">\n                        <span class="input-group-text fa fa-search" id="labelSearch"></span>\n                        </div>\n                          <input type="search" class="form-control" id="txtGridSearch" placeholder="Search" aria-label="Search" aria-describedby="labelSearch" />\n                        </div>\n                        <button id="btn_refresh" type="button" class="btn btn-secondary btn-navtab-inline add" title="Add">\n                          <span class="fa fa-plus "></span>\n                        </button>\n                      </div>\n                    </div>\n                  </div>'),i={canAdd:!0,add_title:p("Add new user")},o=f("<div></div>",{class:"user_container flex-grow-1"});f.ajax({url:v,method:"GET",async:!1}).done(function(e){d=e}).fail(function(){setTimeout(function(){b.alert(p("Error"),p("Cannot load user roles."))},100)});var l=this.view=new m.Grid({row:t,columns:u.columns,collection:s,className:"backgrid table table-bordered table-noouter-border table-bottom-border table-hover"});o.append(l.render().$el[0]),this.$content=f("<div class='user_management object subnode subnode-noouter-border d-flex flex-column'></div>").append(r(i)).append(o).append(a),this.elements.content.appendChild(this.$content[0]),function(e){return new m.Extension.ClientSideFilter({collection:e,placeholder:g("Filter by email"),wait:150})}(s).setCustomSearchBox(f("#txtGridSearch")),s.fetch(),this.$content.find("a.close-error").on("click",function(){a.find(".alert-text").empty(),a.css("visibility","hidden")}),this.$content.find("button.add").first().on("click",function(e){e.preventDefault();var t,n=!1,a=null;if(s.each(function(e){n||(n=e.isNew(),a=e)}),n){t=s.indexOf(a);var r=l.body.rows[t].$el;return r.addClass("new"),f(r).pgMakeVisible("backform-tab"),!1}f(l.body.$el.find(f("tr.new"))).removeClass("new");var i=new c(null,{handler:s,top:s,collection:s});s.add(i),t=s.indexOf(i);var o=l.body.rows[t].$el;return o.addClass("new"),f(o).pgMakeVisible("backform-tab"),!1})},callback:function(e){if("dialog_help"==e.button.element.name)return e.cancel=!0,void a.showHelp(e.button.element.name,e.button.element.getAttribute("url"),null,null);if("close"==e.button.element.name){var t=this;g.all(this.userCollection.pluck("id"))&&g.isEmpty(this.userCollection.invalidUsers)||(e.cancel=!0,b.confirm(p("Discard unsaved changes?"),p("Are you sure you want to close the dialog? Any unsaved changes will be lost."),function(){return t.close(),!0},function(){return!0}))}}}}),b.UserManagement(!0).resizeTo(a.stdW.md,a.stdH.md)}}},a.UserManagement}.apply(t,a))||(e.exports=r)},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a,r;n(16),n(4),n(8),n(83),a=[n(0),n(1)],void 0===(r=function(e,a){return function(e,t){if(a.isUndefined(t)||a.isNull(t))return!0;t.startsWith("coll-")&&(t=t.replace("coll-",""));if(0<=a.indexOf(["server_group","server","catalog_object_column"],t))return!0;var n=e.get_preference("browser","show_node_"+t);return!n||n.value}}.apply(t,a))||(e.exports=r)},,,function(e,f,g){"use strict";(function(r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}g(21),g(26),g(27),g(19),g(33),g(11),g(7),g(32),g(48),g(12),g(24),g(49),g(22),g(6),Object.defineProperty(f,"__esModule",{value:!0}),f.pgBrowser=void 0;var a=t(g(3)),i=t(g(5)),s=t(g(0)),l=e(g(14)),d=e(g(69)),n=t(g(41));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function e(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function t(e){return e&&e.__esModule?e:{default:e}}var u=g(96),p=a.default.Browser=a.default.Browser||{};f.pgBrowser=p,r.extend(p,{preferences_cache:[],prefcache_version:0,generate_preference_version:function(){return(new Date).getTime()},preference_version:function(e){if(!e)return this.prefcache_version;this.prefcache_version=e},get_preference:function(e,t){var n=this;if(0!=r.size(n.preferences_cache))return r.findWhere(n.preferences_cache,{module:e,name:t});var a=setInterval(function(){if(0<n.preferences_cache.length)return clearInterval(a),r.findWhere(n.preferences_cache,{module:e,name:t})},1e3)},get_preferences_for_module:function(e){var t={};if(r.each(r.where(this.preferences_cache,{module:e}),function(e){t[e.name]=e.value}),0<Object.keys(t).length)return t},get_preference_for_id:function(e){return r.findWhere(this.preferences_cache,{id:e})},cache_preferences:function(t){var n=this,e={};e[a.default.csrf_token_header]=a.default.csrf_token,setTimeout(function(){s.default.ajax({url:(0,i.default)("preferences.get_all"),headers:e}).done(function(e){n.preferences_cache=e,n.preference_version(n.generate_preference_version()),p.keyboardNavigation.init(),p.tree&&(u.modifyAcitreeAnimation(n),u.modifyAlertifyAnimation(n)),p.browserTreeState.init(),t&&("string"==typeof t?s.default.event.trigger("prefchange:"+t):r.each(t,function(e,t){s.default.event.trigger("prefchange:"+t)}))}).fail(function(e,t,n){l.pgRespErrorNotify(e,n)})},500)},reflectPreferences:function(e){var t=this;if("sqleditor"===e||null==e){var n=t.get_preferences_for_module("sqleditor");(0,s.default)(t.editor.getWrapperElement()).css("font-size",d.calcFontSize(n.sql_font_size)),t.editor.setOption("tabSize",n.tab_size),t.editor.setOption("lineWrapping",n.wrap_code),t.editor.setOption("autoCloseBrackets",n.insert_pair_brackets),t.editor.setOption("matchBrackets",n.brace_matching),t.editor.refresh()}},onPreferencesChange:function(e,t){(0,s.default)(n.default).on("prefchange:"+e,function(e){t(e)})}})}).call(this,g(1))},function(e,t){e.exports=o},function(e,p,f){"use strict";(function(a){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}f(21),f(26),f(27),f(19),f(11),f(7),f(32),f(12),f(24),f(49),f(22),f(6),Object.defineProperty(p,"__esModule",{value:!0}),p.pgBrowser=void 0;var e=t(f(3)),r=t(f(5)),i=t(f(0)),n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,t&&t.set(e,n);return n}(f(14)),s=t(f(2));f(59);var l=t(f(41));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function t(e){return e&&e.__esModule?e:{default:e}}var c=e.default.Browser=e.default.Browser||{};p.pgBrowser=c;var u=window.wcDocker;a.extend(c,{lock_layout_levels:{PREVENT_DOCKING:"docking",FULL:"full",NONE:"none"},buildDefaultLayout:function(e){var t=e.addPanel("browser",u.DOCK.LEFT),n=e.addPanel("dashboard",u.DOCK.RIGHT,t);e.addPanel("properties",u.DOCK.STACKED,n,{tabOrientation:u.TAB.TOP}),e.addPanel("sql",u.DOCK.STACKED,n),e.addPanel("statistics",u.DOCK.STACKED,n),e.addPanel("dependencies",u.DOCK.STACKED,n),e.addPanel("dependents",u.DOCK.STACKED,n)},save_current_layout:function(e,t){if(t){var n={setting:e,value:t.save()};i.default.ajax({type:"POST",url:(0,r.default)("settings.store_bulk"),data:n})}},restore_layout:function(t,e,n){if(""!=e)try{t.restore(e)}catch(e){t.clear(),n&&n(t)}else n&&n(t);var a=l.default.pgAdmin.Browser,r=setInterval(function(){a.get_preferences_for_module("browser")&&(clearInterval(r),a.reflectLocklayoutChange(t),a.onPreferencesChange("browser",function(){a.reflectLocklayoutChange(t)}))},500)},reflectLocklayoutChange:function(e){var t=l.default.pgAdmin.Browser,n=t.get_preferences_for_module("browser");t.lock_layout(e,n.lock_layout)},lock_layout:function(e,t){var n=this.menus.file.mnu_locklayout.menu_items;switch(t){case this.lock_layout_levels.PREVENT_DOCKING:e.lockLayout(u.LOCK_LAYOUT_LEVEL.PREVENT_DOCKING);break;case this.lock_layout_levels.FULL:e.lockLayout(u.LOCK_LAYOUT_LEVEL.FULL);break;case this.lock_layout_levels.NONE:e.lockLayout(u.LOCK_LAYOUT_LEVEL.NONE)}a.each(n,function(e){e.name!="mnu_lock_"+t?e.change_checked(!1):e.change_checked(!0)})},save_lock_layout:function(e){var t=l.default.pgAdmin.Browser;i.default.ajax({url:(0,r.default)("browser.lock_layout"),method:"PUT",contentType:"application/json",data:JSON.stringify({value:e})}).done(function(){t.cache_preferences("browser")}).fail(function(e,t){n.pgNotifier(t,e,(0,s.default)("Failed to save the lock layout setting."))})},mnu_lock_docking:function(){this.lock_layout(this.docker,this.lock_layout_levels.PREVENT_DOCKING),this.save_lock_layout(this.lock_layout_levels.PREVENT_DOCKING)},mnu_lock_full:function(){this.lock_layout(this.docker,this.lock_layout_levels.FULL),this.save_lock_layout(this.lock_layout_levels.FULL)},mnu_lock_none:function(){this.lock_layout(this.docker,this.lock_layout_levels.NONE),this.save_lock_layout(this.lock_layout_levels.NONE)}})}).call(this,f(1))},,function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(21),n(26),n(27),n(10),n(19),n(18),n(7),n(32),n(12),n(24),n(49),n(22),n(6);var s=g(n(1)),l=g(n(3)),i=g(n(0)),d=g(n(105)),a=f(n(25)),r=g(n(125)),c=f(n(74)),u=g(n(41));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function g(e){return e&&e.__esModule?e:{default:e}}var b=l.default.Browser=l.default.Browser||{};b.keyboardNavigation=b.keyboardNavigation||{},s.default.extend(b.keyboardNavigation,{init:function(){d.default.reset(),0<b.preferences_cache.length&&(this.keyboardShortcut={file_shortcut:a.parseShortcutValue(b.get_preference("browser","main_menu_file").value),object_shortcut:a.parseShortcutValue(b.get_preference("browser","main_menu_object").value),tools_shortcut:a.parseShortcutValue(b.get_preference("browser","main_menu_tools").value),help_shortcut:a.parseShortcutValue(b.get_preference("browser","main_menu_help").value),left_tree_shortcut:a.parseShortcutValue(b.get_preference("browser","browser_tree").value),tabbed_panel_backward:a.parseShortcutValue(b.get_preference("browser","tabbed_panel_backward").value),tabbed_panel_forward:a.parseShortcutValue(b.get_preference("browser","tabbed_panel_forward").value),sub_menu_query_tool:a.parseShortcutValue(b.get_preference("browser","sub_menu_query_tool").value),sub_menu_view_data:a.parseShortcutValue(b.get_preference("browser","sub_menu_view_data").value),sub_menu_properties:a.parseShortcutValue(b.get_preference("browser","sub_menu_properties").value),sub_menu_create:a.parseShortcutValue(b.get_preference("browser","sub_menu_create").value),sub_menu_delete:a.parseShortcutValue(b.get_preference("browser","sub_menu_delete").value),sub_menu_refresh:a.parseShortcutValue(b.get_preference("browser","sub_menu_refresh").value),context_menu:a.parseShortcutValue(b.get_preference("browser","context_menu").value),direct_debugging:a.parseShortcutValue(b.get_preference("browser","direct_debugging").value),drop_multiple_objects:a.parseShortcutValue(b.get_preference("browser","grid_menu_drop_multiple").value),drop_cascade_multiple_objects:a.parseShortcutValue(b.get_preference("browser","grid_menu_drop_cascade_multiple").value),add_grid_row:a.parseShortcutValue(b.get_preference("browser","add_grid_row").value)},this.shortcutMethods={bindMainMenu:{shortcuts:[this.keyboardShortcut.file_shortcut,this.keyboardShortcut.object_shortcut,this.keyboardShortcut.tools_shortcut,this.keyboardShortcut.help_shortcut]},bindRightPanel:{shortcuts:[this.keyboardShortcut.tabbed_panel_backward,this.keyboardShortcut.tabbed_panel_forward]},bindLeftTree:{shortcuts:this.keyboardShortcut.left_tree_shortcut},bindSubMenuQueryTool:{shortcuts:this.keyboardShortcut.sub_menu_query_tool},bindSubMenuViewData:{shortcuts:this.keyboardShortcut.sub_menu_view_data},bindSubMenuProperties:{shortcuts:this.keyboardShortcut.sub_menu_properties},bindSubMenuCreate:{shortcuts:this.keyboardShortcut.sub_menu_create},bindSubMenuDelete:{shortcuts:this.keyboardShortcut.sub_menu_delete},bindSubMenuRefresh:{shortcuts:this.keyboardShortcut.sub_menu_refresh,bindElem:"#tree"},bindContextMenu:{shortcuts:this.keyboardShortcut.context_menu},bindDirectDebugging:{shortcuts:this.keyboardShortcut.direct_debugging},bindDropMultipleObjects:{shortcuts:this.keyboardShortcut.drop_multiple_objects},bindDropCascadeMultipleObjects:{shortcuts:this.keyboardShortcut.drop_cascade_multiple_objects},bindAddGridRow:{shortcuts:this.keyboardShortcut.add_grid_row}},this.bindShortcuts())},bindShortcuts:function(){var n=this;s.default.each(n.shortcutMethods,function(e,t){n._bindWithMousetrap(e.shortcuts,n[t],e.bindElem)});(0,i.default)(".pg-navbar").on("keydown",function(e){switch(e.keyCode){case 37:n.bindMainMenuLeft(e);break;case 38:n.bindMainMenuUpDown(e,"up");break;case 39:n.bindMainMenuRight(e);break;case 40:n.bindMainMenuUpDown(e,"down")}})},_bindWithMousetrap:function(e,t,n){var a=this;if(d.default.unbind(e),n){var r=document.querySelector(n);(0,d.default)(r).bind(e,function(){t.apply(this,arguments)}.bind(r))}else d.default.bind(e,function(){t.apply(a,arguments)})},unbindShortcuts:function(){s.default.each(this.mousetrapInstances,function(e){e.instance.reset()}),this.mousetrapInstances=[]},bindMainMenu:function(e,t){var n=this.keyboardShortcut;t===n.file_shortcut&&(0,i.default)("#mnu_file a.dropdown-toggle").dropdown("toggle"),t===n.object_shortcut&&(0,i.default)("#mnu_obj a.dropdown-toggle").first().dropdown("toggle"),t===n.tools_shortcut&&(0,i.default)("#mnu_tools a.dropdown-toggle").dropdown("toggle"),t===n.help_shortcut&&(0,i.default)("#mnu_help a.dropdown-toggle").dropdown("toggle")},bindRightPanel:function(e,t){var n=0,a=l.default.Browser.docker.findPanels().length-1,r=0,i=!1,o=this.keyboardShortcut;s.default.each(l.default.Browser.docker.findPanels(),function(e,t){e.isVisible()&&!i&&"browser"!==e._type&&(r=t,i=!0)}),t===o.tabbed_panel_backward?n=0<r?r-1:1:t===o.tabbed_panel_forward&&(n=r<a?r+1:a),l.default.Browser.docker.findPanels()[n].focus(),setTimeout(function(){document.activeElement instanceof HTMLIFrameElement&&document.activeElement.blur()},1e3)},bindMainMenuLeft:function(e){if((0,i.default)(e.target).hasClass("nav-link")){var t=(0,i.default)(e.target).closest(".nav-item");for(c._stopEventPropagation(e),t=t.prev(".nav-item");t.hasClass("d-none");)t=t.prev(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if(0<(0,i.default)(e.target).closest(".dropdown-menu").length){var n=(0,i.default)(e.target).closest("li");c._stopEventPropagation(e);var a=n.closest(".dropdown-menu");0<a.closest(".dropdown-submenu").length&&(a.removeClass("show"),a.closest(".dropdown-submenu").removeClass("dropdown-submenu-visible"),(n=a.closest(".dropdown-submenu")).find(".dropdown-item").trigger("focus"))}},bindMainMenuRight:function(e){if((0,i.default)(e.target).hasClass("nav-link")){var t=(0,i.default)(e.target).closest(".nav-item");for(c._stopEventPropagation(e),t=t.next(".nav-item");t.hasClass("d-none");)t=t.next(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if(0<(0,i.default)(e.target).closest(".dropdown-menu").length){var n=(0,i.default)(e.target).closest("li");c._stopEventPropagation(e),n.hasClass("dropdown-submenu")&&(n.addClass("dropdown-submenu-visible"),n.find(".dropdown-menu").addClass("show"),n=n.find(".dropdown-menu .dropdown-item").first().trigger("focus"))}},bindMainMenuUpDown:function(e,t){if(0<(0,i.default)(e.target).closest(".dropdown-menu").length){c._stopEventPropagation(e);var n=(0,i.default)(e.target).closest("li"),a=(0,i.default)(e.target).closest(".dropdown-menu");for(a.find(".show").removeClass("show"),a.find(".dropdown-submenu").removeClass("dropdown-submenu-visible"),"up"===t?n=n.prev():"down"===t&&(n=n.next());n.hasClass("dropdown-divider")||n.find(".dropdown-item").first().hasClass("disabled");)"up"===t?n=n.prev():"down"===t&&(n=n.next());n.find(".dropdown-item").trigger("focus")}},bindLeftTree:function(){var e=this.getTreeDetails();(0,i.default)("#tree").trigger("focus"),e.t.focus(e.i),e.t.select(e.i)},bindSubMenuQueryTool:function(){var e=this.getTreeDetails();e.d&&l.default.DataGrid.show_query_tool("",e.i)},bindSubMenuViewData:function(){var e=this.getTreeDetails();e.d&&l.default.DataGrid.show_data_grid({mnuid:1},e.i)},bindSubMenuProperties:function(){var e=this.getTreeDetails();e.d&&!0!==l.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&l.default.Browser.Node.callbacks.show_obj_properties.call(l.default.Browser.Nodes[e.t.itemData(e.i)._type],{action:"edit"})},bindSubMenuCreate:function(){var e=this.getTreeDetails(),t=l.default.Browser.Nodes[e.t.itemData(e.i)._type];if(e.d){if(!0===t.collection_node){if(!t.node)return;t=l.default.Browser.Nodes[t.node]}l.default.Browser.Node.callbacks.show_obj_properties.call(t,{action:"create",item:e.i})}},bindSubMenuDelete:function(){var e=this.getTreeDetails();e.d&&!0!==l.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&l.default.Browser.Node.callbacks.delete_obj.call(l.default.Browser.Nodes[e.t.itemData(e.i)._type])},bindSubMenuRefresh:function(e){e.preventDefault();var t=b.keyboardNavigation.getTreeDetails();l.default.Browser.Node.callbacks.refresh.call(l.default.Browser.Nodes[t.t.itemData(t.i)._type])},bindContextMenu:function(e){var t=this.getTreeDetails(),n=e.srcElement||e.target,a=(0,i.default)(n).find(".aciTreeEntry").position().left+70,r=(0,i.default)(n).find(".aciTreeEntry").position().top+70;t.t.blur(t.i),(0,i.default)("#tree").trigger("blur"),t.i.children().contextMenu({x:a,y:r})},bindDirectDebugging:function(){var e=this.getTreeDetails(),t=e.t.itemData(e.i)._type;!e.d||"function"!==t&&"procedure"!==t||l.default.Tools.Debugger.can_debug(e.d,e.i,{debug_type:"direct"})&&l.default.Tools.Debugger.get_function_information(l.default.Browser.Nodes[t])},bindDropMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&0<(0,i.default)("button.delete_multiple").length&&(0,i.default)("button.delete_multiple").click()},bindDropCascadeMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&0<(0,i.default)("button.delete_multiple_cascade").length&&(0,i.default)("button.delete_multiple_cascade").click()},bindAddGridRow:function(){var e=(0,i.default)(document.activeElement).closest(".object.subnode");(0,i.default)(e).length&&(0,i.default)(e).find(".add").click()},isPropertyPanelVisible:function(){var t=!1;return s.default.each(l.default.Browser.docker.findPanels(),function(e){"properties"===e._type&&(t=e.isVisible())}),t},getTreeDetails:function(){var e=l.default.Browser.tree,t=0<e.selected().length?e.selected():e.first(),n=t&&1===t.length?e.itemData(t):void 0;return{t:e,i:t,d:n}},getDialogTabNavigator:function(e){var t=u.default.pgAdmin.Browser.get_preference("browser","dialog_tab_backward").value,n=u.default.pgAdmin.Browser.get_preference("browser","dialog_tab_forward").value;return new r.default.dialogTabNavigator(e,t,n)}}),e.exports=l.default.Browser.keyboardNavigation},,function(e,t,n){"use strict";var a,r;n(10),n(23),n(18),n(11),n(4),n(8),n(6),a=[n(2),n(5),n(0),n(1),n(14),n(3),n(9),n(15),n(28),n(13),n(84),n(158),n(74),n(159),n(41),n(59)],void 0===(r=function(d,s,l,c,u,o,n,p,f,e,t,i,a,g,b){var r=t.default,h=window.wcDocker;null!=o.Browser.tree&&(o=o||window.pgAdmin||{});var m=o.Tools=o.Tools||{};if(m.DirectDebug)return m.DirectDebug;var _=new function(){};c.extend(_,p.Events,{enable:function(e,t){this.trigger("pgDebugger:button:state:"+e,t)},enable_toolbar_buttons:function(){var e=this;e.enable("stop",!0),e.enable("step_over",!0),e.enable("step_into",!0),e.enable("toggle_breakpoint",!0),e.enable("clear_all_breakpoints",!0),e.enable("continue",!0)},disable_toolbar_buttons:function(){var e=this;e.enable("stop",!1),e.enable("step_over",!1),e.enable("step_into",!1),e.enable("toggle_breakpoint",!1),e.enable("clear_all_breakpoints",!1),e.enable("continue",!1)},set_breakpoint:function(e,t,n){var a=s("debugger.set_breakpoint",{trans_id:e,line_no:t,set_type:n});l.ajax({url:a,method:"GET"}).done(function(e){e.data.status}).fail(function(){u.alert(d("Debugger Error"),d("Error while setting debugging breakpoint."))})},UpdateBreakpoint:function(e){var t=this.GetBreakpointInformation(e);if(1!=t.length||-1!=t[0].linenumber){for(var n,a=new Array,r=0;r<t.length;r++)-1!=t[r].linenumber&&a.push(t[r].linenumber);for(r=0;r<a.length;r++){null!=m.DirectDebug.editor.lineInfo(a[r]-1).gutterMarkers?m.DirectDebug.editor.setGutterMarker(a[r]-1,"breakpoints",null):m.DirectDebug.editor.setGutterMarker(a[r]-1,"breakpoints",(n=void 0,(n=document.createElement("div")).style.color="#822",n.innerHTML="●",n))}}},GetBreakpointInformation:function(e){var t="",n=s("debugger.execute_query",{trans_id:e,query_type:"get_breakpoints"});return l.ajax({url:n,method:"GET",async:!1}).done(function(e){"Success"===e.data.status?t=e.data.result:"NotConnected"===e.data.status&&u.alert(d("Debugger Error"),d("Error while fetching breakpoint information."))}).fail(function(){u.alert(d("Debugger Error"),d("Error while fetching breakpoint information."))}),t},setActiveLine:function(e){var t=this,n=m.DirectDebug.editor;e&&t.active_line_no&&n.removeLineClass(t.active_line_no,"wrap","CodeMirror-activeline-background"),!e&&t.active_line_no&&(e=t.active_line_no),0<e&&(t.active_line_no=e,n.addLineClass(t.active_line_no,"wrap","CodeMirror-activeline-background"),n.centerOnLine(t.active_line_no))},start_execution:function(t,e){var n=this,a=s("debugger.start_execution",{trans_id:t,port_num:e});l.ajax({url:a,method:"GET"}).done(function(e){"Success"===e.data.status?n.execute_query(t):"NotConnected"===e.data.status&&u.alert(d("Debugger Error"),d("Error while starting debugging session."))}).fail(function(){u.alert(d("Debugger Error"),d("Error while starting debugging session."))})},execute_query:function(t){var n=this,e=s("debugger.execute_query",{trans_id:t,query_type:"wait_for_breakpoint"});l.ajax({url:e,method:"GET"}).done(function(e){"Success"===e.data.status?(null!=e.data.result[0].src&&null!=e.data.result[0].linenumber&&(m.DirectDebug.editor.setValue(e.data.result[0].src),n.setActiveLine(e.data.result[0].linenumber-2)),n.GetStackInformation(t),m.DirectDebug.debug_type&&n.poll_end_execution_result(t)):"NotConnected"===e.data.status&&u.alert(d("Debugger Error"),d("Error while executing requested debugging information."))}).fail(function(){u.alert(d("Debugger Error"),d("Error while executing requested debugging information."))})},GetLocalVariables:function(t){var n=this,e=s("debugger.execute_query",{trans_id:t,query_type:"get_variables"});l.ajax({url:e,method:"GET"}).done(function(e){"Success"===e.data.status?(n.AddLocalVariables(e.data.result),n.AddParameters(e.data.result),m.DirectDebug.debug_restarted&&(m.DirectDebug.debug_type&&n.poll_end_execution_result(t),m.DirectDebug.debug_restarted=!1)):"NotConnected"===e.data.status&&u.alert(d("Debugger Error"),d("Error while fetching variable information."))}).fail(function(){u.alert(d("Debugger Error"),d("Error while fetching variable information."))})},GetStackInformation:function(e){var t=this,n=s("debugger.execute_query",{trans_id:e,query_type:"get_stack_info"});l.ajax({url:n,method:"GET"}).done(function(e){"Success"===e.data.status?(t.AddStackInformation(e.data.result),t.GetLocalVariables(m.DirectDebug.trans_id)):"NotConnected"===e.data.status&&u.alert(d("Debugger Error"),d("Error while fetching stack information."))}).fail(function(){u.alert(d("Debugger Error"),d("Error while fetching stack information."))})},poll_result:function(t){var n=this;if(m.DirectDebug.is_polling_required){var e,a=s("debugger.poll_result",{trans_id:t});e=m.DirectDebug.polling_timeout_idle?1e3:200,setTimeout(function(){l.ajax({url:a,method:"GET",beforeSend:function(e){e.setRequestHeader(o.csrf_token_header,o.csrf_token),l(".debugger-container").addClass("show_progress")}}).done(function(e){l(".debugger-container").removeClass("show_progress"),"Success"===e.data.status?null==e.data.result||0==e.data.result.length?n.poll_result(t):(null!=e.data.result[0].src||null!=e.data.result[0].src?(m.DirectDebug.polling_timeout_idle=!1,m.DirectDebug.docker.finishLoading(50),e.data.result[0].src!=m.DirectDebug.editor.getValue()&&(m.DirectDebug.editor.setValue(e.data.result[0].src),n.UpdateBreakpoint(t)),n.setActiveLine(e.data.result[0].linenumber-2),n.GetStackInformation(t)):m.DirectDebug.debug_type||m.DirectDebug.first_time_indirect_debug?(m.DirectDebug.polling_timeout_idle=!1,m.DirectDebug.docker.finishLoading(50),e.data.result[0].src!=m.DirectDebug.editor.getValue()&&(m.DirectDebug.editor.setValue(e.data.result[0].src),n.UpdateBreakpoint(t)),n.setActiveLine(e.data.result[0].linenumber-2),n.GetStackInformation(t)):(m.DirectDebug.docker.finishLoading(50),n.setActiveLine(-1),n.clear_all_breakpoint(t),n.execute_query(t),m.DirectDebug.first_time_indirect_debug=!0,m.DirectDebug.polling_timeout_idle=!1),setTimeout(function(){n.enable_toolbar_buttons()},500)):"Busy"===e.data.status?(m.DirectDebug.polling_timeout_idle=!0,m.DirectDebug.debug_type||(m.DirectDebug.docker.startLoading(d("Waiting for another session to invoke the target...")),n.disable_toolbar_buttons(),m.DirectDebug.first_time_indirect_debug=!1),n.poll_result(t)):"NotConnected"===e.data.status&&u.alert(d("Debugger Error"),d("Error while polling result."))}).fail(function(){u.alert(d("Debugger Error"),d("Error while polling result."))})},e)}},update_messages:function(e){e=c.escape(e);var t,n="";n=(t=m.DirectDebug.messages_panel.$container.find(".messages").html())?(t+"\n"+e).replace(/(?:\r\n|\r|\n)/g,"<br />").replace(/(<br\ ?\/?>)+/g,"<br />"):e,m.DirectDebug.messages_panel.$container.find(".messages").html(n)},poll_end_execution_result:function(t){var n=this;if(m.DirectDebug.is_polling_required){var e,a=s("debugger.poll_end_execution_result",{trans_id:t});e=m.DirectDebug.polling_timeout_idle?1200:250,setTimeout(function(){l.ajax({url:a,method:"GET"}).done(function(e){"Success"===e.data.status?null==e.data.result?(n.setActiveLine(-1),m.DirectDebug.direct_execution_completed=!0,m.DirectDebug.polling_timeout_idle=!0,u.success(e.info,3),e.data.status_message&&n.update_messages(e.data.status_message),l(".debugger-container").removeClass("show_progress"),setTimeout(function(){n.enable("stop",!1),n.enable("step_over",!1),n.enable("step_into",!1),n.enable("toggle_breakpoint",!1),n.enable("clear_all_breakpoints",!1),n.enable("continue",!0)},500),m.DirectDebug.is_polling_required=!1):null!=e.data.result&&(n.setActiveLine(-1),n.AddResults(e.data.col_info,e.data.result),m.DirectDebug.results_panel.focus(),m.DirectDebug.direct_execution_completed=!0,m.DirectDebug.polling_timeout_idle=!0,u.success(e.info,3),e.data.status_message&&n.update_messages(e.data.status_message),l(".debugger-container").removeClass("show_progress"),setTimeout(function(){n.enable("stop",!1),n.enable("step_over",!1),n.enable("step_into",!1),n.enable("toggle_breakpoint",!1),n.enable("clear_all_breakpoints",!1),n.enable("continue",!0)},500),m.DirectDebug.is_polling_required=!1):"Busy"===e.data.status?(n.poll_end_execution_result(t),e.data.status_message&&n.update_messages(e.data.status_message)):"NotConnected"===e.data.status?u.alert(d("Debugger poll end execution error"),e.data.result):"ERROR"===e.data.status&&(m.DirectDebug.direct_execution_completed=!0,n.setActiveLine(-1),m.DirectDebug.is_user_aborted_debugging||u.error(e.info,3),e.data.status_message&&n.update_messages(e.data.status_message),m.DirectDebug.messages_panel.focus(),l(".debugger-container").removeClass("show_progress"),n.enable("stop",!1),n.enable("step_over",!1),n.enable("step_into",!1),n.enable("toggle_breakpoint",!1),n.enable("clear_all_breakpoints",!1),m.DirectDebug.is_user_aborted_debugging||(n.enable("continue",!0),m.DirectDebug.is_user_aborted_debugging=!1),m.DirectDebug.is_polling_required=!1)}).fail(function(){u.alert(d("Debugger Error"),d("Error while polling result."))})},e)}},Restart:function(a){var r=this,e=s("debugger.restart",{trans_id:a});r.disable_toolbar_buttons(),m.DirectDebug.messages_panel.$container.find(".messages").html(""),l.ajax({url:e}).done(function(e){var t=e.data.restart_debug?1:0;if(m.DirectDebug.polling_timeout_idle=!1,m.DirectDebug.is_polling_required=!0,r.poll_result(a),t&&(m.DirectDebug.debug_restarted=!0),e.data.result.require_input)i(e.data.result,t);else{var n=s("debugger.start_listener",{trans_id:a});l.ajax({url:n,method:"GET"}).done(function(){m.DirectDebug.debug_type&&r.poll_end_execution_result(a)}).fail(function(){u.alert(d("Debugger Error"),d("Error while polling result."))})}}).fail(function(e){try{var t=JSON.parse(e.responseText);0==t.success&&u.alert(d("Debugger Error"),t.errormsg)}catch(e){console.warn(e.stack||e)}})},Continue:function(t){var n=this;if(n.disable_toolbar_buttons(),m.DirectDebug.direct_execution_completed&&m.DirectDebug.direct_execution_completed==m.DirectDebug.polling_timeout_idle)n.Restart(t);else{var e=s("debugger.execute_query",{trans_id:t,query_type:"continue"});l.ajax({url:e,method:"GET"}).done(function(e){e.data.status?n.poll_result(t):u.alert(d("Debugger Error"),d("Error while executing continue in debugging session."))}).fail(function(){u.alert(d("Debugger Error"),d("Error while executing continue in debugging session."))})}},Step_over:function(t){var n=this;n.disable_toolbar_buttons();var e=s("debugger.execute_query",{trans_id:t,query_type:"step_over"});l.ajax({url:e,method:"GET"}).done(function(e){e.data.status?n.poll_result(t):u.alert(d("Debugger Error"),d("Error while executing step over in debugging session."))}).fail(function(){u.alert(d("Debugger Error"),d("Error while executing step over in debugging session."))})},Step_into:function(t){var n=this;n.disable_toolbar_buttons();var e=s("debugger.execute_query",{trans_id:t,query_type:"step_into"});l.ajax({url:e,method:"GET"}).done(function(e){e.data.status?n.poll_result(t):u.alert(d("Debugger Error"),d("Error while executing step into in debugging session."))}).fail(function(){u.alert(d("Debugger Error"),d("Error while executing step into in debugging session."))})},Stop:function(e){var t=this;t.disable_toolbar_buttons();var n=s("debugger.execute_query",{trans_id:e,query_type:"abort_target"});l.ajax({url:n,method:"GET"}).done(function(e){e.data.status?(t.setActiveLine(-1),m.DirectDebug.direct_execution_completed=!0,m.DirectDebug.is_user_aborted_debugging=!0,m.DirectDebug.is_polling_required=!1,t.enable("continue",!1),u.success(e.info,3)):"NotConnected"===e.data.status&&u.alert(d("Debugger Error"),d("Error while executing stop in debugging session."))}).fail(function(){u.alert(d("Debugger Error"),d("Error while executing stop in debugging session."))})},toggle_breakpoint:function(e){var n=this;n.disable_toolbar_buttons();var t="";t=null==m.DirectDebug.editor.lineInfo(n.active_line_no).gutterMarkers?s("debugger.set_breakpoint",{trans_id:e,line_no:n.active_line_no+1,set_type:"1"}):s("debugger.set_breakpoint",{trans_id:e,line_no:n.active_line_no+1,set_type:"0"}),l.ajax({url:t,method:"GET"}).done(function(e){var t;e.data.status?(null!=m.DirectDebug.editor.lineInfo(n.active_line_no).gutterMarkers?m.DirectDebug.editor.setGutterMarker(n.active_line_no,"breakpoints",null):m.DirectDebug.editor.setGutterMarker(n.active_line_no,"breakpoints",((t=document.createElement("div")).style.color="#822",t.innerHTML="●",t)),n.enable_toolbar_buttons()):"NotConnected"===e.data.status&&u.alert(d("Debugger Error"),d("Error while toggling breakpoint."))}).fail(function(){u.alert(d("Debugger Error"),d("Error while toggling breakpoint."))})},clear_all_breakpoint:function(e){var a=this,t=a.GetBreakpointInformation(e);if(1!=t.length||-1!=t[0].linenumber){a.disable_toolbar_buttons();for(var r=new Array,n=0;n<t.length;n++)-1!=t[n].linenumber&&r.push(t[n].linenumber);var i=s("debugger.clear_all_breakpoint",{trans_id:e});l.ajax({url:i,method:"POST",data:{breakpoint_list:r.join()}}).done(function(e){if(e.data.status)for(var t=0;t<r.length;t++){var n=m.DirectDebug.editor.lineInfo(r[t]-1);n&&null!=n.gutterMarkers&&m.DirectDebug.editor.setGutterMarker(r[t]-1,"breakpoints",null)}a.enable_toolbar_buttons()}).fail(function(){u.alert(d("Debugger Error"),d("Error while clearing all breakpoint."))})}},AddStackInformation:function(e){var t=this;t.stack_grid&&(t.stack_grid.remove(),t.stack_grid=null);for(var n=p.Model.extend({defaults:{frame_id:0,name:void 0,value:void 0,line_no:void 0}}),a=p.Collection.extend({model:n}),r=[{name:"name",label:d("Name"),type:"text",editable:!1,cell:"string"},{name:"value",label:d("Value"),type:"text",editable:!1,cell:"string"},{name:"line_no",label:d("Line No."),type:"text",editable:!1,cell:"string"}],i=[],o=0;o<e.length;o++)i.push({frame_id:o,name:e[o].targetname,value:e[o].args,line_no:e[o].linenumber});var s=this.stackColl=new a(i);this.stackColl.on("backgrid:row:selected",t.select_frame,t);var l=this.stack_grid=new f.Grid({emptyText:"No data found",columns:r,row:f.Row.extend({events:{click:"rowClick"},rowClick:function(){t.frame_id=this.model.get("frame_id"),this.model.trigger("backgrid:row:selected",this),t.stack_grid.$el.find("td").css("background-color",this.disabledColor),this.$el.find("td").css("background-color",this.highlightColor)}}),collection:s,className:"backgrid table table-bordered table-noouter-border table-bottom-border"});l.render(),m.DirectDebug.stack_pane_panel.$container.find(".stack_pane").append(l.el)},AddResults:function(e,t){this.result_grid&&(this.result_grid.remove(),this.result_grid=null);var n=p.Model.extend({defaults:{name:void 0}}),a=p.Collection.extend({model:n}),r=[];c.size(e)&&c.each(e,function(e){var t={type:"text",editable:!1,cell:"string"};t.name=t.label=e.name,r.push(t)});var i=this.result_grid=new f.Grid({emptyText:"No data found",columns:r,collection:new a(t),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});i.render(),m.DirectDebug.results_panel.$container.find(".debug_results").append(i.el)},AddLocalVariables:function(e){var t=this;t.variable_grid&&(t.variable_grid.remove(),t.variable_grid=null);var n=p.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),a=p.Collection.extend({model:n});a.prototype.on("change",t.deposit_parameter_value,t);var r=[{name:"name",label:d("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:d("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:d("Value"),type:"text",cell:"string"}],i=[];if(0!=e.length)for(var o=0;o<e.length;o++)"L"==e[o].varclass&&i.push({name:e[o].name,type:e[o].dtype,value:e[o].value});var s=this.variable_grid=new f.Grid({emptyText:"No data found",columns:r,collection:new a(i),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});s.collection.on("backgrid:edited",function(e,t,n){g.setFocusToDebuggerEditor(m.DirectDebug.editor,n)}),s.render(),m.DirectDebug.local_variables_panel.$container.find(".local_variables").append(s.el)},AddParameters:function(e){var t=this;t.param_grid&&(t.param_grid.remove(),t.param_grid=null);var n=p.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),a=t.ParametersCollection=p.Collection.extend({model:n});a.prototype.on("change",t.deposit_parameter_value,t);var r=[{name:"name",label:d("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:d("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:d("Value"),type:"text",cell:"string"}],i=[];if(0!=e.length)for(var o=0;o<e.length;o++)"A"==e[o].varclass&&i.push({name:e[o].name,type:e[o].dtype,value:e[o].value});var s=this.param_grid=new f.Grid({emptyText:"No data found",columns:r,collection:new a(i),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});s.collection.on("backgrid:edited",function(e,t,n){g.setFocusToDebuggerEditor(m.DirectDebug.editor,n)}),s.render(),m.DirectDebug.parameters_panel.$container.find(".parameters").append(s.el)},deposit_parameter_value:function(e){var t=this,n=[];n.push({name:e.get("name"),type:e.get("type"),value:e.get("value")});var a=s("debugger.deposit_value",{trans_id:m.DirectDebug.trans_id});l.ajax({url:a,method:"POST",data:{data:JSON.stringify(n)}}).done(function(e){e.data.status&&(t.GetLocalVariables(m.DirectDebug.trans_id),e.data.result?u.success(e.data.info,3):u.error(e.data.info,3))}).fail(function(){u.alert(d("Debugger Error"),d("Error while depositing variable value."))})},select_frame:function(){var t=this,e=s("debugger.select_frame",{trans_id:m.DirectDebug.trans_id,frame_id:t.frame_id});l.ajax({url:e,method:"GET"}).done(function(e){e.data.status&&(m.DirectDebug.editor.setValue(e.data.result[0].src),t.UpdateBreakpoint(m.DirectDebug.trans_id),t.setActiveLine(e.data.result[0].linenumber-2),t.GetLocalVariables(m.DirectDebug.trans_id))}).fail(function(){u.alert(d("Debugger Error"),d("Error while selecting frame."))})}});function v(){}var y=p.View.extend({el:".debugger_main_container",initialize:function(){_.on("pgDebugger:button:state:stop",this.enable_stop,this),_.on("pgDebugger:button:state:step_over",this.enable_step_over,this),_.on("pgDebugger:button:state:step_into",this.enable_step_into,this),_.on("pgDebugger:button:state:continue",this.enable_continue,this),_.on("pgDebugger:button:state:toggle_breakpoint",this.enable_toggle_breakpoint,this),_.on("pgDebugger:button:state:clear_all_breakpoints",this.enable_clear_all_breakpoints,this)},events:{"click .btn-stop":"on_stop","click .btn-clear-breakpoint":"on_clear_all_breakpoint","click .btn-toggle-breakpoint":"on_toggle_breakpoint","click .btn-continue":"on_continue","click .btn-step-over":"on_step_over","click .btn-step-into":"on_step_into",keydown:"keyAction"},enable_stop:function(e){var t=this.$el.find(".btn-stop");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_over:function(e){var t=this.$el.find(".btn-step-over");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_into:function(e){var t=this.$el.find(".btn-step-into");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_continue:function(e){var t=this.$el.find(".btn-continue");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_toggle_breakpoint:function(e){var t=this.$el.find(".btn-toggle-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_clear_all_breakpoints:function(e){var t=this.$el.find(".btn-clear-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},on_stop:function(){_.Stop(m.DirectDebug.trans_id)},on_clear_all_breakpoint:function(){_.clear_all_breakpoint(m.DirectDebug.trans_id)},on_toggle_breakpoint:function(){_.toggle_breakpoint(m.DirectDebug.trans_id)},on_continue:function(){_.Continue(m.DirectDebug.trans_id)},on_step_over:function(){_.Step_over(m.DirectDebug.trans_id)},on_step_into:function(){_.Step_into(m.DirectDebug.trans_id)},keyAction:function(e){var t;t=a.processEventDebugger(this.$el,e,this.preferences,m.DirectDebug.docker),c.isNull(t)||c.isUndefined(t)||""==t||setTimeout(function(){n.Events.trigger("pgadmin:debugger:".concat(t,":focus"))},100)}});return c.extend(v.prototype,{load:function(t,e,n,a){var r=this;if(c.bindAll(m.DirectDebug,"messages"),!this.initialized){var i;this.initialized=!0,this.trans_id=t,this.debug_type=e,this.first_time_indirect_debug=!1,this.direct_execution_completed=!1,this.polling_timeout_idle=!1,this.debug_restarted=!1,this.is_user_aborted_debugging=!1,this.is_polling_required=!0,this.function_name_with_arguments=n,this.layout=a;var o=b.default.pgAdmin.Browser;this.preferences=o.get_preferences_for_module("debugger"),this.docker=new h("#container",{allowContextMenu:!1,allowCollapse:!1,loadingClass:"pg-sp-icon",themePath:s("static",{filename:"css"}),theme:"webcabin.overrides.css"}),this.panels=[],null==t||e?null!=t&&e?(i=s("debugger.start_listener",{trans_id:t}),l.ajax({url:i,method:"GET"}).done(function(e){e.data.status&&r.messages(t)}).fail(function(e){try{var t=JSON.parse(e.responseText);0==t.success&&u.alert(d("Debugger Error"),t.errormsg)}catch(e){u.alert(d("Debugger Error"),d("Error while starting debugging listener."))}})):this.intializePanels():(i=s("debugger.start_listener",{trans_id:t}),l.ajax({url:i,method:"GET"}).done(function(e){e.data.status&&(r.intializePanels(),_.enable_toolbar_buttons(),_.poll_result(t))}).fail(function(e){try{var t=JSON.parse(e.responseText);0==t.success&&u.alert(d("Debugger Error"),t.errormsg)}catch(e){u.alert(d("Debugger Error"),d("Error while starting debugging listener."))}}))}},messages:function(t){var n=this,e=s("debugger.messages",{trans_id:t});l.ajax({url:e,method:"GET"}).done(function(e){"Success"===e.data.status?(n.intializePanels(),_.enable_toolbar_buttons(),_.start_execution(t,e.data.result)):"Busy"===e.data.status?n.messages(t):"NotConnected"===e.data.status&&u.alert(d("Not connected to server or connection with the server has been closed."),e.data.result)}).fail(function(){u.alert(d("Debugger Error"),d("Error while fetching messages information."))})},onBreakPoint:function(e,t,n){var a;if("breakpoints"==n&&!m.DirectDebug.polling_timeout_idle){var r=e.lineInfo(t);null==r.gutterMarkers?_.set_breakpoint(this.trans_id,t+1,1):null==r.gutterMarkers.breakpoints?_.set_breakpoint(this.trans_id,t+1,1):_.set_breakpoint(this.trans_id,t+1,0);var i=r.gutterMarkers;null!=i&&null==r.gutterMarkers.breakpoints&&(i=r.gutterMarkers.breakpoints),e.setGutterMarker(t,"breakpoints",i?null:((a=document.createElement("div")).style.color="#822",a.innerHTML="●",a))}},buildDefaultLayout:function(e){var t=e.addPanel("code",h.DOCK.TOP),n=e.addPanel("parameters",h.DOCK.BOTTOM,t);e.addPanel("local_variables",h.DOCK.STACKED,n,{tabOrientation:h.TAB.TOP}),e.addPanel("messages",h.DOCK.STACKED,n),e.addPanel("results",h.DOCK.STACKED,n),e.addPanel("stack_pane",h.DOCK.STACKED,n)},intializePanels:function(){var i=this;this.registerPanel("code",i.function_name_with_arguments,"100%","50%",function(){var e=new o.Browser.Panel({name:"parameters",title:d("Parameters"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="parameters" class="parameters" tabindex="0"></div>'}),t=new o.Browser.Panel({name:"local_variables",title:d("Local variables"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="local_variables" class="local_variables" tabindex="0"></div>'}),n=new o.Browser.Panel({name:"messages",title:d("Messages"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="messages" class="messages" tabindex="0"></div>'}),a=new o.Browser.Panel({name:"results",title:d("Results"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="debug_results" class="debug_results" tabindex="0"></div>'}),r=new o.Browser.Panel({name:"stack_pane",title:d("Stack"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="stack_pane" class="stack_pane" tabindex="0"></div>'});e.load(i.docker),t.load(i.docker),n.load(i.docker),a.load(i.docker),r.load(i.docker)}),n.restore_layout(i.docker,i.layout,this.buildDefaultLayout.bind(this)),i.docker.on(h.EVENT.LAYOUT_CHANGED,function(){n.save_current_layout("Debugger/Layout",i.docker)}),i.code_editor_panel=i.docker.findPanels("code")[0],i.parameters_panel=i.docker.findPanels("parameters")[0],i.local_variables_panel=i.docker.findPanels("local_variables")[0],i.messages_panel=i.docker.findPanels("messages")[0],i.results_panel=i.docker.findPanels("results")[0],i.stack_pane_panel=i.docker.findPanels("stack_pane")[0];var e=l('<div id="stack_editor_pane" class="pg-panel-content info"></div>'),t=l('<textarea id="debugger-editor-textarea"></textarea>').appendTo(e);i.code_editor_panel.layout().addItem(e),i.editor=r.fromTextArea(t.get(0),{tabindex:-1,lineNumbers:!0,foldOptions:{widget:"…"},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","breakpoints"],mode:"text/x-pgsql",readOnly:!0,extraKeys:o.Browser.editor_shortcut_keys,indentWithTabs:o.Browser.editor_options.indent_with_tabs,indentUnit:o.Browser.editor_options.tabSize,tabSize:o.Browser.editor_options.tabSize,lineWrapping:o.Browser.editor_options.wrapCode,autoCloseBrackets:o.Browser.editor_options.insert_pair_brackets,matchBrackets:o.Browser.editor_options.brace_matching}),r.on(i.editor,"keydown",function(e,t){27==t.keyCode&&document.activeElement.blur()}),n.Events.on("pgadmin:debugger:code:focus",function(){i.editor.focus()});i.docker.startLoading(d("Loading...")),i.docker.on(h.EVENT.LOADED,function(){i.docker.finishLoading(100),i.docker.off(h.EVENT.LOADED),i.editor.on("gutterClick",i.onBreakPoint.bind(i),i),i.docker.$container&&i.docker.$container.parent().focus();var t=setInterval(function(){try{if(0<b.default.pgAdmin.Browser.preference_version()&&(clearInterval(t),i.reflectPreferences(),i.preferences.debugger_new_browser_tab)){n.bind_beforeunload();var e=setInterval(function(){b.default.pgAdmin?i.reflectPreferences():clearInterval(e)},1e3)}}catch(e){throw clearInterval(t),e}},0)}),this.toolbarView=new y,l(window).on("keydown",function(e){i.toolbarView.keyAction&&i.toolbarView.keyAction(e)}),b.default.pgAdmin.Browser.onPreferencesChange("debugger",function(){i.reflectPreferences()})},reflectPreferences:function(){var e=this,t=b.default.pgAdmin.Browser;e.preferences=t.get_preferences_for_module("debugger"),e.toolbarView.preferences=e.preferences,e.toolbarView.$el.find("#btn-step-into").attr("title",a.shortcut_accesskey_title("Step into",e.preferences.btn_step_into)).attr("accesskey",a.shortcut_key(e.preferences.btn_step_into)),e.toolbarView.$el.find("#btn-step-over").attr("title",a.shortcut_accesskey_title("Step over",e.preferences.btn_step_over)).attr("accesskey",a.shortcut_key(e.preferences.btn_step_over)),e.toolbarView.$el.find("#btn-continue").attr("title",a.shortcut_accesskey_title("Continue/Start",e.preferences.btn_start)).attr("accesskey",a.shortcut_key(e.preferences.btn_start)),e.toolbarView.$el.find("#btn-toggle-breakpoint").attr("title",a.shortcut_accesskey_title("Toggle breakpoint",e.preferences.btn_toggle_breakpoint)).attr("accesskey",a.shortcut_key(e.preferences.btn_toggle_breakpoint)),e.toolbarView.$el.find("#btn-clear-breakpoint").attr("title",a.shortcut_accesskey_title("Clear all breakpoints",e.preferences.btn_clear_breakpoints)).attr("accesskey",a.shortcut_key(e.preferences.btn_clear_breakpoints)),e.toolbarView.$el.find("#btn-stop").attr("title",a.shortcut_accesskey_title("Stop",e.preferences.btn_stop)).attr("accesskey",a.shortcut_key(e.preferences.btn_stop))},registerPanel:function(t,n,a,r,i){var o=this;this.docker.registerPanelType(t,{title:n,isPrivate:!0,onCreate:function(e){(o.panels[t]=e).initSize(a,r),n?e.title(n):e.title(!1),e.closeable(!1),e.layout().addItem(l('<div tabindex="0">',{class:"pg-debugger-panel"})),i&&i.apply(o,[e])}})}}),m.DirectDebug=new v,m.DirectDebug.jquery=l,m.DirectDebug}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";n(7),n(87),Object.defineProperty(t,"__esModule",{value:!0}),t.ModelValidation=void 0;var r=a(n(2)),i=a(n(1)),o=n(263);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.err={},this.errmsg="",this.model=e}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(a,[{key:"validate",value:function(){var e=this.model.get("service");return!this.model.isNew()&&"id"in this.model.sessAttrs?(this.err.id=(0,r.default)("The ID cannot be changed."),this.errmsg=this.err.id):this.model.errorModel.unset("id"),this.checkForEmpty("name",(0,r.default)("Name must be specified.")),a.isEmptyString(e)?(this.setNullValueForEmptyString("service"),this.checkHostAndHostAddress(),this.checkForEmpty("db",(0,r.default)("Maintenance database must be specified.")),this.checkForEmpty("username",(0,r.default)("Username must be specified.")),this.checkForEmpty("port",(0,r.default)("Port must be specified."))):(this.checkForEmpty("db",(0,r.default)("Maintenance database must be specified.")),this.clearHostAddressAndDbErrors()),this.model.get("use_ssh_tunnel")&&(this.checkForEmpty("tunnel_host",(0,r.default)("SSH Tunnel host must be specified.")),this.checkForEmpty("tunnel_port",(0,r.default)("SSH Tunnel port must be specified.")),this.checkForEmpty("tunnel_username",(0,r.default)("SSH Tunnel username must be specified.")),this.model.get("tunnel_authentication")&&this.checkForEmpty("tunnel_identity_file",(0,r.default)("SSH Tunnel identity file must be specified."))),this.model.errorModel.set(this.err),i.default.size(this.err)?this.errmsg:null}},{key:"setNullValueForEmptyString",value:function(e){var t=this.model.get(e);i.default.isUndefined(t)||i.default.isNull(t)||""===String(t).trim()&&this.model.set(e,null)}},{key:"clearHostAddressAndDbErrors",value:function(){var t=this;i.default.each(["host","hostaddr","db","username","port"],function(e){t.setNullValueForEmptyString(e),t.model.errorModel.unset(e)})}},{key:"checkHostAndHostAddress",value:function(){var e=(0,r.default)("Either Host name, Address or Service must be specified.");this.checkForEmpty("host",e)&&this.checkForEmpty("hostaddr",e)?this.errmsg=this.errmsg||e:(this.errmsg=void 0,delete this.err.host,delete this.err.hostaddr),this.checkForValidIp(this.model.get("hostaddr"),(0,r.default)("Host address must be valid IPv4 or IPv6 address."))}},{key:"checkForValidIp",value:function(e,t){if(e){var n=new o.Address6(e).isValid();new o.Address4(e).isValid()||n||(this.err.hostaddr=t,this.errmsg=t)}else this.model.errorModel.unset("hostaddr")}},{key:"checkForEmpty",value:function(e,t){var n=this.model.get(e);return a.isEmptyString(n)?(this.err[e]=t,this.errmsg=this.errmsg||t,!0):(this.model.errorModel.unset(e),!1)}}],[{key:"isEmptyString",value:function(e){return i.default.isUndefined(e)||i.default.isNull(e)||""===String(e).trim()}}]),a}();t.ModelValidation=l},,,function(e,t,n){"use strict";var a,r,i;n(16),n(6),(i=i||{}).dashboard=n(201),(i=i||{}).tools=i.tools||{},i.tools.user_management=n(162),(i=i||{}).browser=i.browser||{},i.browser.object_statistics=n(204),(i=i||{}).browser=i.browser||{},i.browser.dependencies=n(207),(i=i||{}).browser=i.browser||{},i.browser.dependents=n(208),(i=i||{}).browser=i.browser||{},i.browser.object_sql=n(209),(i=i||{}).browser=i.browser||{},i.browser.bgprocess=n(210),(i=i||{}).node=i.node||{},i.node.server_group=n(271),(i=i||{}).node=i.node||{},i.node.server=n(160),(i=i||{}).node=i.node||{},i.node.database=n(272),(i=i||{}).node=i.node||{},i.node.role=n(274),(i=i||{}).node=i.node||{},i.node.cast=n(275),(i=i||{}).node=i.node||{},i.node.tablespace=n(276),(i=i||{}).node=i.node||{},i.node.resource_group=n(277),(i=i||{}).node=i.node||{},i.node.event_trigger=n(278),(i=i||{}).node=i.node||{},i.node.extension=n(279),(i=i||{}).node=i.node||{},i.node.language=n(280),(i=i||{}).node=i.node||{},i.node.foreign_data_wrapper=n(281),(i=i||{}).node=i.node||{},i.node.foreign_server=n(282),(i=i||{}).node=i.node||{},i.node.user_mapping=n(283),(i=i||{}).node=i.node||{},i.node.schema=n(284),(i=i||{}).node=i.node||{},i.node.catalog=n(285),(i=i||{}).node=i.node||{},i.node.catalog_object=n(286),(i=i||{}).node=i.node||{},i.node.collation=n(287),(i=i||{}).node=i.node||{},i.node.domain=n(288),(i=i||{}).node=i.node||{},i.node.domain_constraints=n(289),(i=i||{}).node=i.node||{},i.node.foreign_table=n(290),(i=i||{}).node=i.node||{},i.node.fts_configuration=n(291),(i=i||{}).node=i.node||{},i.node.fts_dictionary=n(292),(i=i||{}).node=i.node||{},i.node.fts_parser=n(293),(i=i||{}).node=i.node||{},i.node.fts_template=n(294),(i=i||{}).node=i.node||{},i.node.function=n(211),(i=i||{}).node=i.node||{},i.node.procedure=n(295),(i=i||{}).node=i.node||{},i.node.edbfunc=n(212),(i=i||{}).node=i.node||{},i.node.edbproc=n(296),(i=i||{}).node=i.node||{},i.node.edbvar=n(297),(i=i||{}).node=i.node||{},i.node.trigger_function=n(298),(i=i||{}).node=i.node||{},i.node.package=n(299),(i=i||{}).node=i.node||{},i.node.sequence=n(300),(i=i||{}).node=i.node||{},i.node.synonym=n(301),(i=i||{}).node=i.node||{},i.node.type=n(302),(i=i||{}).node=i.node||{},i.node.rule=n(213),(i=i||{}).node=i.node||{},i.node.index=n(303),(i=i||{}).node=i.node||{},i.node.trigger=n(304),(i=i||{}).node=i.node||{},i.node.catalog_object_column=n(305),(i=i||{}).node=i.node||{},i.node.view=n(306),(i=i||{}).node=i.node||{},i.node.mview=n(307),(i=i||{}).node=i.node||{},i.node.table=n(308),(i=i||{}).node=i.node||{},i.node.partition=n(311),(i=i||{}).node=i.node||{},i.node.compound_trigger=n(312),a=[n(2),n(5),n(0),n(1),n(14),n(3),n(84),n(69),n(15),n(216),n(217),n(121),n(88),n(25),n(59)],void 0===(r=function(o,b,h,m,a,s,e,t,n,r,i,l,_,d){var v=window.wcDocker,y=s.Browser;return s.DataGrid||(s.DataGrid=m.extend({init:function(){if(!this.initialized){this.initialized=!0,this.title_index=1;var e=this,t=setInterval(function(){0<y.preference_version()&&(e.preferences=y.get_preferences_for_module("sqleditor"),clearInterval(t))},0);y.onPreferencesChange("sqleditor",function(){e.preferences=y.get_preferences_for_module("sqleditor")});for(var n=["table","view","mview","foreign_table","catalog_object","partition"],a=function(e){var t=!m.isUndefined(e)&&!m.isNull(e)&&-1!==m.indexOf(n,e._type);return l.enable(o("View Data"),t),l.enable(o("Filtered Rows"),t),t},r=[{name:"query_tool",module:this,applies:["tools"],callback:"show_query_tool",enable:function(e){var t=!(m.isUndefined(e)||m.isNull(e)||-1!=m.indexOf(s.unsupported_nodes,e._type)||("database"!=e._type||!e.allowConn)&&"database"==e._type);return l.enable(o("Query Tool"),t),t},priority:1,label:o("Query Tool"),icon:"pg-font-icon icon-query-tool"}],i=0;i<n.length;i++)r.push({name:"view_all_rows_context_"+n[i],node:n[i],module:this,data:{mnuid:3},applies:["context","object"],callback:"show_data_grid",enable:a,category:"view_data",priority:101,label:o("All Rows")},{name:"view_first_100_rows_context_"+n[i],node:n[i],module:this,data:{mnuid:1},applies:["context","object"],callback:"show_data_grid",enable:a,category:"view_data",priority:102,label:o("First 100 Rows")},{name:"view_last_100_rows_context_"+n[i],node:n[i],module:this,data:{mnuid:2},applies:["context","object"],callback:"show_data_grid",enable:a,category:"view_data",priority:103,label:o("Last 100 Rows")},{name:"view_filtered_rows_context_"+n[i],node:n[i],module:this,data:{mnuid:4},applies:["context","object"],callback:"show_filtered_row",enable:a,category:"view_data",priority:104,label:o("Filtered Rows...")});s.Browser.add_menu_category("view_data",o("View/Edit Data"),100,""),s.Browser.add_menus(r),new s.Browser.Frame({name:"frm_datagrid",showTitle:!0,isCloseable:!0,isPrivate:!0,url:"about:blank"}).load(y.docker),this.on("pgadmin-datagrid:transaction:created",function(e){this.launch_grid(e)})}},show_data_grid:function(e,t){var n=d.getRandomInt(1,9999999);r.showDataGrid(this,y,a,e,t,n)},show_filtered_row:function(e,t){var n=d.getRandomInt(1,9999999);r.showDataGrid(this,y,a,e,t,n,!0,this.preferences)},show_query_tool:function(e,t){var n=d.getRandomInt(1,9999999);i.showQueryTool(this,y,a,e,t,n)},launch_grid:function(e,t,n,a,r,i){var o,s,l,d=4<arguments.length&&void 0!==r?r:null,c=5<arguments.length&&void 0!==i?i:null,u='\n          <form id="queryToolForm" action="'.concat(t,'" method="post">\n            <input id="title" name="title" hidden />');if(d&&(u+='<input name="query_url" value="'.concat(d,'" hidden />')),c&&(u+='<textarea name="sql_filter" hidden>'.concat(c,"</textarea>")),u+='\n          </form>\n            <script>\n              document.getElementById("title").value = "'.concat(m.escape(a),'";\n              document.getElementById("queryToolForm").submit();\n            <\/script>\n          '),this.preferences.new_browser_tab){var p=window.open("","_blank");p.document.write(u),p.document.title=a}else{var f=y.docker.findPanels("properties"),g=y.docker.addPanel("frm_datagrid",v.DOCK.STACKED,f[0]);_.setQueryToolDockerTitle(g,n,m.unescape(a)),g.focus(),g.on(v.EVENT.CLOSED,function(){h.ajax({url:b("datagrid.close",{trans_id:e}),method:"DELETE"})});o=g,s=h('<div class="pg-sp-container">\n                    <div class="pg-sp-content">\n                        <div class="row">\n                            <div class="col-12 pg-sp-icon"></div>\n                        </div>\n                    </div>\n                </div>').appendTo(h(o).data("embeddedFrame").$container),l=setInterval(function(){if(h(o).data("frameInitialized")){clearInterval(l);var e=h(o).data("embeddedFrame");e&&(e.onLoaded(function(){s.remove()}),e.openHTML(u))}},100)}}},n.Events)),s.DataGrid}.apply(t,a))||(e.exports=r)},function(e,t,a){"use strict";var n,r;function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a(21),a(36),a(53),a(10),a(58),a(23),a(40),a(18),a(11),a(75),a(7),a(32),a(76),a(48),a(269),a(37),a(4),a(65),a(63),a(6),n=[a(5),a(2),a,a(0),a(1),a(3),a(15),a(56),a(202),a(14),a(13),a(203),a(25),a(41),a(9),a(146),a(59)],void 0===(r=function(f,g,e,b,h,m,l,d,o,c,_,u,p,s){m.Browser=m.Browser||{};var v=m.Browser;if(!m.Dashboard){var y,w,x=!0,k="",C="",D=!1,S=!1,j=!1,N=d.Extension.DeleteCell.extend({render:function(){this.$el.empty();var t=this;return"cancel"===t.column.get("cell_action")?this.$el.html("<i class='fa fa-stop' data-toggle='tooltip' title='"+g("Cancel the active query")+"' aria-label='"+g("Cancel the active query")+"'></i>"):this.$el.html("<i class='fa fa-times-circle text-danger' data-toggle='tooltip' title='"+g("Terminate the session")+"' aria-label='"+g("Terminate the session")+"'></i>"),this.$el.attr("tabindex",0),this.$el.on("keydown",function(e){32==e.keyCode&&t.$el.click()}),this.delegateEvents(),this},deleteRow:function(e){var t,n,a,r,i,o=this,s=o.column.get("cell_action");if(e.preventDefault(),d.callByNeed(o.column.get("canDeleteRow"),o.column,o.model)){i="cancel"===s?(t=g("Cancel Active Query?"),n=g("Are you sure you wish to cancel the active query?"),a=g("Active query cancelled successfully."),r=g("An error occurred whilst cancelling the active query."),k+o.model.get("pid")):(t=g("Terminate Session?"),n=g("Are you sure you wish to terminate the session?"),a=g("Session terminated successfully."),r=g("An error occurred whilst terminating the active query."),C+o.model.get("pid")),c.confirm(t,n,function(){b.ajax({url:i,type:"DELETE"}).done(function(e){e==g("Success")?(c.success(a),b("#btn_refresh").trigger("click")):c.error(r)}).fail(function(e,t,n){c.pgRespErrorNotify(e,n)})},function(){return!0})}}}),T=d.Extension.ObjectCell.extend({enterEditMode:function(){this.model.trigger("enteringEditMode",[this]),d.Cell.prototype.enterEditMode.apply(this,arguments),this.delegateEvents(),d.callByNeed(this.column.editable(),this.column,this.model)&&(this.$el.html("<i class='fa fa-caret-down subnode-edit-in-process'></i>"),this.model.trigger("pg-sub-node:opened",this.model,this))},render:function(){return this.$el.empty(),this.$el.html("<i class='fa fa-caret-right' data-toggle='tooltip' title='"+g("View the active session details")+"' aria-label='"+g("View the active session details")+"'></i>"),this.delegateEvents(),this.grabFocus&&this.$el.trigger("focus"),this}}),E=l.Model.extend({defaults:{version:null},schema:[{id:"backend_type",label:g("Backend type"),type:"text",editable:!0,disabled:!0,group:g("Details"),visible:function(){return 1e5<=this.version}},{id:"query_start",label:g("Query started at"),type:"text",editable:!1,disabled:!0,group:g("Details")},{id:"state_change",label:g("Last state changed at"),type:"text",editable:!0,disabled:!0,group:g("Details")},{id:"query",label:g("SQL"),type:"text",editable:!0,disabled:!0,control:_.SqlFieldControl,group:g("Details")}]});return m.Dashboard={init:function(){if(!this.initialized){this.initialized=!0,this.sid=this.did=-1,this.version=-1;var e=this.object_selected.bind(this),t=this.object_disconnected.bind(this);v.Events.on("pgadmin-browser:tree:selected",e),v.Events.on("pgadmin:server:disconnect",t);var a=f("dashboard.index");this.chart_store={},this.charts_poller_int_id=-1;var n=v.panels.dashboard.panel;if(n){var r=n.layout().scene().find(".pg-panel-content");if(r){b(r).html('<div class="alert alert-info pg-panel-message" role="alert">'+g("Loading dashboard...")+"</div>"),function n(){b.ajax({url:a,type:"GET",dataType:"html"}).done(function(e){b(r).html(e)}).fail(function(e,t){c.pgNotifier(t,e,g("An error occurred whilst loading the dashboard."),function(e){"CRYPTKEY_SET"===e?n():b(r).html('<div class="alert alert-danger pg-panel-message" role="alert">'+g("An error occurred whilst loading the dashboard.")+"</div>")})})}(),b(n).data("sid",-1),b(n).data("did",-1)}}}},object_disconnected:function(){var e=v.tree.selected(),t=e&&v.tree.itemData(e);0!=e.length&&this.object_selected(e,t,v.Nodes[t._type])},object_selected:function(e,t,n){var a=this;if(!1===x)h.isUndefined(t.connected)||!0===t.connected||a.clearChartFromStore();else if(t&&t._type){var r=n.getTreeNodeHierarchy(e),i=u.url(t,e,r);if(null===i){i=f("dashboard.index"),a.version=r.server&&r.server.version||0,k=i+"cancel_query/",C=i+"terminate_session/";var o=r.server;w=o&&o.db||null,o&&o.user&&o.user.is_superuser?D=!0:(D=!1,y=o&&o.user?o.user.name:null),"database"in r?(a.sid=r.server._id,a.did=r.database._id,j=!(S=!1),i+=a.sid+"/"+a.did,k+=a.sid+"/"+a.did+"/",C+=a.sid+"/"+a.did+"/"):"server"in r?(a.sid=r.server._id,a.did=-1,j=!(S=!0),i+=a.sid,k+=a.sid+"/",C+=a.sid+"/"):S=j=!1}else S=j=!1;var s=v.panels.dashboard.panel;if(s){var l=s.layout().scene().find(".pg-panel-content");if(l){if(t.connected||h.isUndefined(t.connected)){if(i!==b(s).data("dashboard_url")||i===b(s).data("dashboard_url")&&0==b(s).data("server_status")){b(l).empty(),a.clearChartFromStore();b(l).html('<div class="alert alert-info pg-panel-message" role="alert">'+g("Loading dashboard...")+"</div>"),function n(){b.ajax({url:i,type:"GET",dataType:"html"}).done(function(e){b(l).html(e),a.init_dashboard()}).fail(function(e,t){c.pgNotifier(t,e,g("An error occurred whilst loading the dashboard."),function(e){"CRYPTKEY_SET"===e?n():b(l).html('<div class="alert alert-danger pg-panel-message" role="alert">'+g("An error occurred whilst loading the dashboard.")+"</div>")})})}(),b(s).data("server_status",!0)}}else b(l).empty(),h.isUndefined(t.connected)||!0===t.connected||a.clearChartFromStore(),b(l).html('<div class="alert alert-info pg-panel-message" role="alert">'+g("Please connect to the selected server to view the dashboard.")+"</div>"),b(s).data("server_status",!1);b(s).data("dashboard_url",i)}}}},renderCharts:function(e){function a(e,t){return"Seconds ago: ".concat(parseInt(t.x*e),"</br>\n                  Value: ").concat(t.y)}var r=this,i=p.getEpoch();r.stopChartsPoller(),e.map(function(e){if(r.chart_store[e.chart_name]&&r.old_preferences[e.refresh_pref_name]!=r.preferences[e.refresh_pref_name]&&r.clearChartFromStore(e.chart_name),r.chart_store[e.chart_name]){var t=r.chart_store[e.chart_name].chart_obj;t.setOptions(e.options,!1),t.setTooltipFormatter(a.bind(null,r.preferences[e.refresh_pref_name]))}if(!r.chart_store[e.chart_name]){var n=new o.Chart(e.container,e.options);n.setTooltipFormatter(a.bind(null,r.preferences[e.refresh_pref_name])),n.setOtherData("counter",e.counter),r.chart_store[e.chart_name]={chart_obj:n,refresh_on:i,refresh_rate:r.preferences[e.refresh_pref_name]}}}),r.startChartsPoller(r.chart_store,r.sid,r.did)},getStatsUrl:function(e,t,n){var a=0<arguments.length&&void 0!==e?e:-1,r=1<arguments.length&&void 0!==t?t:-1,i=2<arguments.length&&void 0!==n?n:[],o=f("dashboard.dashboard_stats");return o+="/"+a,o+=0<r?"/"+r:"",o+="?chart_names="+i.join(",")},updateChart:function(e,a){var r=e.getOtherData("dataset")||[],i=e.getOtherData("counter_prev_data")||a,o=e.getOtherData("counter")||!1;if(0==r.length)for(var t in a)r.push({data:[[0,o?a[t]-i[t]:a[t]]],label:t});else Object.keys(a).map(function(e,t){if(o){if(h.isUndefined(i))return;r[t].data.unshift([0,a[e]-i[e]])}else r[t].data.unshift([0,a[e]]);for(var n=0;n<r[t].data.length;n++)r[t].data[n][0]=n}),i=a;for(var n=0;n<r.length;n++)101<r[n].data.length&&r[n].data.pop();e.setOtherData("dataset",r),e.setOtherData("counter_prev_data",i),e.isInPage()&&e.isVisible()&&e.draw(r)},stopChartsPoller:function(){clearInterval(this.charts_poller_int_id)},startChartsPoller:function(i,r,o){var s=this,e=p.getGCD(Object.values(i).map(function(e){return e.refresh_rate})),l=0,d=0;s.stopChartsPoller();function t(){var e=p.getEpoch(),t=[];for(var n in i)i[n].refresh_on<=e&&(i[n].refresh_on=e+i[n].refresh_rate,t.push(n));if(0==t.length||0<l||3<=d)l--;else{var a=s.getStatsUrl(r,o,t);d++,b.ajax({url:a,type:"GET"}).done(function(e){for(var t in e){var n=i[t].chart_obj;b(n.getContainer()).removeClass("graph-error"),s.updateChart(n,e[t])}}).fail(function(e){var t="",n="info";for(var a in 0===e.readyState?t=g("Not connected to the server or the connection to the server has been closed."):(t=JSON.parse(e.responseText).errormsg,428===e.status?(h.isUndefined(t)||h.isNull(t))&&(t=g("Please connect to the selected server to view the graph.")):(t=g("An error occurred whilst rendering the graph."),n="danger")),i){var r=i[a].chart_obj;b(r.getContainer()).addClass("graph-error"),b(r.getContainer()).html('<div class="alert alert-'+n+' pg-panel-message" role="alert">'+t+"</div>")}}).always(function(){l=0,d--}),l=3}}t(),s.charts_poller_int_id=setInterval(t,1e3*e)},add_new_server:function(){if(v&&v.tree){for(var e=0!=v.tree.selected().length?v.tree.selected():v.tree.first(null,!1),t=a(160),n=v.tree.itemData(e);n&&"server_group"!=n._type;)e=v.tree.next(e),n=v.tree.itemData(e);if(!n)return;t&&t.callbacks.show_obj_properties.apply(t,[{action:"create"},e])}},render_grid:function(e,t,n){var a=l.Model.extend({}),r=t+this.sid;-1!=this.did&&(r+="/"+this.did);var i=new(l.Collection.extend({model:a,url:r,mode:"client"})),o=new d.Grid({emptyText:"No data found",columns:n,collection:i,className:"backgrid presentation table table-bordered table-noouter-border table-hover"});b(e).empty(),b(e).append(o.render().el);var s=new d.Extension.ClientSideFilter({collection:i});s.setCustomSearchBox(b("#txtGridSearch")),b(e).data("data",i),b(e).data("grid",o),b(e).data("filter",s)},render_grid_data:function(r){var i=b(r).data("data"),e=b(r).data("grid"),o=b(r).data("filter");if(h.isUndefined(i))return null;i.fetch({reset:!0,success:function(){b(r).hasClass("grid-error")&&(b(r).removeClass("grid-error"),b(r).html(e.render().el),b(o.el).show()),o.search()},error:function(e,t){var n="",a="info";0===t.readyState?n=g("Not connected to the server or the connection to the server has been closed."):(n=JSON.parse(t.responseText).errormsg,428===t.status?(h.isUndefined(n)||h.isNull(n))&&(n=g("Please connect to the selected server to view the table.")):(n=g("An error occurred whilst rendering the table."),a="danger")),b(r).hasClass("grid-error")||(b(o.el).hide(),b(r).addClass("grid-error")),b(r).html('<div class="alert alert-'+a+' pg-panel-message" role="alert">'+n+"</div>"),setTimeout(function(){m.Dashboard.render_grid_data(r,i)},5e3)}})},clearChartFromStore:function(e){var n=this;e?delete n.chart_store[e]:(n.stopChartsPoller(),h.each(n.chart_store,function(e,t){delete n.chart_store[t]}))},init_dashboard:function(){var e=this,t=setInterval(function(){try{0<s.default.pgAdmin.Browser.preference_version()&&(clearInterval(t),e.reflectPreferences())}catch(e){throw clearInterval(t),e}},0);v.onPreferencesChange("dashboards",function(){e.reflectPreferences()})},reflectPreferences:function(){var e=this;if(e.preferences?(e.old_preferences=e.preferences,e.preferences=s.default.pgAdmin.Browser.get_preferences_for_module("dashboards")):(e.preferences=s.default.pgAdmin.Browser.get_preferences_for_module("dashboards"),e.old_preferences=e.preferences),S||j){var t=b(".dashboard-container").find("#graph-sessions")[0],n=b(".dashboard-container").find("#graph-tps")[0],a=b(".dashboard-container").find("#graph-ti")[0],r=b(".dashboard-container").find("#graph-to")[0],i=b(".dashboard-container").find("#graph-bio")[0],o={parseFloat:!1,xaxis:{min:100,max:0,autoscale:0},yaxis:{autoscale:1}};e.preferences.graph_data_points&&(o=P({},o,{},{points:{show:!0,radius:1,hitRadius:3}})),e.preferences.graph_mouse_track&&(o=P({},o,{},{mouse:{track:!0,position:"sw"}})),e.preferences.show_graphs&&b("#dashboard-graphs").hasClass("dashboard-hidden")?b("#dashboard-graphs").removeClass("dashboard-hidden"):e.preferences.show_graphs||(b("#dashboard-graphs").addClass("dashboard-hidden"),e.clearChartFromStore()),e.preferences.show_activity&&b("#dashboard-activity").hasClass("dashboard-hidden")?b("#dashboard-activity").removeClass("dashboard-hidden"):e.preferences.show_activity||b("#dashboard-activity").addClass("dashboard-hidden"),e.preferences.show_graphs&&m.Dashboard.renderCharts([{chart_name:"session_stats",container:t,options:o,counter:!1,refresh_pref_name:"session_stats_refresh"},{chart_name:"tps_stats",container:n,options:o,counter:!0,refresh_pref_name:"tps_stats_refresh"},{chart_name:"ti_stats",container:a,options:o,counter:!0,refresh_pref_name:"ti_stats_refresh"},{chart_name:"to_stats",container:r,options:o,counter:!0,refresh_pref_name:"to_stats_refresh"},{chart_name:"bio_stats",container:i,options:o,counter:!0,refresh_pref_name:"bio_stats_refresh"}]),e.preferences.show_graphs||e.preferences.show_activity?b("#dashboard-none-show").addClass("dashboard-hidden"):b("#dashboard-none-show").removeClass("dashboard-hidden"),S?e.reflectPreferencesServer():j&&e.reflectPreferencesDatabase()}},reflectPreferencesServer:function(){var t=this,e=b(".dashboard-container"),n=e.find("#server_activity").get(0),a=e.find("#server_locks").get(0),r=e.find("#server_prepared").get(0),i=e.find("#server_config").get(0),o={tab_server_activity:n,tab_server_locks:a,tab_server_prepared:r,tab_server_config:i};if(t.preferences.show_activity){var s=[{name:"pid",label:g("PID"),editable:!1,cell:"string"},{name:"datname",label:g("Database"),editable:!1,cell:"string"},{name:"usename",label:g("User"),editable:!1,cell:"string"},{name:"application_name",label:g("Application"),editable:!1,cell:"string"},{name:"client_addr",label:g("Client"),editable:!1,cell:"string"},{name:"backend_start",label:g("Backend start"),editable:!1,cell:"string"},{name:"state",label:g("State"),editable:!1,cell:"string"}];s=t.version<90600?s.concat([{name:"waiting",label:g("Waiting?"),editable:!1,cell:"string"}]):s.concat([{name:"wait_event",label:g("Wait event"),editable:!1,cell:"string"},{name:"blocking_pids",label:g("Blocking PIDs"),editable:!1,cell:"string"}]);var l=new E,d=_.generateViewSchema(null,l,"create",null,null,!0);h.each(d[0].fields,function(e){e.version=t.version}),s.unshift({name:"pg-backform-expand",label:"",cell:T,cell_priority:-1,postgres_version:t.version,schema:d}),s.unshift({name:"pg-backform-delete",label:"",cell:N,cell_action:"cancel",editable:!1,cell_priority:-1,canDeleteRow:m.Dashboard.can_take_action,postgres_version:t.version}),s.unshift({name:"pg-backform-delete",label:"",cell:N,cell_action:"terminate",editable:!1,cell_priority:-1,canDeleteRow:m.Dashboard.can_take_action,postgres_version:t.version});var c=[{name:"pid",label:g("PID"),editable:!1,cell:"string"},{name:"datname",label:g("Database"),editable:!1,cell:"string"},{name:"locktype",label:g("Lock type"),editable:!1,cell:"string"},{name:"relation",label:g("Target relation"),editable:!1,cell:"string"},{name:"page",label:g("Page"),editable:!1,cell:"string"},{name:"tuple",label:g("Tuple"),editable:!1,cell:"string"},{name:"virtualxid",label:g("vXID (target)"),editable:!1,cell:"string"},{name:"transactionid",label:g("XID (target)"),editable:!1,cell:"string"},{name:"classid",label:g("Class"),editable:!1,cell:"string"},{name:"objid",label:g("Object ID"),editable:!1,cell:"string"},{name:"virtualtransaction",label:g("vXID (owner)"),editable:!1,cell:"string"},{name:"mode",label:g("Mode"),editable:!1,cell:"string"},{name:"granted",label:g("Granted?"),editable:!1,cell:"string"}],u=[{name:"git",label:g("Name"),editable:!1,cell:"string"},{name:"database",label:g("Database"),editable:!1,cell:"string"},{name:"Owner",label:g("Owner"),editable:!1,cell:"string"},{name:"transaction",label:g("XID"),editable:!1,cell:"string"},{name:"prepared",label:g("Prepared at"),editable:!1,cell:"string"}],p=[{name:"name",label:g("Name"),editable:!1,cell:"string"},{name:"category",label:g("Category"),editable:!1,cell:"string"},{name:"setting",label:g("Setting"),editable:!1,cell:"string"},{name:"unit",label:g("Unit"),editable:!1,cell:"string"},{name:"short_desc",label:g("Description"),editable:!1,cell:"string"}];b(n).addClass("pg-el-container"),b(n).attr("el","sm"),m.Dashboard.render_grid(n,f("dashboard.activity"),s),m.Dashboard.render_grid(a,f("dashboard.locks"),c),m.Dashboard.render_grid(r,f("dashboard.prepared"),u),m.Dashboard.render_grid(i,f("dashboard.config"),p),m.Dashboard.render_grid_data(n),b('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t=o[b(e.relatedTarget).attr("aria-controls")];b(t).data("filtertext",b("#txtGridSearch").val());var n=o[b(e.target).attr("aria-controls")];b("#txtGridSearch").val(b(n).data("filtertext")),m.Dashboard.render_grid_data(n)}),b("#btn_refresh").off("click").on("click",function(){var e=o[b("#dashboard-activity .nav-tabs .active").attr("aria-controls")];m.Dashboard.render_grid_data(e)})}},reflectPreferencesDatabase:function(){var t=this,e=document.getElementById("database_activity"),n=document.getElementById("database_locks"),a=document.getElementById("database_prepared"),r={tab_database_activity:e,tab_database_locks:n,tab_database_prepared:a};if(t.preferences.show_activity){var i=[{name:"pid",label:g("PID"),editable:!1,cell:"string"},{name:"usename",label:g("User"),editable:!1,cell:"string"},{name:"application_name",label:g("Application"),editable:!1,cell:"string"},{name:"client_addr",label:g("Client"),editable:!1,cell:"string"},{name:"backend_start",label:g("Backend start"),editable:!1,cell:"string"},{name:"state",label:g("State"),editable:!1,cell:"string"}];i=t.version<90600?i.concat([{name:"waiting",label:g("Waiting?"),editable:!1,cell:"string"}]):i.concat([{name:"wait_event",label:g("Wait event"),editable:!1,cell:"string"},{name:"blocking_pids",label:g("Blocking PIDs"),editable:!1,cell:"string"}]);var o=new E,s=_.generateViewSchema(null,o,"create",null,null,!0);h.each(s[0].fields,function(e){e.version=t.version}),i.unshift({name:"pg-backform-expand",label:"",cell:T,cell_priority:-1,postgres_version:t.version,schema:s}),i.unshift({name:"pg-backform-delete",label:"",cell:N,cell_action:"cancel",editable:!1,cell_priority:-1,canDeleteRow:m.Dashboard.can_take_action,postgres_version:t.version}),i.unshift({name:"pg-backform-delete",label:"",cell:N,cell_action:"terminate",editable:!1,cell_priority:-1,canDeleteRow:m.Dashboard.can_take_action,postgres_version:t.version});var l=[{name:"pid",label:g("PID"),editable:!1,cell:"string"},{name:"locktype",label:g("Lock type"),editable:!1,cell:"string"},{name:"relation",label:g("Target relation"),editable:!1,cell:"string"},{name:"page",label:g("Page"),editable:!1,cell:"string"},{name:"tuple",label:g("Tuple"),editable:!1,cell:"string"},{name:"virtualxid",label:g("vXID (target)"),editable:!1,cell:"string"},{name:"transactionid",label:g("XID (target)"),editable:!1,cell:"string"},{name:"classid",label:g("Class"),editable:!1,cell:"string"},{name:"objid",label:g("Object ID"),editable:!1,cell:"string"},{name:"virtualtransaction",label:g("vXID (owner)"),editable:!1,cell:"string"},{name:"mode",label:g("Mode"),editable:!1,cell:"string"},{name:"granted",label:g("Granted?"),editable:!1,cell:"string"}],d=[{name:"git",label:g("Name"),editable:!1,cell:"string"},{name:"Owner",label:g("Owner"),editable:!1,cell:"string"},{name:"transaction",label:g("XID"),editable:!1,cell:"string"},{name:"prepared",label:g("Prepared at"),editable:!1,cell:"string"}];b(e).addClass("pg-el-container"),b(e).attr("el","sm"),m.Dashboard.render_grid(e,f("dashboard.activity"),i),m.Dashboard.render_grid(n,f("dashboard.locks"),l),m.Dashboard.render_grid(a,f("dashboard.prepared"),d),m.Dashboard.render_grid_data(e),b('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t=r[b(e.relatedTarget).attr("aria-controls")];b(t).data("filtertext",b("#txtGridSearch").val());var n=r[b(e.target).attr("aria-controls")];b("#txtGridSearch").val(b(n).data("filtertext")),m.Dashboard.render_grid_data(n)}),b("#btn_refresh").off("click").on("click",function(){var e=r[b("#dashboard-activity .nav-tabs .active").attr("aria-controls")];m.Dashboard.render_grid_data(e)})}},toggleVisibility:function(e,t){x=e,1<arguments.length&&void 0!==t&&t&&this.clearChartFromStore()},can_take_action:function(e){var t=e.collection.where({state:"active"}),n=this.get("postgres_version")||null,a="cancel"===(this.get("cell_action")||null),r=g(a?"cancel":"terminate");return n&&1e5<=n&&!e.get("datname")?(c.info(g("You cannot ")+r+g(" background worker processes.")),!1):w==e.get("datname")&&"active"==e.get("state")&&1==t.length?(c.error(g("You are not allowed to ")+r+g(" the main active session.")),!1):a&&"idle"==e.get("state")?(c.info(g("The session is already in idle state.")),!1):!!D||(!(!y||y!=e.get("usename"))||(c.error(g("Superuser privileges are required to ")+r+g(" another users query.")),!1))}},m.Dashboard}}.apply(t,n))||(e.exports=r)},function(e,t,r){"use strict";function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(n,!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}r(21),r(53),r(58),r(75),r(7),r(32),r(76),r(48),r(63),Object.defineProperty(t,"__esModule",{value:!0}),t.Chart=void 0;var n=function(){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=this;r.e(13).then(function(e){n.chartApi=r(163)}.bind(null,r)).catch(function(e){throw e}),this._container=e,this._options={},this._defaultOptions={legend:{position:"nw",backgroundColor:"#D2E8FF"},lines:{show:!0,lineWidth:2},shadowSize:0,resolution:3,grid:{color:"transparent",tickColor:"#8f8f8f"}},this._dataset=null,this._tooltipFormatter=null,this._otherData={},this.setOptions(t)}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(a,[{key:"getContainer",value:function(){return this._container}},{key:"getContainerDimensions",value:function(){return{height:this._container.clientHeight,width:this._container.clientWidth}}},{key:"getOptions",value:function(){return this._options}},{key:"setOptions",value:function(e,t){var n=!(1<arguments.length&&void 0!==t)||t;this._options=n?i({},this._defaultOptions,{},this._options,{},e):i({},this._defaultOptions,{},e)}},{key:"removeOptions",value:function(e){this._options[e]&&delete this._options[e]}},{key:"getOtherData",value:function(e){if(this._otherData[e])return this._otherData[e]}},{key:"setOtherData",value:function(e,t){this._otherData[e]=t}},{key:"isVisible",value:function(){var e=this.getContainerDimensions();return 0<e.height&&0<e.width}},{key:"isInPage",value:function(){return this._container!==document.body&&document.body.contains(this._container)}},{key:"setTooltipFormatter",value:function(e){var t=this.getOptions();this._tooltipFormatter=e,this._tooltipFormatter&&this.setOptions({mouse:i({},t.mouse,{trackFormatter:this._tooltipFormatter})})}},{key:"draw",value:function(e){this._dataset=e,this._container&&this.chartApi&&this.chartApi.draw(this._container,this._dataset,this._options)}}]),a}();t.Chart=n},function(e,t,n){"use strict";n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.url=function(e,t,r){var n=s.default.treeMenu.findNodeByDomElement(t),i=null;n&&n.anyFamilyMember(function(e){var t=e.getData(),n=s.default.Nodes[t._type],a=n&&n.dashboard;return(0,o.isFunction)(a)&&(a=a.apply(n,[e,t,r])),null!==(i=(0,o.isString)(a)?a:null)});return i};var a,o=n(25),s=(a=n(9))&&a.__esModule?a:{default:a}},function(e,t,n){"use strict";var a,r;n(10),n(16),n(50),n(18),n(11),n(6),a=[n(2),n(1),n(0),n(15),n(3),n(9),n(28),n(47),n(205),n(206)],void 0===(r=function(g,b,h,t,m,_,v,y,s,w){if(_.NodeStatistics)return _.NodeStatistics;if(_.NodeStatistics=_.NodeStatistics||{},_.NodeStatistics.initialized)return _.NodeStatistics;var l=v.SizeFormatter=function(){};b.extend(l.prototype,{fromRaw:function(e){return s(e)},toRaw:function(e){return e}});var e=v.Extension.SwitchCell.extend({defaults:b.extend({},v.Extension.SwitchCell.prototype.defaults)}),d={16:e,20:v.IntegerCell,21:v.IntegerCell,23:v.IntegerCell,700:v.NumberCell,701:v.NumberCell,1700:v.NumberCell,702:v.DatetimeCell,703:v.DatetimeCell,1082:v.DatetimeCell.extend({includeDate:!0,includeTime:!1,includeMilli:!1}),1083:v.DatetimeCell.extend({includeDate:!1,includeTime:!0,includeMilli:!0}),1114:v.DatetimeCell.extend({includeDate:!0,includeTime:!0,includeMilli:!0}),1184:"string",1266:"string"},x=window.wcDocker;return b.extend(e.prototype.defaults.options,{onText:g("True"),offText:g("False"),onColor:"success",offColor:"primary",size:"mini"}),b.extend(_.NodeStatistics,{init:function(){if(!this.initialized){this.initialized=!0,b.bindAll(this,"showStatistics","panelVisibilityChanged","__createMultiLineStatistics","__createSingleLineStatistics","__loadMoreRows"),b.extend(this,{initialized:!0,collection:new t.Collection(null),statistic_columns:[{editable:!1,name:"statistics",label:g("Statistics"),cell:"string",headerCell:v.Extension.CustomHeaderCell,cellHeaderClasses:"width_percent_25"},{editable:!1,name:"value",label:g("Value"),cell:"string"}],panel:_.docker.findPanels("statistics"),columns:null,grid:null});var e=this;_.Events.on("pgadmin-browser:panel-statistics:"+x.EVENT.VISIBILITY_CHANGED,this.panelVisibilityChanged),_.Events.on("pgadmin:browser:node:updated",function(){this.panel&&this.panel.length&&(h(this.panel[0]).data("node-prop",""),this.panelVisibilityChanged(this.panel[0]))},this),0==this.panel.length?_.Events.on("pgadmin-browser:panel-statistics:"+x.EVENT.INIT,function(){e.panel=_.docker.findPanels("statistics"),!e.panel[0].isVisible()&&1==e.panel.length||(_.Events.on("pgadmin-browser:tree:selected",this.showStatistics),_.Events.on("pgadmin-browser:tree:refreshing",this.refreshStatistics,this))}.bind(this)):!e.panel[0].isVisible()&&1==e.panel.length||(_.Events.on("pgadmin-browser:tree:selected",this.showStatistics),_.Events.on("pgadmin-browser:tree:refreshing",this.refreshStatistics,this)),0<e.panel.length&&e.panel[0].isVisible()&&(_.Events.on("pgadmin-browser:tree:selected",this.showStatistics),_.Events.on("pgadmin-browser:tree:refreshing",this.refreshStatistics,this))}},__updateCollection:function(e,n,i,t){var a=this.panel[0].layout().scene().find(".pg-panel-content"),o=a.find(".pg-panel-statistics-message"),s=a.find(".pg-panel-statistics-container"),r=this.panel,l=this,d="",c=t;if(n){d=g("No statistics are available for the selected object.");var u=n.getTreeNodeHierarchy(i),p={node_type:t,url:e};if(b.isEqual(h(r[0]).data("node-prop"),p))return;if(h(r[0]).data("node-prop",p),w.nodeHasStatistics(n,i)){var f;d="";!function r(){h.ajax({url:e,type:"GET",beforeSend:function(e){e.setRequestHeader(m.csrf_token_header,m.csrf_token),f=setTimeout(function(){o.text(g("Retrieving data from the server...")),o.removeClass("d-none"),l.grid&&l.grid.remove()},1e3)}}).done(function(e){if(clearTimeout(f),o.text(""),e.data){var t=l.data=e.data;n.hasCollectiveStatistics||1<t.rows.length?(_.Events.on("pgadmin-browser:panel-statistics:"+x.EVENT.SCROLLED,l.__loadMoreRows),l.__createMultiLineStatistics.call(l,t,n.statsPrettifyFields)):(_.Events.off("pgadmin-browser:panel-statistics:"+x.EVENT.SCROLLED,l.__loadMoreRows),l.__createSingleLineStatistics.call(l,t,n.statsPrettifyFields)),l.grid&&(delete l.grid,l.grid=null),l.grid=new v.Grid({emptyText:"No data found",columns:l.columns,collection:l.collection,className:"backgrid presentation table table-bordered table-noouter-border table-hover"}),l.grid.render(),s.empty(),s.append(l.grid.$el),o.hasClass("d-none")||o.addClass("d-none"),s.removeClass("d-none")}else e.info&&(s.hasClass("d-none")||s.addClass("d-none"),o.text(e.info),o.removeClass("d-none"))}).fail(function(e,t,n){var a=u[c].label;_.Events.trigger("pgadmin:node:retrieval:error","statistics",e,t,n,i),y.pgHandleItemError(e,t,n,{item:i,info:u})||y.pgNotifier(t,e,g("Error retrieving the information - %s",n||a),function(e){"CRYPTKEY_SET"===e?r():console.warn(arguments)}),o.text(g("Failed to retrieve data from the server."))})}()}}""!=d&&(s.hasClass("d-none")||s.addClass("d-none"),o.removeClass("d-none"),o.text(d))},refreshStatistics:function(e,t,n){var a={node_type:t._type,url:n.generate_url(e,"stats",t,!0)};b.isEqual(h(this.panel[0]).data("node-prop"),a)&&(h(this.panel[0]).data("node-prop",""),this.showStatistics(e,t,n))},showStatistics:function(e,t,n){var a=this;n&&n&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(function(){a.__updateCollection.call(a,n.generate_url(e,"stats",t,!0),n,e,t._type)},400))},__createMultiLineStatistics:function(e,t){var n=e.rows,a=e.columns;for(var r in this.columns=[],a){var i=a[r],o=d[i.type_code]||"string";"PID"==i.name&&(o=o.extend({orderSeparator:""}));var s={editable:!1,name:i.name,cell:o};-1!=b.indexOf(t,i.name)&&(s.formatter=l),this.columns.push(s)}this.collection.reset(n.splice(0,50))},__loadMoreRows:function(){var e=h(".pg-panel-statistics-container").closest(".wcFrameCenter")[0];if(e.scrollHeight-10<e.scrollTop+e.offsetHeight){var t=this.data.rows;0<t.length&&this.collection.add(t.splice(0,50))}},__createSingleLineStatistics:function(e,t){var n,a=e.rows[0],r=e.columns,i=[];for(var o in this.columns=this.statistic_columns,r)n=r[o].name,i.push({statistics:n,value:a&&a[n]?-1!=b.indexOf(t,n)?s(a[n]):a[n]:null});this.collection.reset(i)},panelVisibilityChanged:function(e){if(e.isVisible()){var t=_.tree,n=t.selected(),a=n&&t.itemData(n),r=n&&a&&_.Nodes[a._type];_.NodeStatistics.showStatistics.apply(_.NodeStatistics,[n,a,r]),_.Events.on("pgadmin-browser:tree:selected",_.NodeStatistics.showStatistics),_.Events.on("pgadmin-browser:tree:refreshing",_.NodeStatistics.refreshStatistics,this)}else _.Events.off("pgadmin-browser:tree:selected",_.NodeStatistics.showStatistics),_.Events.off("pgadmin-browser:tree:refreshing",_.NodeStatistics.refreshStatistics,this)}}),_.NodeStatistics}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";var a;void 0===(a=function(){return function(e){var t=Math.abs(e),n=0,a=["bytes","kB","MB","GB","TB","PB"];if(t<10240)return t+" "+a[n];for(;n+=1,10239<(t/=1024););return Math.round(t)+" "+a[n]}}.apply(t,[]))||(e.exports=a)},function(e,t,n){"use strict";n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.nodeHasStatistics=function(e,t){if("function"!=typeof e.hasStatistics)return e.hasStatistics;var n=e.getTreeNodeHierarchy(t);return e.hasStatistics(n)}},function(e,t,n){"use strict";var a,r;n(10),n(50),n(4),n(8),n(6),a=[n(2),n(1),n(0),n(15),n(3),n(9),n(14),n(28),n(25)],void 0===(r=function(p,n,f,t,g,b,h,a,r){if(b.NodeDependencies)return b.NodeDependencies;var m=window.wcDocker;return b.NodeDependencies=b.NodeDependencies||{},n.extend(b.NodeDependencies,{init:function(){if(!this.initialized){this.initialized=!0,this.dependenciesPanel=b.docker.findPanels("dependencies")[0],n.bindAll(this,"showDependencies","__loadMoreRows","__appendGridToPanel");var e=t.Model.extend({defaults:{icon:"icon-unknown",type:void 0,name:void 0,field:void 0},parse:function(e){var t=b.Nodes[e.type];return null!=e.icon&&""!=e.icon||(e.icon=t?n.isFunction(t.node_image)?t.node_image.apply(t,[null,null]):t.node_image||"icon-"+e.type:"icon-"+e.type),e.type=r.titleize(e.type.replace(/_/g," "),!0),e}});this.dependenciesCollection=new(t.Collection.extend({model:e}))(null),b.Events.on("pgadmin-browser:tree:selected",this.showDependencies),this.__appendGridToPanel()}},__appendGridToPanel:function(){var e=this.dependenciesPanel.layout().scene().find(".pg-panel-content").find(".pg-panel-dependencies-container"),t=new a.Grid({emptyText:"No data found",columns:[{name:"type",label:p("Type"),cell:a.Cell.extend({render:function(){return a.Cell.prototype.render.apply(this,arguments),this.$el.prepend(f("<i>",{class:"wcTabIcon "+this.model.get("icon")})),this}}),editable:!1},{name:"name",label:p("Name"),cell:"string",editable:!1},{name:"field",label:"",cell:"string",editable:!1}],collection:this.dependenciesCollection,className:"backgrid table presentation table-bordered table-noouter-border table-hover"});return this.dependenciesGrid=t,e.append(t.render().el),!0},showDependencies:function(r,i,o){var s=this,t=p("Please select an object in the tree view."),e=this.dependenciesPanel.layout().scene().find(".pg-panel-content"),l=e.find(".pg-panel-depends-message"),n=e.find(".pg-panel-dependencies-container"),d=o.getTreeNodeHierarchy(r),c=i._type,a=o.generate_url(r,"dependency",i,!0);if(o&&(t=p("No dependency information is available for the selected object."),o.hasDepends)){this.dependenciesGrid.columns.models[2].set({label:p("Restriction")}),l.addClass("d-none"),n.removeClass("d-none");var u="";f.ajax({url:a,type:"GET",beforeSend:function(e){e.setRequestHeader(g.csrf_token_header,g.csrf_token),u=setTimeout(function(){l.text(p("Fetching dependency information from the server...")),l.removeClass("d-none"),t=""},1e3)}}).done(function(e){clearTimeout(u),0<e.length?(l.hasClass("d-none")||l.addClass("d-none"),n.removeClass("d-none"),s.dependenciesData=e,s.dependenciesCollection.reset(s.dependenciesData.splice(0,100),{parse:!0}),b.Events.on("pgadmin-browser:panel-dependencies:"+m.EVENT.SCROLLED,s.__loadMoreRows)):(b.Events.off("pgadmin-browser:panel-dependencies:"+m.EVENT.SCROLLED),s.dependenciesCollection.reset({silent:!0}),l.text(t),l.removeClass("d-none"),n.hasClass("d-none")||n.addClass("d-none"))}).fail(function(e,t,n){var a=d[c].label;b.Events.trigger("pgadmin:node:retrieval:error","depends",e,t,n),h.pgHandleItemError(e,t,n,{item:r,info:d})||h.pgNotifier(t,e,p("Error retrieving data from the server: %s",n||a),function(e){"CRYPTKEY_SET"===e?s.showDependencies(r,i,o):console.warn(arguments)}),l.text(p("Failed to retrieve data from the server."))})}""!=t&&(l.text(t),l.removeClass("d-none"),n.hasClass("d-none")||n.addClass("d-none"))},__loadMoreRows:function(){if(!(this.dependenciesPanel.length<1)){var e=this.dependenciesPanel.$container.find(".pg-panel-dependencies-container").closest(".wcFrameCenter")[0];e.scrollHeight-10<e.scrollTop+e.offsetHeight&&0<this.dependenciesData.length&&this.dependenciesCollection.add(this.dependenciesData.splice(0,100),{parse:!0})}}}),b.NodeDependencies}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";var a,r;n(10),n(50),n(4),n(8),n(6),a=[n(2),n(1),n(0),n(15),n(3),n(9),n(14),n(28),n(25)],void 0===(r=function(p,n,f,t,g,b,h,a,r){if(b.NodeDependents)return b.NodeDependents;var m=window.wcDocker;return b.NodeDependents=b.NodeDependents||{},n.extend(b.NodeDependents,{init:function(){if(!this.initialized){this.initialized=!0,this.dependentsPanel=b.docker.findPanels("dependents")[0],n.bindAll(this,"showDependents","__loadMoreRows","__appendGridToPanel");var e=t.Model.extend({defaults:{icon:"icon-unknown",type:void 0,name:void 0,field:void 0},parse:function(e){var t=b.Nodes[e.type];return null!=e.icon&&""!=e.icon||(e.icon=t?n.isFunction(t.node_image)?t.node_image.apply(t,[null,null]):t.node_image||"icon-"+e.type:"icon-"+e.type),e.type=r.titleize(e.type.replace(/_/g," "),!0),e}});this.dependentCollection=new(t.Collection.extend({model:e}))(null),b.Events.on("pgadmin-browser:tree:selected",this.showDependents),b.Events.on("pgadmin-browser:tree:refreshing",this.refreshDependents,this),this.__appendGridToPanel()}},__appendGridToPanel:function(){var e=this.dependentsPanel.layout().scene().find(".pg-panel-content").find(".pg-panel-dependents-container"),t=new a.Grid({emptyText:"No data found",columns:[{name:"type",label:p("Type"),cell:a.Cell.extend({render:function(){return a.Cell.prototype.render.apply(this,arguments),this.$el.prepend(f("<i>",{class:"wcTabIcon "+this.model.get("icon")})),this}}),editable:!1},{name:"name",label:p("Name"),cell:"string",editable:!1},{name:"field",label:"",cell:"string",editable:!1}],collection:this.dependentCollection,className:"backgrid table presentation table-bordered table-noouter-border table-hover"});return this.dependentGrid=t,e.append(t.render().el),!0},showDependents:function(r,i,o){var s=this,t=p("Please select an object in the tree view."),e=this.dependentsPanel.layout().scene().find(".pg-panel-content"),l=e.find(".pg-panel-depends-message"),n=e.find(".pg-panel-dependents-container"),d=o.getTreeNodeHierarchy(r),c=i._type,a=o.generate_url(r,"dependent",i,!0);if(o&&(t=p("No dependent information is available for the selected object."),o.hasDepends)){"tablespace"==o.type||"role"==o.type?this.dependentGrid.columns.models[2].set({label:p("Database")}):this.dependentGrid.columns.models[2].set({label:p("Restriction")}),l.addClass("d-none"),n.removeClass("d-none");var u="";f.ajax({url:a,type:"GET",beforeSend:function(e){e.setRequestHeader(g.csrf_token_header,g.csrf_token),u=setTimeout(function(){l.text(p("Fetching dependent information from the server...")),l.removeClass("d-none"),t=""},1e3)}}).done(function(e){clearTimeout(u),0<e.length?(l.hasClass("d-none")||l.addClass("d-none"),n.removeClass("d-none"),s.dependentData=e,s.dependentCollection.reset(s.dependentData.splice(0,100),{parse:!0}),b.Events.on("pgadmin-browser:panel-dependents:"+m.EVENT.SCROLLED,s.__loadMoreRows)):(b.Events.off("pgadmin-browser:panel-dependents:"+m.EVENT.SCROLLED),s.dependentCollection.reset({silent:!0}),l.text(t),l.removeClass("d-none"),n.hasClass("d-none")||n.addClass("d-none"))}).fail(function(e,t,n){var a=d[c].label;b.Events.trigger("pgadmin:node:retrieval:error","depends",e,t,n),h.pgHandleItemError(e,t,n,{item:r,info:d})||h.pgNotifier(t,e,p("Error retrieving data from the server: %s",n||a),function(e){"CRYPTKEY_SET"===e?s.showDependents(r,i,o):console.warn(arguments)}),l.text(p("Failed to retrieve data from the server."))})}""!=t&&(l.text(t),l.removeClass("d-none"),n.hasClass("d-none")||n.addClass("d-none"))},__loadMoreRows:function(){if(!(this.dependentsPanel.length<1)){var e=this.dependentsPanel.$container.find(".pg-panel-dependents-container").closest(".wcFrameCenter")[0];e.scrollHeight-10<e.scrollTop+e.offsetHeight&&0<this.dependentData.length&&this.dependentCollection.add(this.dependentData.splice(0,100),{parse:!0})}}}),b.NodeDependents}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";var a,r;n(18),n(6),a=[n(2),n(1),n(0),n(3),n(9),n(14)],void 0===(r=function(c,u,p,f,g,b){if(g.ShowNodeSQL=g.ShowNodeSQL||{},g.ShowNodeSQL.initialized)return g.ShowNodeSQL;var t=window.wcDocker;return u.extend(g.ShowNodeSQL,{init:function(){var e;this.initialized||(this.initialized=!0,u.bindAll(this,"showSQL","sqlPanelVisibilityChanged"),this.sqlPanels=e=g.docker.findPanels("sql"),g.Events.on("pgadmin-browser:panel-sql:"+t.EVENT.VISIBILITY_CHANGED,this.sqlPanelVisibilityChanged),g.Events.on("pgadmin:browser:node:updated",function(){this.sqlPanels&&this.sqlPanels.length&&(p(this.sqlPanels[0]).data("node-prop",""),this.sqlPanelVisibilityChanged(this.sqlPanels[0]))},this),0==e.length?g.Events.on("pgadmin-browser:panel-sql:"+t.EVENT.INIT,function(){!e[0].isVisible()&&1==e.length||(g.Events.on("pgadmin-browser:tree:selected",this.showSQL),g.Events.on("pgadmin-browser:tree:refreshing",this.refreshSQL,this))}.bind(this)):!e[0].isVisible()&&1==e.length||(g.Events.on("pgadmin-browser:tree:selected",this.showSQL),g.Events.on("pgadmin-browser:tree:refreshing",this.refreshSQL,this)))},refreshSQL:function(e,t,n){var a={node_type:t._type,url:n.generate_url(e,"sql",t,!0)};u.isEqual(p(this.sqlPanels[0]).data("node-prop"),a)&&(p(this.sqlPanels[0]).data("node-prop",""),this.showSQL(e,t,n))},showSQL:function(s,r,l){this.timeout&&clearTimeout(this.timeout);var d=this;this.timeout=setTimeout(function(){var e="-- "+c("Please select an object in the tree view.");if(l){e="-- "+c("No SQL could be generated for the selected object.");var i=r._type,t=l.generate_url(s,"sql",r,!0),o=l.getTreeNodeHierarchy(s),n={node_type:i,url:t};if(u.isEqual(p(d.sqlPanels[0]).data("node-prop"),n))return;if(p(d.sqlPanels[0]).data("node-prop",n),l.hasSQL){var a;e="";!function r(){p.ajax({url:t,type:"GET",beforeSend:function(e){e.setRequestHeader(f.csrf_token_header,f.csrf_token),a=setTimeout(function(){f.Browser.editor.setValue(c("Retrieving data from the server..."))},1e3)}}).done(function(e){f.Browser.editor.getValue()!=e&&f.Browser.editor.setValue(e),clearTimeout(a)}).fail(function(e,t,n){var a=o[i].label;g.Events.trigger("pgadmin:node:retrieval:error","sql",e,t,n,s),b.pgHandleItemError(e,t,n,{item:s,info:o})||b.pgNotifier(t,e,c("Error retrieving the information - %s",n||a),function(e){"CRYPTKEY_SET"===e?r():console.warn(arguments)})})}()}}""!=e&&f.Browser.editor.setValue(e)},400)},sqlPanelVisibilityChanged:function(e){if(e.isVisible()){var t=g.tree,n=t.selected(),a=n&&t.itemData(n),r=n&&a&&g.Nodes[a._type];g.ShowNodeSQL.showSQL.apply(g.ShowNodeSQL,[n,a,r]),g.Events.on("pgadmin-browser:tree:selected",g.ShowNodeSQL.showSQL),g.Events.on("pgadmin-browser:tree:refreshing",g.ShowNodeSQL.refreshSQL,this)}else g.Events.off("pgadmin-browser:tree:selected",g.ShowNodeSQL.showSQL),g.Events.off("pgadmin-browser:tree:refreshing",g.ShowNodeSQL.refreshSQL,this)}}),g.ShowNodeSQL}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";var a,r;n(36),n(10),n(23),n(33),n(18),n(12),n(79),n(37),n(46),n(6),a=[n(3),n(2),n(5),n(1),n(0),n(9),n(47)],void 0===(r=function(d,c,t,u,p,f,i){if(f.BackgroundProcessObsorver=f.BackgroundProcessObsorver||{},f.BackgroundProcessObsorver.initialized)return f.BackgroundProcessObsorver;function o(e,t){var n=this;setTimeout(function(){n.initialize.apply(n,[e,t])},1)}var g=window.wcDocker;return u.extend(o.prototype,{success_status_tpl:u.template('\n      <div class="d-flex px-2 py-1 bg-success-light border border-success rounded">\n        <div class="pr-2">\n          <i class="fa fa-check fa-lg text-success pg-bg-status-icon" aria-hidden="true"></i>\n        </div>\n        <div class="text-body mx-auto pg-bg-status-text"><%-status_text%></div>\n      </div>'),failed_status_tpl:u.template('\n      <div class="d-flex px-2 py-1 bg-danger-lighter border border-danger rounded">\n        <div class="pr-2">\n          <i class="fa fa-close fa-lg text-danger pg-bg-status-icon" aria-hidden="true"></i>\n        </div>\n        <div class="text-body mx-auto pg-bg-status-text"><%-status_text%></div>\n      </div>'),other_status_tpl:u.template('\n      <div class="d-flex px-2 py-1 bg-primary-light border border-primary rounded">\n        <div class="pr-2">\n          <i class="fa fa-info fa-lg text-primary pg-bg-status-icon" aria-hidden="true"></i>\n        </div>\n        <div class="text-body mx-auto pg-bg-status-text"><%-status_text%></div>\n      </div>'),initialize:function(e,t){u.extend(this,{details:!1,notify:u.isUndefined(t)||t,curr_status:null,state:0,completed:!1,id:e.id,type_desc:null,desc:null,detailed_desc:null,stime:null,exit_code:null,acknowledge:e.acknowledge,execution_time:null,out:-1,err:-1,lot_more:!1,notifier:null,container:null,panel:null,logs:p("<ol></ol>",{class:"pg-bg-process-logs"})}),this.notify&&(f.Events&&f.Events.on("pgadmin-bgprocess:started:"+this.id,function(e){e.notifier||e.show.apply(e)}),f.Events&&f.Events.on("pgadmin-bgprocess:finished:"+this.id,function(e){e.notifier||e.show.apply(e)}));var n=this;setTimeout(function(){n.update.apply(n,[e])},1)},bgprocess_url:function(e){switch(e){case"status":return this.details&&-1!=this.out&&-1!=this.err?t("bgprocess.detailed_status",{pid:this.id,out:this.out,err:this.err}):t("bgprocess.status",{pid:this.id});case"acknowledge":return t("bgprocess.acknowledge",{pid:this.id});case"stop_process":return t("bgprocess.stop_process",{pid:this.id});default:return t("bgprocess.list")}},update:function(e){var t=this,n=[],a=[];"stime"in e&&(t.stime=new Date(e.stime)),"execution_time"in e&&(t.execution_time=parseFloat(e.execution_time)),"type_desc"in e&&(t.type_desc=e.type_desc),"desc"in e&&(t.desc=e.desc),"details"in e&&(t.detailed_desc=e.details),"exit_code"in e&&(t.exit_code=e.exit_code),"process_state"in e&&(t.state=e.process_state),"out"in e&&(t.out=e.out&&e.out.pos,e.out&&e.out.lines&&(n=e.out.lines)),"err"in e&&(t.err=e.err&&e.err.pos,e.err&&e.err.lines&&(a=e.err.lines)),t.completed=t.completed||"err"in e&&"out"in e&&e.err.done&&e.out.done||!t.details&&!u.isNull(t.exit_code);for(var r=0,i=0,o=[],s=document.createElement("textarea"),l=function(e){return s.textContent=e,s.innerHTML};r<n.length&&i<a.length;)d.natural_sort(n[r][0],a[i][0])<=0?o.push('<li class="pg-bg-res-out">'+l(n[r++][1])+"</li>"):o.push('<li class="pg-bg-res-err">'+l(a[i++][1])+"</li>");for(;r<n.length;)o.push('<li class="pg-bg-res-out">'+l(n[r++][1])+"</li>");for(;i<a.length;)o.push('<li class="pg-bg-res-err">'+l(a[i++][1])+"</li>");o.length&&(t.logs.append(o.join("")),setTimeout(function(){t.logs[0].scrollTop=t.logs[0].scrollHeight})),t.logs_loading&&(t.logs_loading.remove(),t.logs_loading=null),t.stime&&(t.curr_status=t.other_status_tpl({status_text:c("Started")}),2<=t.execution_time&&(t.curr_status=t.other_status_tpl({status_text:c("Running...")})),u.isNull(t.exit_code)||(3===t.state?t.curr_status=t.failed_status_tpl({status_text:c("Terminated by user.")}):0==t.exit_code?t.curr_status=t.success_status_tpl({status_text:c("Successfully completed.")}):t.curr_status=t.failed_status_tpl({status_text:c("Failed (exit code: %s).",String(t.exit_code))})),0==t.state&&t.stime&&(t.state=1,f.Events&&f.Events.trigger("pgadmin-bgprocess:started:"+t.id,t,t)),1!=t.state||u.isNull(t.exit_code)||(t.state=2,f.Events&&f.Events.trigger("pgadmin-bgprocess:finished:"+t.id,t,t)),setTimeout(function(){t.show.apply(t)},10)),t.completed||setTimeout(function(){t.status.apply(t)},1e3)},status:function(){var t=this;p.ajax({typs:"GET",timeout:3e4,url:t.bgprocess_url("status"),cache:!1,async:!0,contentType:"application/json"}).done(function(e){setTimeout(function(){t.update(e)},10)}).fail(function(e){410!=e.status&&setTimeout(function(){t.update(e)},1e4)})},show:function(){var e=this;if(e.notify&&!e.details){if(!e.notifier){var t=p('\n            <div class="card">\n              <div class="card-header bg-primary d-flex">\n                <div>'.concat(e.type_desc,'</div>\n                <div class="ml-auto">\n                  <button class="btn btn-sm-sq btn-primary pg-bg-close"><i class="fa fa-lg fa-close"></i></button>\n                </div>\n              </div>\n              <div class="card-body px-2">\n                <div class="py-1">').concat(e.desc,'</div>\n                <div class="py-1">').concat(e.stime.toString(),'</div>\n                <div class="d-flex py-1">\n                  <div class="my-auto mr-2">\n                    <span class="fa fa-clock-o fa-2x"></span>\n                  </div>\n                  <div class="pg-bg-etime my-auto mr-2"></div>\n                  <div class="ml-auto">\n                    <button class="btn btn-secondary pg-bg-more-details"><span class="fa fa-info-circle"></span>&nbsp;').concat(c("More details..."),'</button>\n                    <button class="btn btn-danger bg-process-stop"><span class="fa fa-times-circle"></span>&nbsp;').concat(c("Stop Process"),'</button>\n                  </div>\n                </div>\n                <div class="pg-bg-status py-1">\n                </div>\n              </div>\n            </div>\n            ')),n=t.find(".pg-bg-more-details"),a=t.find(".pg-bg-close");e.container=t,e.notifier=i.notify(t.get(0),"bg-bgprocess",0,null),n.on("click",function(e){(e=e||window.event).cancelBubble=!0,e.stopPropagation(),this.notifier.dismiss(),this.notifier=null,this.completed=!1,this.show_detailed_view.apply(this)}.bind(e)),a.on("click",function(){this.notifier.dismiss(),this.notifier=null,this.acknowledge_server.apply(this)}.bind(this)),e.container.on("click",function(e){(e=e||window.event).cancelBubble=!0,e.stopPropagation()}),t.find(".bg-process-stop").off("click").on("click",e.stop_process.bind(this))}e.container.find(".pg-bg-etime").empty().append(p("<span></span>").text(String(e.execution_time))).append(p("<span></span>").text(" "+c("seconds"))),p(e.container.find(".pg-bg-status")).html(e.curr_status);var r=p(e.container.find(".bg-process-stop"));isNaN(parseInt(e.exit_code))?r.attr("disabled",!1):r.attr("disabled",!0)}else e.show_detailed_view.apply(e)},show_detailed_view:function(){var e=this,t=this.panel,n=!1;e.panel||(n=!0,(t=this.panel=f.BackgroundProcessObsorver.create_panel()).title("Process Watcher - "+e.type_desc),t.focus());var a=t.$container,r=a.find(".bg-process-watcher"),i=a.find(".bg-process-details"),o=a.find(".bg-process-footer"),s=a.find(".bg-process-stop");if(isNaN(parseInt(e.exit_code))?s.attr("disabled",!1):s.attr("disabled",!0),s.off("click").on("click",e.stop_process.bind(this)),n&&(r.html(e.logs),setTimeout(function(){e.logs[0].scrollTop=e.logs[0].scrollHeight}),e.logs_loading=p('<li class="pg-bg-res-out loading-logs">'.concat(c("Loading process logs..."),"</li>")),e.logs.append(e.logs_loading),i.find(".bg-detailed-desc").html(e.detailed_desc)),i.find(".bg-process-stats .bgprocess-start-time").html(e.stime),o.find(".bg-process-status").html(e.curr_status),o.find(".bg-process-exec-time p").empty().append(p("<span></span>").text(String(e.execution_time))).append(p("<span></span>").text(" "+c("seconds"))),n){e.details=!0,e.err=0,e.out=0,setTimeout(function(){e.status.apply(e)},1e3);var l=function(e,t,n){var a=t.outerHeight()+n.outerHeight();e.css("padding-bottom",a)}.bind(t,r,i,o);t.on(g.EVENT.RESIZED,l),t.on(g.EVENT.ATTACHED,l),t.on(g.EVENT.DETACHED,l),l(),t.on(g.EVENT.CLOSED,function(e){e.panel=null,e.details=!1,null!=e.exit_code&&e.acknowledge_server.apply(e)}.bind(t,this))}},acknowledge_server:function(){p.ajax({type:"PUT",timeout:3e4,url:this.bgprocess_url("acknowledge"),cache:!1,async:!0,contentType:"application/json"}).done(function(){}).fail(function(){console.warn(arguments)})},stop_process:function(){this.state=3,p.ajax({type:"PUT",timeout:3e4,url:this.bgprocess_url("stop_process"),cache:!1,async:!0,contentType:"application/json"}).done(function(){}).fail(function(){console.warn(arguments)})}}),u.extend(f.BackgroundProcessObsorver,{bgprocesses:{},init:function(){var e=this;e.initialized||(e.initialized=!0,setTimeout(function(){e.update_process_list.apply(e)},1e3),f.Events.on("pgadmin-bgprocess:created",function(){setTimeout(function(){f.BackgroundProcessObsorver.update_process_list(!0)},1e3)}))},update_process_list:function(a){var r=this;p.ajax({typs:"GET",timeout:3e4,url:t("bgprocess.list"),cache:!1,async:!0,contentType:"application/json"}).done(function(e){if(e&&u.isArray(e)){for(var t in e){var n=e[t];"id"in n&&(n.id in r.bgprocesses||(r.bgprocesses[n.id]=new o(n)))}a&&0==e.length&&setTimeout(function(){r.update_process_list(!1)},3e3)}}).fail(function(){console.warn(arguments)})},create_panel:function(){return this.register_panel(),f.docker.addPanel("bg_process_watcher",g.DOCK.FLOAT,null,{w:screen.width<700?.95*screen.width:.5*screen.width,h:screen.height<500?.95*screen.height:.5*screen.height,x:screen.width<700?"2%":"25%",y:screen.height<500?"2%":"25%"})},register_panel:function(){var e=f.docker.findPanels("bg_process_watcher");e&&1<=e.length||new f.Panel({name:"bg_process_watcher",showTitle:!0,isCloseable:!0,isPrivate:!0,isLayoutMember:!1,content:'<div class="bg-process-details"><div class="bg-detailed-desc"></div><div class="bg-process-stats d-flex py-1"><div class="my-auto mr-2"><span class="fa fa-clock-o fa-2x"></span></div><div class="pg-bg-etime my-auto mr-2"><span>'+c("Start time")+': <span class="bgprocess-start-time"></span></span></div><div class="ml-auto"><button type="button" class="btn btn-danger bg-process-stop"><span class="fa fa-times-circle"></span>&nbsp;'+c("Stop Process")+'</button></div></div></div><div class="bg-process-watcher"></div><div class="bg-process-footer p-2 d-flex"><div class="bg-process-status flex-grow-1"></div><div class="bg-process-exec-time ml-4 my-auto"><div class="exec-div"><span>'+c("Execution time")+":</span><p></p></div></div></div>",onCreate:function(e,t){t.addClass("pg-no-overflow p-2")}}).load(f.docker)}}),f.BackgroundProcessObsorver}.apply(t,a))||(e.exports=r)},,,,,function(e,t,n){"use strict";var a,r;n(16),n(40),n(11),n(4),n(8),n(29),n(6),a=[n(2),n(0),n(1),n(15),n(9),n(13),n(28),n(20)],void 0===(r=function(l,e,d,t,n,a,r){r.PartitionRow=r.Row.extend({modelDuplicateClass:"bg-model-duplicate",initialize:function(){r.Row.prototype.initialize.apply(this,arguments);var a=this;a.model.on("change:is_attach",function(){setTimeout(function(){a.columns.each(function(e){if("partition_name"==e.get("name")){var t=a.columns.indexOf(e),n=new(e.get("cellFunction").apply(e,[a.model]))({column:e,model:a.model});a.cells[t].remove(),a.cells[t]=n,a.render()}})},10)}),a.listenTo(a.model,"pgadmin-session:model:duplicate",a.modelDuplicate),a.listenTo(a.model,"pgadmin-session:model:unique",a.modelUnique)},modelDuplicate:function(){e(this.el).removeClass("new"),e(this.el).addClass(this.modelDuplicateClass)},modelUnique:function(){e(this.el).removeClass(this.modelDuplicateClass)}});a.PartitionKeyModel=n.Node.Model.extend({defaults:{key_type:"column",pt_column:void 0,expression:void 0},keys:["pt_column"],schema:[{id:"key_type",label:l("Key type"),type:"select2",editable:!0,cell:"select2",cellHeaderClasses:"width_percent_25",select2:{allowClear:!1},options:[{label:l("Column"),value:"column"},{label:l("Expression"),value:"expression"}]},{id:"pt_column",label:l("Column"),type:"text",cell:r.Extension.Select2DepCell.extend({keyPathAccessor:function(e,t){var n=e;if(d.isArray(n))return d.map(n,function(e){return e.pt_column});t=t.split(".");for(var a=0;a<t.length;a++){if(d.isNull(n))return null;d.isEmpty(t[a])||d.isUndefined(n[t[a]])||(n=n[t[a]])}return d.isObject(n)&&!d.isArray(n)?null:n},initialize:function(){var e=this;if(this.model.handler){if(r.Extension.Select2DepCell.prototype.initialize.apply(this,arguments),d.isUndefined(e.model.get("oid"))){var t=e.model.top.get("columns");e.listenTo(t,"remove",e.resetColOptions),e.listenTo(t,"change:name",e.resetColOptions)}e.custom_options()}},resetColOptions:function(){var e=this;setTimeout(function(){e.custom_options(),e.render.apply(e)},50)},custom_options:function(){var e=this.model.top.get("columns"),t=this.model.top.get("typname"),n=this.model.top.of_types_tables,a=[];0<e.length?d.each(e.models,function(e){var t=e.get("name");d.isUndefined(t)||d.isNull(t)||a.push({label:t,value:t,image:"icon-column"})}):!d.isUndefined(t)&&!d.isNull(t)&&!d.isUndefined(n)&&0<n.length&&d.each(n,function(e){e.label==t&&d.each(e.oftype_columns,function(e){a.push({label:e.name,value:e.name,image:"icon-column"})})}),this.column.set("options",a)},remove:function(){if(this.model.handler){var e=this,t=e.model.top.get("columns");e.stopListening(t,"remove",e.resetColOptions),e.stopListening(t,"change:name",e.resetColOptions),r.Extension.Select2DepCell.prototype.remove.apply(this,arguments)}}}),deps:["key_type"],cellHeaderClasses:"width_percent_30",transform:function(e){var t=[];return e&&d.isArray(e)&&d.each(e,function(e){t.push({label:e.label,value:e.label,image:"icon-column"})}),t},select2:{allowClear:!1},editable:function(e){return"expression"!=e.get("key_type")||(setTimeout(function(){e.set("pt_column",void 0)},10),!1)}},{id:"expression",label:l("Expression"),type:"text",cell:r.Extension.StringDepCell,cellHeaderClasses:"width_percent_45",deps:["key_type"],editable:function(e){return"column"!=e.get("key_type")||(setTimeout(function(){e.set("expression",void 0)},10),!1)}}],validate:function(){var e,t=this.get("key_type"),n=this.get("pt_column"),a=this.get("expression");return this.errorModel.clear(),d.isUndefined(t)||d.isNull(t)||""==String(t).replace(/^\s+|\s+$/g,"")?(e=l("Partition key type cannot be empty."),this.errorModel.set("key_type",e),e):"column"==t&&d.isUndefined(n)||d.isNull(n)||""==String(n).replace(/^\s+|\s+$/g,"")?(e=l("Partition key column cannot be empty."),this.errorModel.set("pt_column",e),e):"expression"==t&&d.isUndefined(a)||d.isNull(a)||""==String(a).replace(/^\s+|\s+$/g,"")?(e=l("Partition key expression cannot be empty."),this.errorModel.set("expression",e),e):null}}),a.PartitionsModel=n.Node.Model.extend({idAttribute:"oid",defaults:{oid:void 0,is_attach:!1,partition_name:void 0,is_default:void 0,values_from:void 0,values_to:void 0,values_in:void 0,values_modulus:void 0,values_remainder:void 0},keys:["partition_name"],schema:[{id:"oid",label:l("OID"),type:"text"},{id:"is_attach",label:l("Operation"),cell:"switch",type:"switch",options:{onText:l("Attach"),offText:l("Create"),width:65},cellHeaderClasses:"width_percent_5",editable:function(e){return!(!(e instanceof t.Model&&e.isNew())||e.top.isNew())}},{id:"partition_name",label:l("Name"),type:"text",cell:"string",cellHeaderClasses:"width_percent_15",editable:function(e){return!!(e instanceof t.Model&&e.isNew())},cellFunction:function(e){if(e.get("is_attach")){var t=[];return e.set({partition_name:void 0},{silent:!0}),d.each(e.top.table_options,function(e){t.push([e.label,e.value])}),r.Extension.Select2Cell.extend({optionValues:t})}return r.StringCell}},{id:"is_default",label:l("Default"),type:"switch",cell:"switch",cellHeaderClasses:"width_percent_5",min_version:11e4,options:{onText:l("Yes"),offText:l("No")},editable:function(e){return!!(e.handler&&e.handler.top&&e.handler.top.attributes&&("range"===e.handler.top.attributes.partition_type||"list"===e.handler.top.attributes.partition_type)&&e instanceof t.Model&&e.isNew()&&11e4<=e.handler.top.node_info.server.version)}},{id:"values_from",label:l("From"),type:"text",cell:r.Extension.StringDepCell,deps:["is_default"],cellHeaderClasses:"width_percent_15",editable:function(e){return!!(e.handler&&e.handler.top&&e.handler.top.attributes&&"range"===e.handler.top.attributes.partition_type&&e instanceof t.Model&&e.isNew()&&!0!==e.get("is_default"))}},{id:"values_to",label:l("To"),type:"text",cell:r.Extension.StringDepCell,deps:["is_default"],cellHeaderClasses:"width_percent_15",editable:function(e){return!!(e.handler&&e.handler.top&&e.handler.top.attributes&&"range"===e.handler.top.attributes.partition_type&&e instanceof t.Model&&e.isNew()&&!0!==e.get("is_default"))}},{id:"values_in",label:l("In"),type:"text",cell:r.Extension.StringDepCell,deps:["is_default"],cellHeaderClasses:"width_percent_15",editable:function(e){return!!(e.handler&&e.handler.top&&e.handler.top.attributes&&"list"===e.handler.top.attributes.partition_type&&e instanceof t.Model&&e.isNew()&&!0!==e.get("is_default"))}},{id:"values_modulus",label:l("Modulus"),type:"int",cell:r.Extension.StringDepCell,cellHeaderClasses:"width_percent_15",editable:function(e){return!!(e.handler&&e.handler.top&&e.handler.top.attributes&&"hash"===e.handler.top.attributes.partition_type&&e instanceof t.Model&&e.isNew())}},{id:"values_remainder",label:l("Remainder"),type:"int",cell:r.Extension.StringDepCell,cellHeaderClasses:"width_percent_15 width_percent_20",editable:function(e){return!!(e.handler&&e.handler.top&&e.handler.top.attributes&&"hash"===e.handler.top.attributes.partition_type&&e instanceof t.Model&&e.isNew())}}],validate:function(){var e,t=this.get("partition_name"),n=this.get("is_default"),a=this.get("values_from"),r=this.get("values_to"),i=this.get("values_in"),o=this.get("values_modulus"),s=this.get("values_remainder");if(this.errorModel.clear(),d.isUndefined(t)||d.isNull(t)||""===String(t).replace(/^\s+|\s+$/g,""))return e=l("Partition name cannot be empty."),this.errorModel.set("partition_name",e),e;if("range"===this.top.get("partition_type")){if(!0!==n&&(d.isUndefined(a)||d.isNull(a)||""===String(a).replace(/^\s+|\s+$/g,"")))return e=l("For range partition From field cannot be empty."),this.errorModel.set("values_from",e),e;if(!0!==n&&(d.isUndefined(r)||d.isNull(r)||""===String(r).replace(/^\s+|\s+$/g,"")))return e=l("For range partition To field cannot be empty."),this.errorModel.set("values_to",e),e}else if("list"===this.top.get("partition_type")){if(!0!==n&&(d.isUndefined(i)||d.isNull(i)||""===String(i).replace(/^\s+|\s+$/g,"")))return e=l("For list partition In field cannot be empty."),this.errorModel.set("values_in",e),e}else if("hash"===this.top.get("partition_type")){if(d.isUndefined(o)||d.isNull(o)||""===String(o).replace(/^\s+|\s+$/g,""))return e=l("For hash partition Modulus field cannot be empty."),this.errorModel.set("values_modulus",e),e;if(d.isUndefined(s)||d.isNull(s)||""===String(s).replace(/^\s+|\s+$/g,""))return e=l("For hash partition Remainder field cannot be empty."),this.errorModel.set("values_remainder",e),e}return null}})}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(21),n(26),n(27),n(36),n(10),n(19),n(11),n(7),n(32),n(12),n(24),n(49),n(22),n(6),Object.defineProperty(t,"__esModule",{value:!0}),t.showDataGrid=function(t,n,a,e,r,i){var o=6<arguments.length&&void 0!==arguments[6]&&arguments[6],s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:null,l=n.treeMenu.findNodeByDomElement(r);if(void 0===l||!l.getData())return void a.alert((0,g.default)("Data Grid Error"),(0,g.default)("No object selected."));var d=h.getTreeNodeHierarchyFromIdentifier.call(n,r);if(function(e){return void 0===e.server||void 0===e.database}(d)||!function(e){return void 0!==e.schema||void 0!==e.view||void 0!==e.catalog}(d))return;var c=function(e,t,n,a){var r=(0,b.default)("datagrid.panel",{trans_id:e});return r+="?is_query_tool=".concat(!1)+"&cmd_type=".concat(t.mnuid)+"&obj_type=".concat(n._type)+"&obj_id=".concat(n._id)+"&sgid=".concat(a.server_group._id)+"&sid=".concat(a.server._id)+"&did=".concat(a.database._id)+"&server_type=".concat(a.server.server_type)}(i,e,l.getData(),d),u=y(n,r);if(o){!function(a,r){a.filterDialog||a.dialog("filterDialog",function(){return{main:function(e,t,n,a,r){this.set("title",e),this.message=t,this.validateUrl=n,this.okCallback=r,this.preferences=a},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-secondary pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,g.default)("Data Filter"),url:(0,b.default)("help.static",{filename:"viewdata_filter.html"})}},{text:(0,g.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:(0,g.default)("OK"),key:null,className:"btn btn-primary fa fa-check pg-alertify-button"}],options:{modal:0,resizable:!0,maximizable:!1,pinnable:!1,autoReset:!1}}},build:function(){var t=this;a.pgDialogBuild.apply(t),(0,v.default)(t.__internal.buttons[2].element).attr("title",(0,g.default)("Use SHIFT + ENTER to apply filter...")),(0,v.default)(t.elements.body).on("keypress",function(e){e.shiftKey&&13==e.keyCode&&t.__internal.buttons[2].element.click()})},prepare:function(){var e=this,t=(0,v.default)(this.message),n=t.find("#sql_filter");(0,v.default)(this.elements.header).attr("data-title",this.get("title")),(0,v.default)(this.elements.body.childNodes[0]).addClass("dataview_filter_dialog"),this.setContent(t.get(0)),e.__internal.buttons[2].element.disabled=!0,this.filter_obj=m.default.fromTextArea(n.get(0),{lineNumbers:!0,mode:"text/x-pgsql",extraKeys:r.editor_shortcut_keys,indentWithTabs:!e.preferences.use_spaces,indentUnit:e.preferences.tab_size,tabSize:e.preferences.tab_size,lineWrapping:e.preferences.wrap_code,autoCloseBrackets:e.preferences.insert_pair_brackets,matchBrackets:e.preferences.brace_matching});var a=_.calcFontSize(e.preferences.sql_font_size);(0,v.default)(this.filter_obj.getWrapperElement()).css("font-size",a),setTimeout(function(){e.filter_obj.refresh(),e.filter_obj.focus()},500),e.filter_obj.on("change",function(){""!==e.filter_obj.getValue()?e.__internal.buttons[2].element.disabled=!1:e.__internal.buttons[2].element.disabled=!0})},callback:function(e){if(e.button.text==(0,g.default)("OK")){var t=this.filter_obj.getValue(),n=this;e.cancel=!0,v.default.ajax({url:n.validateUrl,method:"POST",async:!1,contentType:"application/json",data:JSON.stringify(t)}).done(function(e){e.data.status?(n.okCallback(t),n.close()):a.alert((0,g.default)("Validation Error"),e.data.result)}).fail(function(e){a.alert((0,g.default)("Validation Error"),e)})}else if(0==e.index)return e.cancel=!0,void r.showHelp(e.button.element.name,e.button.element.getAttribute("url"),null,null)}}})}(a,n);var p=function(e,t){var n={sid:t.server._id,did:t.database._id,obj_id:e._id};return(0,b.default)("datagrid.filter_validate",n)}(l.getData(),d),f=function(e){t.launch_grid(i,c,!1,u,null,e)};v.default.get((0,b.default)("datagrid.filter"),function(e){a.filterDialog("Data Filter - ".concat(u),e,p,s,f).resizeTo(n.stdW.sm,n.stdH.sm)})}else t.launch_grid(i,c,!1,u)},t.retrieveNameSpaceName=l,t.generateDatagridTitle=y;var g=a(n(2)),b=a(n(5)),h=n(57),i=n(88),m=a(n(84)),_=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,t&&t.set(e,n);return n}(n(69)),v=a(n(0));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function a(e){return e&&e.__esModule?e:{default:e}}function l(e){return void 0!==e.schema?e.schema.label:void 0!==e.view?e.view.label:void 0!==e.catalog?e.catalog.label:""}function y(e,t){var n=(0,i.getPanelTitle)(e,t),a=l(h.getTreeNodeHierarchyFromIdentifier.call(e,t)),r=e.treeMenu.findNodeByDomElement(t);return"".concat(a,".").concat(r.getData().label,"/").concat(n)}},function(e,t,n){"use strict";n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.showQueryTool=function(e,t,n,a,r,i){var o=a||"",s=function(e,t){return(0,f.getPanelTitle)(e,t)}(t,r);if(void 0===t.treeMenu.findNodeByDomElement(r))return void n.alert((0,c.default)("Query Tool Error"),(0,c.default)("No object selected."));var l=p.getTreeNodeHierarchyFromIdentifier.call(t,r);if(function(e){return void 0===e.server}(l))return;var d=function(e,t,n){var a=(0,u.default)("datagrid.panel",{trans_id:e});a+="?is_query_tool=".concat(!0)+"&sgid=".concat(n.server_group._id)+"&sid=".concat(n.server._id)+"&server_type=".concat(n.server.server_type),function(e){return e.database}(n)&&(a+="&did=".concat(n.database._id));return a}(i,0,l);e.launch_grid(i,d,!0,s,o)};var c=a(n(2)),u=a(n(5)),p=n(57),f=n(88);function a(e){return e&&e.__esModule?e:{default:e}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(a,e,d){"use strict";(function(t){d(10),d(6);var r=n(d(2)),i=n(d(5)),o=n(d(0)),e=n(d(14)),s=n(d(3)),l=d(127);function n(e){return e&&e.__esModule?e:{default:e}}a.exports=e.default.dialog("fileSelectionDlg",function(){return{main:function(e){t.isUndefined(e.dialog_title)&&(e.dialog_title="Select file"),this.dialog_type=e.dialog_type,this.set("title",e.dialog_title),this.params=JSON.stringify(e),this.elements.dialog.style.minWidth="630px",this.show()},settings:{label:void 0},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=n)}},prepare:function(){var e=this;e.$container.find(".storage_content").remove(),e.$container.append("<div class='storage_content'></div>");var t=e.$container.find(".storage_content");t.empty(),(0,o.default)(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties"),o.default.get((0,i.default)("file_manager.index"),function(e){t.append(e)});var n,a=(0,l.getTransId)(e.params);4==a.readyState&&(n=JSON.parse(a.responseText)),e.trans_id=n.data.fileTransId,setTimeout(function(){(0,o.default)(e.$container.find(".file_manager")).on("enter-key",function(){(0,o.default)((0,o.default)(e.elements.footer).find(".file_manager_ok")).trigger("click")})},200),e.__internal.buttons[1].element.disabled=!0},setup:function(){return{buttons:[{text:(0,r.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:(0,r.default)("Select"),key:13,className:"btn btn-primary fa fa-file file_manager_ok pg-alertify-button disabled"}],focus:{element:0},options:{closableByDimmer:!1,maximizable:!1,closable:!1,movable:!0,padding:!1,overflow:!1,model:0,resizable:!0,pinnable:!1,modal:!1,autoReset:!1}}},callback:function(e){var t;if(e.button.text==(0,r.default)("Select")){var n=(0,o.default)(".storage_dialog #uploader .input-path").val(),a={path:(0,o.default)(".currentpath").val()};s.default.Browser.Events.trigger("pgadmin-storage:finish_btn:"+this.dialog_type,n),t=(0,o.default)(this.elements.body).find(".storage_content"),(0,o.default)(t).find("*").off(),t.remove(),(0,l.removeTransId)(this.trans_id),(0,l.set_last_traversed_dir)(a,this.trans_id)}else e.button.text==(0,r.default)("Cancel")&&(t=(0,o.default)(this.elements.body).find(".storage_content"),(0,o.default)(t).find("*").off(),t.remove(),(0,l.removeTransId)(this.trans_id),s.default.Browser.Events.trigger("pgadmin-storage:cancel_btn:"+this.dialog_type))},build:function(){this.$container=(0,o.default)('<div class="storage_dialog file_selection_dlg"></div>'),this.elements.content.appendChild(this.$container.get(0)),e.default.pgDialogBuild.apply(this)},hooks:{onshow:function(){}}}})}).call(this,d(1))},function(t,e,n){"use strict";(function(o){n(10),n(259),n(120),n(4),n(260),n(29);var s=e(n(2)),i=e(n(5)),l=e(n(0)),a=e(n(14)),d=e(n(3)),c=n(127);function e(e){return e&&e.__esModule?e:{default:e}}t.exports=a.default.dialog("createModeDlg",function(){return{setup:function(){return{buttons:[{text:(0,s.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times file_manager_create_cancel pg-alertify-button"},{text:(0,s.default)("Create"),key:13,className:"btn btn-primary fa fa-file file_manager_create file_manager_ok pg-alertify-button disabled"}],focus:{element:0},options:{closableByDimmer:!1,maximizable:!1,closable:!1,movable:!0,padding:!1,overflow:!1,model:0,resizable:!0,pinnable:!1,modal:!1,autoReset:!1}}},replace_file:function(){var t=(0,l.default)(".replace_file .btn_yes"),n=(0,l.default)(".replace_file .btn_no");(0,l.default)(".storage_dialog #uploader .input-path").attr("disabled",!0),(0,l.default)(".file_manager_ok").addClass("disabled"),(0,l.default)(".replace_file, .fm_dimmer").show(),t.on("click",function(){(0,l.default)(".replace_file, .fm_dimmer").hide(),t.off(),n.off();var e=(0,l.default)(".storage_dialog #uploader .input-path").val();d.default.Browser.Events.trigger("pgadmin-storage:finish_btn:create_file",e),(0,l.default)(".file_manager_create_cancel").trigger("click"),(0,l.default)(".storage_dialog #uploader .input-path").attr("disabled",!1),(0,l.default)(".file_manager_ok").removeClass("disabled")}),n.on("click",function(){(0,l.default)(".replace_file, .fm_dimmer").hide(),t.off(),n.off(),(0,l.default)(".storage_dialog #uploader .input-path").attr("disabled",!1),(0,l.default)(".file_manager_ok").removeClass("disabled")})},is_file_exist:function(){var e=(0,l.default)(".storage_dialog #uploader .input-path").val(),t=e.substr(0,e.lastIndexOf("/")+1),n=e.substr(e.lastIndexOf("/")+1),a=!1,r={path:t,name:n,mode:"is_file_exist"};return l.default.ajax({type:"POST",data:JSON.stringify(r),url:(0,i.default)("file_manager.filemanager",{trans_id:this.trans_id}),dataType:"json",contentType:"application/x-download; charset=utf-8",async:!1}).done(function(e){var t=e.data.result;a=1===t.Code}),a},check_permission:function(e){var n=!1,t={path:e,mode:"permission"};return l.default.ajax({type:"POST",data:JSON.stringify(t),url:(0,i.default)("file_manager.filemanager",{trans_id:this.trans_id}),dataType:"json",contentType:"application/json; charset=utf-8",async:!1}).done(function(e){var t=e.data.result;1===t.Code?n=!0:((0,l.default)(".file_manager_ok").addClass("disabled"),a.default.error(t.Error))}).fail(function(){(0,l.default)(".file_manager_ok").addClass("disabled"),a.default.error((0,s.default)("Error occurred while checking access permission."))}),n},callback:function(e){if(e.button.text==(0,s.default)("Create")){var t,n=(0,l.default)(".storage_dialog #uploader .input-path").val(),a={path:(0,l.default)(".currentpath").val()},r="/",i=(0,l.default)(".allowed_file_types select").val();if("win32"===(0,l.default)(".file_manager").attr("data-platform")&&(r="\\"),n.includes(".")&&!n.split(".").pop().includes(r)||"*"==i||(n=n+"."+i,(0,l.default)(".storage_dialog #uploader .input-path").val(n)),!this.check_permission(n))return void(e.cancel=!0);!o.isUndefined(n)&&""!==n&&this.is_file_exist()?(this.replace_file(),e.cancel=!0):(d.default.Browser.Events.trigger("pgadmin-storage:finish_btn:create_file",n),t=(0,l.default)(this.elements.body).find(".storage_content"),(0,l.default)(t).find("*").off(),t.remove(),(0,c.removeTransId)(this.trans_id)),(0,c.set_last_traversed_dir)(a,this.trans_id)}else e.button.text==(0,s.default)("Cancel")&&(t=(0,l.default)(this.elements.body).find(".storage_content"),(0,l.default)(t).find("*").off(),t.remove(),(0,c.removeTransId)(this.trans_id),d.default.Browser.Events.trigger("pgadmin-storage:cancel_btn:create_file"))}}},!0,"fileSelectionDlg")}).call(this,n(1))},,,function(e,t,n){"use strict";n(16),n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.Dialog=void 0;var l=o(n(2)),r=n(25),a=n(394),d=o(n(13)),i=n(57);function o(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function s(e,t,n,a,r,i){var o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:d.default;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.errorAlertTitle=e,this.alertify=r,this.pgBrowser=n,this.jquery=a,this.dialogModel=i,this.backform=o,this.dialogContainerSelector=t}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(s,[{key:"retrieveAncestorOfTypeServer",value:function(e){var t=null,n=e||this.pgBrowser.treeMenu.selected(),a=this.pgBrowser.treeMenu.findNodeByDomElement(n);if(a){var r,i=a.ancestorNode(function(e){return"database"===(r=e.getData())._type}),o=function(e){return"server"===(r=e.getData())._type};null!==i?0<=r._label.indexOf("=")?this.alertify.alert((0,l.default)(this.errorAlertTitle),(0,l.default)("Databases with = symbols in the name cannot be backed up or restored using this utility.")):i.hasParent(o)&&(t=r):a.anyFamilyMember(o)&&(t=r)}return null===t&&this.alertify.alert((0,l.default)(this.errorAlertTitle),(0,l.default)("Please select server or child node from the browser tree.")),t}},{key:"hasBinariesConfiguration",value:function(e){var t="pg_bin_dir",n=(0,l.default)("Please configure the PostgreSQL Binary Path in the Preferences dialog.");(e.type&&"ppas"===e.type||"ppas"===e.server_type)&&(t="ppas_bin_dir",n=(0,l.default)("Please configure the EDB Advanced Server Binary Path in the Preferences dialog."));var a=this.pgBrowser.get_preference("paths",t);return a?!!a.value||(this.alertify.alert((0,l.default)("Configuration required"),n),!1):(this.alertify.alert((0,l.default)(this.errorAlertTitle),(0,r.sprintf)((0,l.default)("Failed to load preference %s of module %s"),t,"paths")),!1)}},{key:"dialogName",value:function(){}},{key:"createOrGetDialog",value:function(e,t){var n=this.dialogName(t);if(!this.alertify[n]){var a=this;this.alertify.dialog(n,function(){return a.dialogFactory(e,t)})}return this.alertify[n]}},{key:"dialogFactory",value:function(e,t){return new a.DialogFactory(this.pgBrowser,this.jquery,this.alertify,this.dialogModel,this.backform,this.dialogContainerSelector).create(e,t)}},{key:"canExecuteOnCurrentDatabase",value:function(e){var t=i.getTreeNodeHierarchyFromIdentifier.apply(this.pgBrowser,[e]);return!(t.database&&0<=t.database._label.indexOf("="))||(this.alertify.alert((0,l.default)(this.errorAlertTitle),(0,l.default)("Databases with = symbols in the name cannot be backed up or restored using this utility.")),!1)}}]),s}();t.Dialog=s},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(21),n(26),n(27),n(10),n(19),n(11),n(7),n(32),n(12),n(24),n(49),n(22),Object.defineProperty(t,"__esModule",{value:!0}),t.DialogWrapper=void 0;var a,r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,t&&t.set(e,n);return n}(n(25)),i=(a=n(0))&&a.__esModule?a:{default:a};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function s(e,t,n,a,r,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.hooks={onclose:function(){this.view&&this.view.remove({data:!0,internal:!0,silent:!0})}},this.dialogContainerSelector=e,this.dialogTitle=t,this.jquery=n,this.pgBrowser=a,this.alertify=r,this.dialogModel=i,this.backform=o}return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(s,[{key:"build",value:function(){this.alertify.pgDialogBuild.apply(this)}},{key:"wasHelpButtonPressed",value:function(e){return"dialog_help"===e.button.element.name||"object_help"===e.button.element.name}},{key:"getSelectedNodeData",value:function(e){if(this.isNodeSelected(e)){var t=e.getData();return t||void 0}}},{key:"focusOnDialog",value:function(t){var e=(0,i.default)(t.elements.body).find(".backform-tab");e.attr("tabindex",-1),this.pgBrowser.keyboardNavigation.getDialogTabNavigator((0,i.default)(t.elements.dialog));var n=e.find(".tab-content:first > .tab-pane.active:first");r.findAndSetFocus(n),(0,i.default)(t.elements.footer).on("keydown","button",function(e){if(9==e.keyCode&&0==(0,i.default)(this).nextAll("button:not([disabled])").length)return r.findAndSetFocus((0,i.default)(t.elements.body).find(".tab-content div.active")),!1})}},{key:"isNodeSelected",value:function(e){return e}}]),s}();t.DialogWrapper=d},,,,,,,,function(e,t){e.exports=s},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.disableTriggers=function(e,t,n,a){return r(e,t,n,a,{is_enable_trigger:"D"})},t.enableTriggers=function(e,t,n,a){return r(e,t,n,a,{is_enable_trigger:"O"})};var a,o=(a=n(70))&&a.__esModule?a:{default:a};function r(n,a,e,t,r){var i=function(e,t){var n=(e||{}).item||t.selected();return t.findNodeByDomElement(n)}(t,n);if(!i||null===i.getData()||void 0===i.getData())return!1;o.default.put(e(i.getHtmlIdentifier(),"set_trigger",i.getData(),!0),r).then(function(e){1===e.data.success&&(a.success(e.data.info),i.reload(n))}).catch(function(e){try{var t=e.response.data;0===t.success&&a.error(t.errormsg)}catch(e){console.warn(e.stack||e)}i.unload(n)})}},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(21),n(26),n(27),n(19),n(7),n(32),n(12),n(24),n(49),n(22),Object.defineProperty(t,"__esModule",{value:!0}),t.show_advanced_tab=function(e){if(function(e){return!a.isUndefined(e.node_info)&&!a.isUndefined(e.node_info.server)&&"gpdb"===e.node_info.server.server_type}(e))return!1;return!0};var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,t&&t.set(e,n);return n}(n(1));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a,r;a=[n(3),n(334),n(200)],void 0===(r=function(e){function t(e){for(var t in e){var n=e[t];n.init&&"function"==typeof n.init?n.init():n.Init&&"function"==typeof n.Init&&n.Init()}}t(e),t(e.Browser),t(e.Tools),e.Browser.create_menus()}.apply(t,a))||(e.exports=r)},,,,,,,function(e,t,n){"use strict";var a,r,i;(i=i||{}).about=n(335),(i=i||{}).preferences=n(336),(i=i||{}).file_manager=n(256),(i=i||{}).settings=n(390),(i=i||{}).tools=i.tools||{},i.tools.backup=n(391),(i=i||{}).tools=i.tools||{},i.tools.restore=n(397),(i=i||{}).tools=i.tools||{},i.tools.grant_wizard=n(400),(i=i||{}).tools=i.tools||{},i.tools.maintenance=n(403),(i=i||{}).tools=i.tools||{},i.tools.import_export=n(405),(i=i||{}).tools=i.tools||{},i.tools.debugger=i.tools.debugger||{},i.tools.debugger.controller=n(406),(i=i||{}).tools=i.tools||{},i.tools.debugger=i.tools.debugger||{},i.tools.debugger.direct=n(196),(i=i||{}).node=i.node||{},i.node.pga_job=n(407),a=[n(9),n(410)],void 0===(r=function(e){e.init()}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";var a,r;a=[n(0),n(47),n(3),n(2),n(5)],void 0===(r=function(e,t,n,a,r){if(!(n=n||window.pgAdmin||{}).About)return n.About={about_show:function(){t.aboutDialog||t.dialog("aboutDialog",function(){return{main:function(e,t){this.set("title",e),this.message=t},setup:function(){return{buttons:[{text:a("OK"),key:27,className:"btn btn-primary fa fa-lg fa-check pg-alertify-button"}],options:{modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1}}},build:function(){t.pgDialogBuild.apply(this)},prepare:function(){this.setContent(this.message)}}}),e.get(r("about.index"),function(e){t.aboutDialog(a("About %s",n.Browser.utils.app_name),e).resizeTo(n.Browser.stdW.md,n.Browser.stdH.md)})}},n.About}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";var a,r;n(10),n(11),n(141),n(6),a=[n(2),n(5),n(0),n(1),n(15),n(14),n(3),n(13),n(9),n(96),n(154)],void 0===(r=function(d,r,c,u,p,f,e,g,b,h){return e.Preferences||(e.Preferences={init:function(){this.initialized||(this.initialized=!0,f.dialog("preferencesDlg",function(){var e,i=[],o=c("<div class='preferences_dialog d-flex flex-row'></div>"),t=p.Model.extend({idAttribute:"id",defaults:{id:void 0,value:void 0}}),n={},s=this.preferences=new(p.Collection.extend({model:t,url:r("preferences.index"),updateAll:function(){for(var e in n)this.get(e).save();return!0}}))(null);s.on("reset",function(){n={}}),s.on("change",function(e){var t=e.get("id");t in n?u.isEqual(e.get("value"),n[t])&&delete n[t]:n[t]=e._previousAttributes.value});function l(e,t){var n=t?e.itemData(t):null;n&&n.preferences?e.select(t):(t=e.first(t),l(e,t))}var a=function(e,t,n,a){var r=(n=n||t.selected())?t.itemData(n):null;switch(a){case"selected":if(!r)return!0;if(r.preferences)return o.find(".preferences_content"),function(e){var r=o.find(".preferences_content");i&&u.each(i,function(e){"$sel"in e&&e.$sel.data("select2").isOpen()&&e.$sel.data("select2").close(),e.remove()}),r.empty(),i=[],u.each(e,function(e){var t=s.get(e.id);t.errorModel=new p.Model;var n=new g.Field(u.extend({},e,{id:"value",name:"value"})),a=new(n.get("control"))({field:n,model:t});r.append(a.render().$el),i.push(a)})}(r.preferences),!0;l(t,n);break;case"added":if(!r)return!0;r.preferences&&u.isArray(r.preferences)&&u.each(r.preferences,function(e){s.add({id:e.id,value:e.value,category_id:r.id,mid:r.mid,name:e.name}),e.control||(e.control=function(n){switch(n.type){case"text":return"input";case"boolean":return n.options={onText:d("True"),offText:d("False"),onColor:"success",offColor:"primary",size:"mini"},"switch";case"node":return n.options={onText:d("Show"),offText:d("Hide"),onColor:"success",offColor:"primary",size:"mini",width:"56"},"switch";case"integer":case"numeric":return"numeric";case"date":return"datepicker";case"datetime":return"datetimepicker";case"options":var a=[],r=!1;return u.each(n.options,function(e){if("label"in e&&"value"in e){var t={label:e.label,value:e.value};t.label=e.label,t.value=e.value,"preview_src"in e&&(t.preview_src=e.preview_src),a.push(t),e.value==n.value&&(r=!0)}else a.push({label:e,value:e}),e==n.value&&(r=!0)}),n.select2&&1==n.select2.tags&&n.value&&0==r&&a.push({label:n.value,value:n.value}),n.options=a,"select2";case"multiline":return"textarea";case"switch":return"switch";case"keyboardshortcut":return"keyboardShortcut";case"radioModern":return"radioModern";default:return console&&console.warn&&console.warn("Hmm.. We don't know how to render this type - ''"+n.type+"' of control."),"input"}}(e)),e.help_str&&(e.helpMessage=e.help_str)}),r.sortable=!1;break;case"loaded":setTimeout(function(){l(t,null)},300)}return!0};return{main:function(){!function(){if(e){try{e.aciTree("destroy")}catch(e){console.warn(e.stack||e)}e.off("acitree",a),s.reset(),i&&u.each(i,function(e){e.remove()}),i=[],o.empty()}}(),o.append("<div class='pg-el-sm-3 preferences_tree aciTree'></div>").append("<div class='pg-el-sm-9 preferences_content'>"+d("Category is not selected.")+"</div>"),(e=o.find(".preferences_tree")).on("acitree",a),e.aciTree({selectable:!0,expand:!0,ajax:{url:r("preferences.index")},animateRoot:!0,unanimated:!1,show:{duration:75},hide:{duration:75},view:{duration:75}}),h.modifyAcitreeAnimation(b,e.aciTree("api")),this.show()},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-secondary pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:d("Preferences"),url:r("help.static",{filename:"preferences.html"})}},{text:d("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button"},{text:d("Save"),key:13,className:"btn btn-primary fa fa-lg fa-save pg-alertify-button"}],focus:{element:0},options:{padding:!1,overflow:!1,title:d("Preferences"),closableByDimmer:!1,modal:!1,pinnable:!1}}},callback:function(e){if("dialog_help"==e.button.element.name)return e.cancel=!0,void b.showHelp(e.button.element.name,e.button.element.getAttribute("url"),null,null);if(e.button.text==d("Save")){var a=!1;s.updateAll();var r={};u.each(n,function(e,t){var n=b.get_preference_for_id(Number(t));r[n.module]||(r[n.module]=!0),"theme"==n.name&&(a=!0)}),a&&f.confirm(d("Refresh required"),d("A page refresh is required to apply the theme. Do you wish to refresh the page now?"),function(){return location.reload(),!0},function(){return!0}).set("labels",{ok:d("Refresh"),cancel:d("Later")}),b.cache_preferences(r)}},build:function(){this.elements.content.appendChild(o.get(0)),f.pgDialogBuild.apply(this)},hooks:{onshow:function(){}}}}))},show:function(){f.preferencesDlg(!0).resizeTo(e.Browser.stdW.lg,e.Browser.stdH.lg)}}),e.Preferences}.apply(t,a))||(e.exports=r)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a,r;a=[n(0),n(14),n(3),n(2),n(5),n(13)],void 0===(r=function(t,e,n,a,r){return(n=n||window.pgAdmin||{}).Settings||(n.Settings={init:function(){this.initialized||(this.initialized=!0)},show:function(){e.confirm(a("Reset layout"),a("Are you sure you want to reset the current layout? This will cause the application to reload and any un-saved data will be lost."),function(){var e=t('<div id="reloading-indicator"></div>');t("body").append(e),t.ajax({url:r("settings.reset_layout"),type:"DELETE",async:!1}).done(function(){t(window).off("unload"),window.onbeforeunload=null,location.reload(!0)}).fail(function(){console.warn("Something went wrong on server while resetting layout.")})},function(){})}}),n.Settings}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";var a,r;n(30),n(18),n(6),n(31),a=[n(2),n(5),n(0),n(1),n(14),n(15),n(28),n(13),n(9),n(25),n(392),n(393),n(128)],void 0===(r=function(n,e,a,r,i,t,o,s,l,d,c,u,p){if(l.Backup)return l.Backup;var f=t.Model.extend({idAttribute:"id",defaults:{file:void 0,role:void 0,dqoute:!1,verbose:!0,type:void 0},schema:[{id:"file",label:n("Filename"),type:"text",disabled:!1,control:s.FileControl,dialog_type:"create_file",supp_types:["*","sql","backup"]},{id:"role",label:n("Role name"),control:"node-list-by-name",node:"role",select2:{allowClear:!1}},{type:"nested",control:"fieldset",label:n("Miscellaneous"),contentClass:"row",schema:[{id:"verbose",label:n("Verbose messages"),type:"switch",disabled:!1,group:n("Miscellaneous")},{id:"dqoute",label:n("Force double quote on identifiers"),type:"switch",disabled:!1,group:n("Miscellaneous"),controlLabelClassName:"control-label pg-el-sm-6 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-6 pg-el-12"}]},{id:"globals_note",label:n("Note"),text:n("Only objects global to the entire database will be backed up, in PLAIN format"),type:"note"},{}],validate:function(){return null}}),g=t.Model.extend({idAttribute:"id",defaults:{file:void 0,role:void 0,format:"custom",verbose:!0,blobs:!0,encoding:void 0,schemas:[],tables:[],database:void 0},schema:[{id:"file",label:n("Filename"),type:"text",disabled:!1,control:s.FileControl.extend({render:function(){return"directory"==this.model.toJSON().format?this.field.attributes.dialog_type="select_folder":this.field.attributes.dialog_type="create_file",s.InputControl.prototype.render.apply(this,arguments),this}}),dialog_type:"create_file",supp_types:["*","sql","backup"],deps:["format"]},{id:"format",label:n("Format"),type:"text",disabled:!1,control:"select2",select2:{allowClear:!1,width:"100%"},options:[{label:n("Custom"),value:"custom"},{label:n("Tar"),value:"tar"},{label:n("Plain"),value:"plain"},{label:n("Directory"),value:"directory"}],visible:function(e){return!(!r.isUndefined(e.get("type"))&&"server"===e.get("type"))||(setTimeout(function(){e.set("format","plain")},10),!1)}},{id:"ratio",label:n("Compression ratio"),type:"int",min:0,max:9,deps:["format"],disabled:function(e){return"tar"===e.get("format")},visible:function(e){return!(!r.isUndefined(e.get("type"))&&"server"===e.get("type"))}},{id:"encoding",label:n("Encoding"),type:"text",disabled:!1,node:"database",control:"node-ajax-options",url:"get_encodings",visible:function(e){if(r.isUndefined(e.get("type"))||"server"!==e.get("type"))return!0;var t=l.tree,n=t.selected();return 11e4<=(n&&1==n.length?t.itemData(n):void 0).version}},{id:"no_of_jobs",label:n("Number of jobs"),type:"int",deps:["format"],disabled:function(e){return!("directory"===e.get("format"))},visible:function(e){return!(!r.isUndefined(e.get("type"))&&"server"===e.get("type"))}},{id:"role",label:n("Role name"),control:"node-list-by-name",node:"role",select2:{allowClear:!1}},{id:"server_note",label:n("Note"),text:n("The backup format will be PLAIN"),type:"note",visible:function(e){return"server"===e.get("type")}},{type:"nested",control:"fieldset",label:n("Sections"),group:n("Dump options"),contentClass:"row",schema:[{id:"pre_data",label:n("Pre-data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:n("Sections"),deps:["only_data","only_schema"],disabled:function(e){return e.get("only_data")||e.get("only_schema")}},{id:"data",label:n("Data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:n("Sections"),deps:["only_data","only_schema"],disabled:function(e){return e.get("only_data")||e.get("only_schema")}},{id:"post_data",label:n("Post-data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:n("Sections"),deps:["only_data","only_schema"],disabled:function(e){return e.get("only_data")||e.get("only_schema")}}],visible:function(e){return!(!r.isUndefined(e.get("type"))&&"server"===e.get("type"))}},{type:"nested",control:"fieldset",label:n("Type of objects"),group:n("Dump options"),contentClass:"row",schema:[{id:"only_data",label:n("Only data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:n("Type of objects"),deps:["pre_data","data","post_data","only_schema"],disabled:function(e){return e.get("pre_data")||e.get("data")||e.get("post_data")||e.get("only_schema")}},{id:"only_schema",label:n("Only schema"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:n("Type of objects"),deps:["pre_data","data","post_data","only_data"],disabled:function(e){return e.get("pre_data")||e.get("data")||e.get("post_data")||e.get("only_data")}},{id:"blobs",label:n("Blobs"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Type of objects"),visible:function(e){return!(!r.isUndefined(e.get("type"))&&"server"===e.get("type"))||(setTimeout(function(){e.set("blobs",!1)},10),!1)}}]},{type:"nested",control:"fieldset",label:n("Do not save"),group:n("Dump options"),contentClass:"row",schema:[{id:"dns_owner",label:n("Owner"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Do not save")},{id:"dns_privilege",label:n("Privilege"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Do not save")},{id:"dns_tablespace",label:n("Tablespace"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Do not save")},{id:"dns_unlogged_tbl_data",label:n("Unlogged table data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Do not save")},{id:"no_comments",label:n("Comments"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Do not save"),visible:function(){var e=l.tree,t=e.selected(),n=t&&1==t.length?e.itemData(t):void 0;return 11e4<=l.Nodes[n._type].getTreeNodeHierarchy(t).server.version}}]},{type:"nested",control:"fieldset",label:n("Queries"),group:n("Dump options"),contentClass:"row",schema:[{id:"use_column_inserts",label:n("Use Column Inserts"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Queries")},{id:"use_insert_commands",label:n("Use Insert Commands"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Queries")},{id:"include_create_database",label:n("Include CREATE DATABASE statement"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Queries"),visible:function(e){return!(!r.isUndefined(e.get("type"))&&"server"===e.get("type"))}},{id:"include_drop_database",label:n("Include DROP DATABASE statement"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:n("Queries"),deps:["only_data"],disabled:function(e){return!!e.get("only_data")&&(setTimeout(function(){e.set("include_drop_database",!1)},10),!0)}},{id:"load_via_partition_root",label:n("Load Via Partition Root"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Queries"),visible:function(e){if(!r.isUndefined(e.get("type"))&&"server"===e.get("type"))return!1;var t=l.tree,n=t.selected(),a=n&&1==n.length?t.itemData(n):void 0;return 11e4<=l.Nodes[a._type].getTreeNodeHierarchy(n).server.version}}]},{type:"nested",control:"fieldset",label:n("Disable"),group:n("Dump options"),contentClass:"row",schema:[{id:"disable_trigger",label:n("Trigger"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:n("Disable"),deps:["only_data"],disabled:function(e){return!e.get("only_data")}},{id:"disable_quoting",label:n("$ quoting"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Disable")}]},{type:"nested",control:"fieldset",label:n("Miscellaneous"),group:n("Dump options"),contentClass:"row",schema:[{id:"with_oids",label:n("With OID(s)"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",deps:["use_column_inserts","use_insert_commands"],group:n("Miscellaneous"),disabled:function(e){return!(!e.get("use_column_inserts")&&!e.get("use_insert_commands"))&&(setTimeout(function(){e.set("with_oids",!1)},10),!0)}},{id:"verbose",label:n("Verbose messages"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Miscellaneous")},{id:"dqoute",label:n("Force double quote on identifiers"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Miscellaneous")},{id:"use_set_session_auth",label:n("Use SET SESSION AUTHORIZATION"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Miscellaneous")}]}],validate:function(){return null}});return l.Backup={init:function(){if(!this.initialized){this.initialized=!0;for(var e=[{name:"backup_global",module:this,applies:["tools"],callback:"start_backup_global",priority:12,label:n("Backup Globals..."),icon:"fa fa-floppy-o",enable:c.menuEnabledServer},{name:"backup_server",module:this,applies:["tools"],callback:"start_backup_server",priority:12,label:n("Backup Server..."),icon:"fa fa-floppy-o",enable:c.menuEnabledServer},{name:"backup_global_ctx",module:this,node:"server",applies:["context"],callback:"start_backup_global",priority:12,label:n("Backup Globals..."),icon:"fa fa-floppy-o",enable:c.menuEnabledServer},{name:"backup_server_ctx",module:this,node:"server",applies:["context"],callback:"start_backup_server",priority:12,label:n("Backup Server..."),icon:"fa fa-floppy-o",enable:c.menuEnabledServer},{name:"backup_object",module:this,applies:["tools"],callback:"backup_objects",priority:11,label:n("Backup..."),icon:"fa fa-floppy-o",enable:p.enabled.bind(null,l.treeMenu,c.backupSupportedNodes)}],t=0;t<c.backupSupportedNodes.length;t++)e.push({name:"backup_"+c.backupSupportedNodes[t],node:c.backupSupportedNodes[t],module:this,applies:["context"],callback:"backup_objects",priority:11,label:n("Backup..."),icon:"fa fa-floppy-o",enable:p.enabled.bind(null,l.treeMenu,c.backupSupportedNodes)});return l.add_menus(e),this}},start_backup_global:function(e,t){new u.BackupDialog(l,a,i,f).draw(e,t,{globals:!0},l.stdW.md,l.stdH.md)},start_backup_server:function(e,t){new u.BackupDialog(l,a,i,g).draw(e,t,{server:!0},l.stdW.md,l.stdH.md)},backup_objects:function(e,t){new u.BackupDialog(l,a,i,g).draw(e,t,null,l.stdW.md,l.stdH.md)}},l.Backup}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.menuEnabledServer=function(e){return(0,a.isValidTreeNodeData)(e)&&function(e){return"server"===e._type&&e.connected}(e)},t.backupSupportedNodes=void 0;var a=n(119);t.backupSupportedNodes=["database","schema","table","partition"]},function(e,u,g){"use strict";(function(n){g(21),g(26),g(27),g(19),g(155),g(7),g(156),g(157),g(12),g(24),g(22),Object.defineProperty(u,"__esModule",{value:!0}),u.BackupDialog=void 0;var p=t(g(2)),i=t(g(13)),e=g(261),a=t(g(5)),f=t(g(70));function t(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(){function u(e,t,n,a){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:i.default;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),s(this,l(u).call(this,"Backup Error","<div class='backup_dialog'></div>",e,t,n,a,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e.Dialog),function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(u,[{key:"url_for_utility_exists",value:function(e,t){return(0,a.default)("backup.utility_exists",{sid:e,backup_obj_type:null==t?"objects":"servers"})}},{key:"draw",value:function(e,n,a,t,r){var i=3<arguments.length&&void 0!==t?t:0,o=4<arguments.length&&void 0!==r?r:0,s=this.retrieveAncestorOfTypeServer(n);if(s&&this.hasBinariesConfiguration(s)){var l="database"==s._type?s._pid:s._id,d=this.url_for_utility_exists(l,a),c=this;f.default.get(d).then(function(e){if(e.data.success){var t=u.typeOfDialog(a);if(c.canExecuteOnCurrentDatabase(n))c.createOrGetDialog(u.dialogTitle(t),t)(!0).resizeTo(i,o)}else c.alertify.alert((0,p.default)("Utility not found"),e.data.errormsg)}).catch(function(){c.alertify.alert((0,p.default)("Utility not found"),(0,p.default)("Failed to fetch Utility information"))})}}},{key:"dialogName",value:function(e){return"backup_objects"===e?e:"BackupDialog_"+e}}],[{key:"typeOfDialog",value:function(e){if(null===e)return"backup_objects";var t="server";return!n.isUndefined(e.globals)&&e.globals&&(t="globals"),t}},{key:"dialogTitle",value:function(e){return"backup_objects"===e?null:"globals"===e?(0,p.default)("Backup Globals..."):(0,p.default)("Backup Server...")}}]),u}();u.BackupDialog=c}).call(this,g(1))},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(21),n(26),n(27),n(19),n(7),n(32),n(12),n(24),n(49),n(22),Object.defineProperty(t,"__esModule",{value:!0}),t.DialogFactory=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,t&&t.set(e,n);return n}(n(395)),r=n(396);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function o(e,t,n,a,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.pgBrowser=e,this.jquery=t,this.alertify=n,this.dialogModel=a,this.backform=r,this.dialogContainerSelector=i}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(o,[{key:"create",value:function(e,t){return"restore"===t?this.createRestoreDialog(e,t):this.createBackupDialog(e,t)}},{key:"createRestoreDialog",value:function(e,t){return new r.RestoreDialogWrapper(this.dialogContainerSelector,e,t,this.jquery,this.pgBrowser,this.alertify,this.dialogModel,this.backform)}},{key:"createBackupDialog",value:function(e,t){return new a.BackupDialogWrapper(this.dialogContainerSelector,e,t,this.jquery,this.pgBrowser,this.alertify,this.dialogModel,this.backform)}}]),o}();t.DialogFactory=l},function(e,t,n){"use strict";n(21),n(26),n(27),n(36),n(19),n(30),n(11),n(155),n(7),n(156),n(157),n(12),n(24),n(22),n(31),Object.defineProperty(t,"__esModule",{value:!0}),t.BackupDialogWrapper=void 0;var c=n(57),u=i(n(70)),p=i(n(2)),f=i(n(5)),a=i(n(1)),r=n(262);function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function g(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(){function d(e,t,n,a,r,i,o,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(l=g(this,b(d).call(this,e,t,a,r,i,o,s))).typeOfDialog=n,l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,r.DialogWrapper),function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(d,[{key:"main",value:function(e){this.set("title",e)}},{key:"setup",value:function(){var e;return{buttons:[{text:"",className:"btn btn-secondary pull-left fa fa-info pg-alertify-icon-button",attrs:{name:"object_help",type:"button",url:"backup.html",label:(0,p.default)("Backup")}},{text:"",key:112,className:"btn btn-secondary pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,p.default)("Backup"),url:(0,f.default)("help.static",{filename:(e=this.typeOfDialog,"globals"==e?"backup_globals_dialog.html":"server"==e?"backup_server_dialog.html":"backup_dialog.html")})}},{text:(0,p.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button","data-btn-name":"cancel"},{text:(0,p.default)("Backup"),key:13,className:"btn btn-primary fa fa-lg fa-save pg-alertify-button","data-btn-name":"backup"}],options:{title:this.dialogTitle,padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}}},{key:"prepare",value:function(){this.disableBackupButton();var e=this.jquery(this.dialogContainerSelector),t=this.getSelectedNode(),n=this.getSelectedNodeData(t);if(n){var a=this.pgBrowser.Nodes[n._type];if(null===this.dialogTitle){var r="Backup (".concat(a.label,": ").concat(n.label,")");this.main(r)}var i=(0,c.getTreeNodeHierarchyFromElement)(this.pgBrowser,t),o=this.createDialog(a,i,this.typeOfDialog,e);this.addAlertifyClassToBackupNodeChildNodes(),o.render(),this.elements.content.appendChild(e.get(0)),this.focusOnDialog(this),this.setListenersForFilenameChanges()}}},{key:"callback",value:function(e){var t=this.getSelectedNode(),n=this.getSelectedNodeData(t),a=n&&this.pgBrowser.Nodes[n._type];if(this.wasHelpButtonPressed(e))return e.cancel=!0,void this.pgBrowser.showHelp(e.button.element.name,e.button.element.getAttribute("url"),a,t.getHtmlIdentifier());if(this.wasBackupButtonPressed(e)){if(!n)return;var r=this.retrieveServerIdentifier(a,t),i=this,o="backup.create_server_job";"backup_objects"===this.typeOfDialog&&(o="backup.create_object_job");var s=(0,f.default)(o,{sid:r}),l=(0,c.getTreeNodeHierarchyFromElement)(this.pgBrowser,t);this.setExtraParameters(t,l),u.default.post(s,this.view.model.toJSON()).then(function(e){e.data.success?(i.alertify.success((0,p.default)("Backup job created."),5),i.pgBrowser.Events.trigger("pgadmin-bgprocess:created",i)):i.alertify.alert((0,p.default)("Backup job creation failed."),e.data.errormsg)}).catch(function(e){try{var t=e.response.data;i.alertify.alert((0,p.default)("Backup job failed."),t.errormsg)}catch(e){console.warn(e.stack||e)}})}}},{key:"addAlertifyClassToBackupNodeChildNodes",value:function(){this.jquery(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties")}},{key:"getSelectedNode",value:function(){var e=this.pgBrowser.treeMenu,t=e.selected();return t?e.findNodeByDomElement(t):void 0}},{key:"disableBackupButton",value:function(){this.__internal.buttons[3].element.disabled=!0}},{key:"enableBackupButton",value:function(){this.__internal.buttons[3].element.disabled=!1}},{key:"createDialog",value:function(e,t,n,a){var r={};"backup_objects"!==n&&(r.type=n);var i=new this.dialogModel(r,{node_info:t}),o=this.backform.generateViewSchema(t,i,"create",e,t.server,!0);return this.view=new this.backform.Dialog({el:a,model:i,schema:o})}},{key:"retrieveServerIdentifier",value:function(e,t){return(0,c.getTreeNodeHierarchyFromElement)(this.pgBrowser,t).server._id}},{key:"setListenersForFilenameChanges",value:function(){var e=this;this.view.model.on("change",function(){a.default.isUndefined(this.get("file"))||""===this.get("file")?(e.disableBackupButton(),this.errorModel.set("file",(0,p.default)("Please provide a filename"))):(this.errorModel.clear(),e.enableBackupButton())})}},{key:"setExtraParameters",value:function(e,t){if("backup_objects"===this.typeOfDialog){this.view.model.set("database",t.database._label);var n=e.getData();"schema"===n._type&&this.view.model.set("schemas",[n._label]),"table"!==n._type&&"partition"!==n._type||this.view.model.set("tables",[[t.schema._label,n._label]]),a.default.isEmpty(this.view.model.get("ratio"))&&this.view.model.unset("ratio")}}},{key:"wasBackupButtonPressed",value:function(e){return"backup"===e.button["data-btn-name"]}}]),d}();t.BackupDialogWrapper=d},function(e,t,n){"use strict";n(21),n(26),n(27),n(19),n(30),n(11),n(155),n(7),n(156),n(157),n(12),n(24),n(22),n(31),Object.defineProperty(t,"__esModule",{value:!0}),t.RestoreDialogWrapper=void 0;var d=n(57),c=i(n(70)),a=i(n(1)),u=i(n(2)),p=i(n(5)),r=n(262);function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(){function l(e,t,n,a,r,i,o,s){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),f(this,g(l).call(this,e,t,a,r,i,o,s))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(l,r.DialogWrapper),function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(l,[{key:"main",value:function(e,t,n,a){this.set("title",e),this.setting("pg_node",a),this.setting("pg_item",t),this.setting("pg_item_data",n)}},{key:"setup",value:function(){return{buttons:[{text:"",className:"btn btn-secondary pull-left fa fa-info pg-alertify-icon-button",attrs:{name:"object_help",type:"button",url:"backup.html",label:(0,u.default)("Restore")}},{text:"",key:112,className:"btn btn-secondary pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,u.default)("Restore"),url:(0,p.default)("help.static",{filename:"restore_dialog.html"})}},{text:(0,u.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button",restore:!1,"data-btn-name":"cancel"},{text:(0,u.default)("Restore"),key:13,className:"btn btn-primary fa fa-upload pg-alertify-button",restore:!0,"data-btn-name":"restore"}],options:{title:this.dialogTitle,padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}}},{key:"prepare",value:function(){this.disableRestoreButton();var e=this.jquery(this.dialogContainerSelector),t=this.getSelectedNode(),n=this.getSelectedNodeData(t);if(n){var a=this.pgBrowser.Nodes[n._type],r=(0,d.getTreeNodeHierarchyFromElement)(this.pgBrowser,t),i=this.createDialog(a,r,e);this.addAlertifyClassToRestoreNodeChildNodes(),i.render(),this.elements.content.appendChild(e.get(0)),this.focusOnDialog(this),this.setListenersForFilenameChanges()}}},{key:"callback",value:function(e){var t=this.getSelectedNode(),n=this.getSelectedNodeData(t),a=n&&this.pgBrowser.Nodes[n._type];if(this.wasHelpButtonPressed(e))return e.cancel=!0,void this.pgBrowser.showHelp(e.button.element.name,e.button.element.getAttribute("url"),a,t.getHtmlIdentifier());if(this.wasRestoreButtonPressed(e)){if(!n)return;var r=this.retrieveServerIdentifier(a,t),i=this,o=(0,p.default)("restore.create_job",{sid:r}),s=(0,d.getTreeNodeHierarchyFromElement)(this.pgBrowser,t);this.setExtraParameters(t,s),c.default.post(o,this.view.model.toJSON()).then(function(e){e.data.success?(i.alertify.success((0,u.default)("Restore job created."),5),i.pgBrowser.Events.trigger("pgadmin-bgprocess:created",i)):i.alertify.alert((0,u.default)("Restore job creation failed."),e.data.errormsg)}).catch(function(e){try{var t=e.response.data;i.alertify.alert((0,u.default)("Restore job failed."),t.errormsg)}catch(e){console.warn(e.stack||e)}})}}},{key:"addAlertifyClassToRestoreNodeChildNodes",value:function(){this.jquery(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties")}},{key:"getSelectedNode",value:function(){var e=this.pgBrowser.treeMenu,t=e.selected();return t?e.findNodeByDomElement(t):void 0}},{key:"disableRestoreButton",value:function(){this.__internal.buttons[3].element.disabled=!0}},{key:"enableRestoreButton",value:function(){this.__internal.buttons[3].element.disabled=!1}},{key:"createDialog",value:function(e,t,n){var a=new this.dialogModel({node_data:e},{node_info:t}),r=this.backform.generateViewSchema(t,a,"create",e,t.server,!0);return this.view=new this.backform.Dialog({el:n,model:a,schema:r})}},{key:"retrieveServerIdentifier",value:function(e,t){return(0,d.getTreeNodeHierarchyFromElement)(this.pgBrowser,t).server._id}},{key:"setListenersForFilenameChanges",value:function(){var e=this;this.view.model.on("change",function(){a.default.isUndefined(this.get("file"))||""===this.get("file")?(e.disableRestoreButton(),this.errorModel.set("file",(0,u.default)("Please provide a filename"))):(this.errorModel.clear(),e.enableRestoreButton())})}},{key:"setExtraParameters",value:function(e,t){if(this.view.model.set("database",t.database._label),!this.view.model.get("custom")){var n=e.getData();switch(n._type){case"schema":this.view.model.set("schemas",[n._label]);break;case"table":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("tables",[n._label]);break;case"function":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("functions",[n._label]);break;case"index":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("indexes",[n._label]);break;case"trigger":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("triggers",[n._label]);break;case"trigger_func":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("trigger_funcs",[n._label])}}}},{key:"wasRestoreButtonPressed",value:function(e){return"restore"===e.button["data-btn-name"]}}]),l}();t.RestoreDialogWrapper=l},function(e,t,n){"use strict";var a,r;n(30),n(18),n(31),a=[n(2),n(5),n(0),n(1),n(15),n(14),n(9),n(28),n(13),n(25),n(398),n(128),n(399)],void 0===(r=function(n,e,a,t,r,i,o,s,l,d,c,u,p){if(o.Restore)return o.Restore;var f=r.Model.extend({idAttribute:"id",defaults:{custom:!1,file:void 0,role:void 0,format:"custom",verbose:!0,blobs:!0,encoding:void 0,database:void 0,schemas:void 0,tables:void 0,functions:void 0,triggers:void 0,trigger_funcs:void 0,indexes:void 0},initialize:function(e){var t=e.node_data.type;t&&("function"!==t&&"index"!==t&&"trigger"!==t||this.set({only_schema:!0},{silent:!0}),"table"===t&&this.set({only_data:!0},{silent:!0}),"function"!==t&&"trigger_function"!==t||this.set({clean:!0},{silent:!0})),r.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"format",label:n("Format"),type:"text",disabled:!1,control:"select2",select2:{allowClear:!1,width:"100%"},options:[{label:n("Custom or tar"),value:"custom"},{label:n("Directory"),value:"directory"}]},{id:"file",label:n("Filename"),type:"text",disabled:!1,control:l.FileControl.extend({render:function(){return"directory"==this.model.toJSON().format?this.field.attributes.dialog_type="select_folder":this.field.attributes.dialog_type="select_file",l.InputControl.prototype.render.apply(this,arguments),this}}),dialog_type:"select_file",supp_types:["*","backup","sql","patch"],deps:["format"]},{id:"no_of_jobs",label:n("Number of jobs"),type:"int"},{id:"role",label:n("Role name"),control:"node-list-by-name",node:"role",select2:{allowClear:!1}},{type:"nested",control:"fieldset",label:n("Sections"),group:n("Restore options"),contentClass:"row",schema:[{id:"pre_data",label:n("Pre-data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:n("Sections"),deps:["only_data","only_schema"],disabled:function(e){return"function"!==this.node.type&&"table"!==this.node.type&&"trigger"!==this.node.type&&"trigger_function"!==this.node.type&&(e.get("only_data")||e.get("only_schema"))}},{id:"data",label:n("Data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:n("Sections"),deps:["only_data","only_schema"],disabled:function(e){return"function"!==this.node.type&&"table"!==this.node.type&&"trigger"!==this.node.type&&"trigger_function"!==this.node.type&&(e.get("only_data")||e.get("only_schema"))}},{id:"post_data",label:n("Post-data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:n("Sections"),deps:["only_data","only_schema"],disabled:function(e){return"function"!==this.node.type&&"table"!==this.node.type&&"trigger"!==this.node.type&&"trigger_function"!==this.node.type&&(e.get("only_data")||e.get("only_schema"))}}]},{type:"nested",control:"fieldset",label:n("Type of objects"),group:n("Restore options"),contentClass:"row",schema:[{id:"only_data",label:n("Only data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:n("Type of objects"),deps:["pre_data","data","post_data","only_schema"],disabled:function(e){return"database"!==this.node.type&&"schema"!==this.node.type||e.get("pre_data")||e.get("data")||e.get("post_data")||e.get("only_schema")}},{id:"only_schema",label:n("Only schema"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:n("Type of objects"),deps:["pre_data","data","post_data","only_data"],disabled:function(e){return"database"!==this.node.type&&"schema"!==this.node.type||e.get("pre_data")||e.get("data")||e.get("post_data")||e.get("only_data")}}]},{type:"nested",control:"fieldset",label:n("Do not save"),group:n("Restore options"),contentClass:"row",schema:[{id:"dns_owner",label:n("Owner"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Do not save")},{id:"dns_privilege",label:n("Privilege"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Do not save")},{id:"dns_tablespace",label:n("Tablespace"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Do not save")},{id:"no_comments",label:n("Comments"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Do not save"),visible:function(){var e=o.tree,t=e.selected(),n=t&&1==t.length?e.itemData(t):void 0;return 11e4<=o.Nodes[n._type].getTreeNodeHierarchy(t).server.version}}]},{type:"nested",control:"fieldset",label:n("Queries"),group:n("Restore options"),contentClass:"row",schema:[{id:"include_create_database",label:n("Include CREATE DATABASE statement"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Queries")},{id:"clean",label:n("Clean before restore"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:n("Queries"),disabled:function(){return"function"===this.node.type||"trigger_function"===this.node.type}},{id:"single_transaction",label:n("Single transaction"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Queries")}]},{type:"nested",control:"fieldset",label:n("Disable"),group:n("Restore options"),contentClass:"row",schema:[{id:"disable_trigger",label:n("Trigger"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:n("Disable")},{id:"no_data_fail_table",label:n("No data for Failed Tables"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Disable")}]},{type:"nested",control:"fieldset",label:n("Miscellaneous / Behavior"),group:n("Restore options"),contentClass:"row",schema:[{id:"verbose",label:n("Verbose messages"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Miscellaneous / Behavior")},{id:"use_set_session_auth",label:n("Use SET SESSION AUTHORIZATION"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Miscellaneous / Behavior")},{id:"exit_on_error",label:n("Exit on error"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:n("Miscellaneous / Behavior")}]}],validate:function(){return null}});return o.Restore={init:function(){if(!this.initialized){this.initialized=!0;for(var e=[{name:"restore_object",module:this,applies:["tools"],callback:"restore_objects",priority:13,label:n("Restore..."),icon:"fa fa-upload",enable:u.enabled.bind(null,o.treeMenu,c.restoreSupportedNodes)}],t=0;t<c.restoreSupportedNodes.length;t++)e.push({name:"restore_"+c.restoreSupportedNodes[t],node:c.restoreSupportedNodes[t],module:this,applies:["context"],callback:"restore_objects",priority:13,label:n("Restore..."),icon:"fa fa-upload",enable:u.enabled.bind(null,o.treeMenu,c.restoreSupportedNodes)});return o.add_menus(e),this}},restore_objects:function(e,t){new p.RestoreDialog(o,a,i,f).draw(e,t,o.stdW.md,o.stdH.md)}},o.Restore}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.restoreSupportedNodes=void 0;t.restoreSupportedNodes=["database","schema","table","function","trigger","index","partition"]},function(e,t,n){"use strict";n(21),n(26),n(27),n(19),n(155),n(7),n(156),n(157),n(12),n(24),n(22),Object.defineProperty(t,"__esModule",{value:!0}),t.RestoreDialog=void 0;var d=i(n(2)),c=n(25),o=i(n(13)),a=n(261),r=i(n(5)),u=i(n(70));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(){function i(e,t,n,a){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:o.default;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),p(this,f(i).call(this,"Restore Error","<div class='restore_dialog'></div>",e,t,n,a,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(i,a.Dialog),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(i,[{key:"url_for_utility_exists",value:function(e){return(0,r.default)("restore.utility_exists",{sid:e})}},{key:"draw",value:function(e,i,o,s){var t=this.retrieveAncestorOfTypeServer(i);if(t&&this.hasBinariesConfiguration(t)){var n="database"==t._type?t._pid:t._id,a=this.url_for_utility_exists(n),l=this;u.default.get(a).then(function(e){if(e.data.success){if(l.canExecuteOnCurrentDatabase(i)){var t=i||l.pgBrowser.treeMenu.selected(),n=l.pgBrowser.treeMenu.findNodeByDomElement(t).getData(),a=l.pgBrowser.Nodes[n._type];if(a){var r=(0,c.sprintf)((0,d.default)("Restore (%s: %s)"),a.label,n.label);l.createOrGetDialog(r,"restore"),l.alertify.pg_restore(r,t,n,a).resizeTo(o,s)}}}else l.alertify.alert((0,d.default)("Utility not found"),e.data.errormsg)}).catch(function(){l.alertify.alert((0,d.default)("Utility not found"),(0,d.default)("Failed to fetch Utility information"))})}}},{key:"dialogName",value:function(){return"pg_restore"}}]),i}();t.RestoreDialog=b},function(e,t,n){"use strict";var a,r;n(10),n(16),n(95),n(50),n(30),n(18),n(11),n(4),n(8),n(31),a=[n(2),n(5),n(0),n(1),n(15),n(14),n(28),n(13),n(9),n(80),n(401),n(128),n(153),n(144),n(54),n(402)],void 0===(r=function(D,S,j,N,T,E,P,O,M,A,n,a){if(M.GrantWizard)return M.GrantWizard;var B=A.Model.extend({defaults:{selected:!1,icon:"icon-unknown",name:void 0,name_with_args:void 0,nspname:void 0,proargs:void 0,object_type:void 0,object_id:void 0},idAttribute:"object_id",toJSON:function(){var e=A.Model.prototype.toJSON.apply(this);return delete e.icon,e},parse:function(e){return e.object_id=e.name_with_args,N.isUndefined(e.object_type)||"Function"!=e.object_type&&"Trigger Function"!=e.object_type&&"Procedure"!=e.object_type?e.name_with_args=e.name:e.name_with_args=e.name+"("+(void 0!==e.proargs?e.proargs:"")+")",e},validate:function(){var e,t={},n=this.get("objects").toJSON();return N.isEmpty(n)?(t.selected=D("Please select any database object."),e=e||t.selected,this.errorModel.set("selected",e),e):(this.errorModel.unset("selected"),null)}}),I=[{name:"selected",cell:P.Extension.SelectRowCell.extend({render:function(){this.$el.empty().append('<input type="checkbox" />'),this.delegateEvents();var e=this.column.get("name");return this.model&&this.model.has(e)&&this.model.get(e)&&(this.$el.parent().toggleClass("selected",!0),this.model.trigger("backgrid:selected",this.model,!0)),this}}),headerCell:"select-all"},{name:"object_type",label:D("Object Type"),editable:!1,cell:P.Cell.extend({render:function(){return P.Cell.prototype.render.apply(this,arguments),this.$el.addClass(this.model.get("icon")).css({"padding-left":"24px"}),this}})},{name:"nspname",label:D("Schema"),cell:"string",editable:!1},{name:"name_with_args",label:D("Name"),cell:"string",editable:!1}];return M.GrantWizard={init:function(){if(!this.initialized){this.initialized=!0;for(var e=[{name:"grant_wizard_schema",module:this,applies:["tools"],callback:"start_grant_wizard",priority:14,label:D("Grant Wizard..."),icon:"fa fa-unlock-alt",enable:a.enabled.bind(null,M.treeMenu,n.supportedNodes)}],t=0;t<n.supportedNodes.length;t++)e.push({name:"grant_wizard_schema_context_"+n.supportedNodes[t],node:n.supportedNodes[t],module:this,applies:["context"],callback:"start_grant_wizard",priority:14,label:D("Grant Wizard..."),icon:"fa fa-unlock-alt",enable:a.enabled.bind(null,M.treeMenu,n.supportedNodes)});return M.add_menus(e),this}},start_grant_wizard:function(){E.wizardDialog||E.dialog("wizardDialog",function(){var C=j("<div class='wizard_dlg'></div>");return{main:function(e){this.set("title",e)},setup:function(){return{options:{frameless:!0,resizable:!0,autoReset:!1,maximizable:!1,closable:!1,closableByDimmer:!1,modal:!1,pinnable:!1}}},DbPaginator:function(e){return this.paginator=new P.Extension.Paginator({collection:e,windowSize:8})},DbObjectFilter:function(e){return this.clientSideFilter=new P.Extension.ClientSideFilter({collection:e,placeholder:N("Search by object type or name"),fields:["object_type","name"],wait:150})},updateButtons:function(e){e?j(".wizard-next").prop("disabled",!1):j(".wizard-next").prop("disabled",!0)},onSessionInvalid:function(e){return j(".pg-prop-status-bar .alert-text").html(e),j(".pg-prop-status-bar").css("visibility","visible"),this.updateButtons(!1),!0},onSessionValidated:function(e){j(".pg-prop-status-bar .alert-text").empty(),j(".pg-prop-status-bar").css("visibility","hidden"),this.updateButtons(e)},releaseObjects:function(){var e=this;N.isUndefined(e.dbObjectFilter)||(e.dbObjectFilter.remove(),e.dbObjectFilter=void 0),N.isUndefined(e.clientSideFilter)||(e.clientSideFilter.remove(),e.clientSideFilter=void 0),N.isNull(e.obj_priv)||N.isUndefined(e.obj_priv)||(e.obj_priv=[],delete e.obj_priv),N.isUndefined(e.dbObjectTypePage)||N.isNull(e.dbObjectTypePage)||N.isUndefined(e.dbObjectTypePage.get("model"))||N.isNull(e.dbObjectTypePage.get("model"))||(e.dbObjectTypePage.get("model").clear(),e.dbObjectTypePage.get("view").cleanup(),e.dbObjectTypePage=void 0),N.isUndefined(e.privilegePage)||N.isNull(e.privilegePage)||N.isUndefined(e.privilegePage.get("model"))||N.isNull(e.privilegePage.get("model"))||(e.privilegePage.get("model").clear(),e.privilegePage.get("view").cleanup(),e.privilegePage=void 0),N.isUndefined(e.reviewSQLPage)||N.isNull(e.reviewSQLPage)||N.isUndefined(e.reviewSQLPage.get("model"))||N.isNull(e.reviewSQLPage.get("model"))||(e.reviewSQLPage.get("model").clear(),e.reviewSQLPage=void 0),N.isUndefined(e.sqlControl)||e.sqlControl.remove(),N.isNull(e.privModel)||N.isUndefined(e.privModel)||e.privModel.clear(),N.isNull(e.coll)||N.isUndefined(e.coll)||(e.coll.reset(),e.coll=void 0),N.isNull(e.wizard)||N.isUndefined(e.wizard)||(e.wizard.collection.reset(),e.wizard.curr_page=void 0)},build:function(){this.elements.content.appendChild(C.get(0)),E.pgDialogBuild.apply(this)},get_json_data:function(e,t,n){return j.ajax({async:!1,url:S("grant_wizard.acl",{sid:encodeURI(t),did:encodeURI(n)}),dataType:"json"})},prepare:function(){C.empty().append("<div class='grant_wizard_container'></div>");var e=j(".grant_wizard_container"),t=M.tree,n=t.selected(),a=this.d=n&&1==n.length?t.itemData(n):void 0,r=this.info=M.Node.getTreeNodeHierarchy(n),i=r.server_group._id,o=r.server._id,s=r.database._id,l=a._id,d=a._type.replace("coll-","").replace("materialized_",""),c=this.get_json_data(i,o,s),p=JSON.parse(c.responseText),u=S("grant_wizard.objects",{sid:encodeURI(o),did:encodeURI(s),node_id:encodeURI(l),node_type:encodeURI(d)}),f=S("grant_wizard.apply",{sid:encodeURI(o),did:encodeURI(s)}),g=T.Collection.extend({model:B,url:u}),b=this.coll=new g,h=this;this.msql_url=S("grant_wizard.modified_sql",{sid:encodeURI(o),did:encodeURI(s)}),b.comparator=function(e){return e.get("object_type")},b.sort(),this.dbObjectFilter=this.DbObjectFilter(b),h.privArray=[],b.on("backgrid:selected",function(e,t){e.set("selected",t);var n=e.get("object_type");switch(n){case"Function":case"Trigger Function":n="function";break;case"Procedure":n="procedure";break;case"Table":n="table";break;case"Sequence":n="sequence";break;case"View":case"Materialized View":n="table"}if(t)-1==N.indexOf(h.privArray,n)&&h.privArray.push(n),m.get("objects").add(e,{silent:!0});else{var a=h.privArray.indexOf(n);-1!=a&&h.privArray.splice(a,1),m.get("objects").remove(e)}var r=e.validate.call(m);r?h.onSessionInvalid.call(h,r):h.onSessionValidated.call(h,!0)});var m=new(A.Model.extend({defaults:{objects:void 0,acl:void 0},schema:[{id:"objects",label:D("Objects"),model:B,type:"collection",group:D("Objects")},{id:"acl",label:D("Privileges"),model:M.Node.PrivilegeRoleModel,type:"collection",canAdd:!0,canDelete:!0,control:"unique-col-collection"}],urlRoot:f}))({},{node_info:r});j(".wizard-progress-bar p").show();!function a(){j(".wizard-progress-bar p").removeClass("alert-danger").addClass("alert-info"),j(".wizard-progress-bar p").text(D("Please wait while fetching records...")),b.fetch({success:function(e,t){j(".wizard-progress-bar p").html(""),j(".wizard-progress-bar").hide(),e.set(t.result,{parse:!0}),t&&t.info&&""!==t.info&&(j(".pg-prop-status-bar .alert-text").html(t.info),j(".pg-prop-status-bar").css("visibility","visible"))},error:function(e,t,n){j(".wizard-progress-bar p").removeClass("alert-info").addClass("alert-danger"),j(".wizard-progress-bar p").text(D("Unable to fetch the database objects")),E.pgNotifier(n.textStatus,t,D("Unable to fetch the database objects"),function(e){"CRYPTKEY_SET"===e?a():(j(".wizard-progress-bar p").removeClass("alert-info").addClass("alert-danger"),j(".wizard-progress-bar p").text(e))})},reset:!0},this)}();var _=h.dbObjectTypePage=new M.WizardPage({id:1,page_title:N("Object Selection (step 1 of 3)"),disable_prev:!0,disable_next:!0,show_description:"",show_progress_bar:N("Please wait while fetching records..."),model:m,view:new function(){N.extend(this,{cleanup:function(){this.grid&&(this.grid.remove(),delete this.grid,this.grid=null),this.el&&(j(this.el).remove(),delete this.el)},grid:null,render:function(){var e=j('\n                        <div class="db_objects_container pg-el-xs-12">\n                          <div class="db_objects_header d-flex py-1">\n                            <div>'.concat(N("Please select the objects to grant privileges to from the list below."),'</div>\n                            <div class="db_objects_filter ml-auto">\n                              <div class="input-group">\n                                <div class="input-group-prepend">\n                                  <span class="input-group-text fa fa-search" id="labelSearch"></span>\n                                </div>\n                                <input type="search" class="form-control" id="txtGridSearch" placeholder="Search" aria-label="Search" aria-describedby="labelSearch">\n                              </div>\n                            </div>\n                          </div>\n                          <div class="db_objects_grid"></div>\n                        </div>'));return this.grid&&this.cleanup(),this.grid=new P.Grid({columns:N.clone(I),collection:b,className:"backgrid presentation table table-bordered table-hover object_type_table"}),e.find(".db_objects_grid").append(this.grid.render().$el),h.clientSideFilter.setCustomSearchBox(e.find("#txtGridSearch")),this.el=e,m.get("objects").each(function(e){var t=b.get(e.get("object_id"));t&&b.trigger("backgrid:selected",t,!0)}),b.trigger("backgrid:refresh"),this}})},beforeNext:function(e){return e.options.disable_next=!0,N.isNull(m.get("acl"))||N.isUndefined(m.get("acl"))||0<m.get("acl").length&&e.collection.at(1).set("disable_next",!1),this.view&&(this.view.cleanup(),delete this.view,this.view=null),!0}}),v=h.privilegePage=new M.WizardPage({id:2,page_title:N("Privilege Selection (step 2 of 3)"),show_description:N("Please add the required privileges for the selected objects."),disable_next:!0,model:m,view:new function(){N.extend(this,{render:function(){var t=[];h.privArray=N.uniq(h.privArray),N.each(h.privArray,function(e){h.obj_priv=t=N.union(t,p[e].acl)});var e=h.privModel,n=A.Model.extend({defaults:{acl:void 0},schema:[{id:"acl",label:D("Privileges"),model:M.Node.PrivilegeRoleModel.extend({privileges:t}),uniqueCol:["grantee","grantor"],editable:!0,type:"collection",canAdd:!0,canDelete:!0,control:"unique-col-collection"}]}),a={};if(e){var r=(a=e.toJSON()).acl;if(!N.isUndefined(r)&&0<r.length)for(var i in r){var o,s=r[i].privileges,l=[];for(o in s){var d=s[o];-1==N.indexOf(t,d.privilege_type)&&l.push(o)}for(o in l)s.splice(o,1)}else console.warn("Acls are not defined")}e=h.privModel=new n(a,{node_info:h.info}),h.privModel.startNewSession(),h.privModel.on("pgadmin-session:valid",h.onSessionValidated.bind(h)),h.privModel.on("pgadmin-session:invalid",h.onSessionInvalid.bind(h));var c=O.generateViewSchema(h.info,h.privModel,"create",h.d._type,h.d),u=new O.Field(c[0].fields[0]);return this.privControl=new(u.get("control"))({field:u,model:h.privModel}),{el:this.privControl.render().$el}},cleanup:function(){this.privControl&&(this.privControl.remove(),delete this.privControl,this.privControl=null)}})},beforePrev:function(e){this.view&&(this.view.cleanup(),delete this.view,this.view=null);var t=m.get("objects");return!N.isUndefined(t)&&!N.isEmpty(t)&&0<t.length&&(e.collection.at(0).set("disable_next",!1),e.collection.at(0).set("show_progress_bar","")),m.trigger("backgrid:refresh",m,!1),h.clientSideFilter.render(),!0},beforeNext:function(){return!0},onNext:function(){N.isUndefined(h.privModel)||m.set({acl:h.privModel.get("acl")}),this.view&&(this.view.cleanup(),delete this.view,this.view=null),h.wizard.options.disable_finish=!1,m.trigger("pgadmin-wizard:nextpage:sql",{node_type:d})}}),y=new O.Field({id:"sqltab",label:N("Sql Tab"),control:O.SqlTabControl.extend({initialize:function(){O.SqlTabControl.prototype.initialize.apply(this,arguments),this.msql_url=h.msql_url,this.model.on("pgadmin-wizard:nextpage:sql",this.onWizardNextPageChange,this),this.model.on("pgadmin-wizard:prevpage:sql",this.onWizardPrevPageChange,this)},onWizardNextPageChange:function(){var t=this;j.ajax({url:this.msql_url,type:"GET",cache:!1,data:t.model.toJSON(!0,"GET"),dataType:"json",contentType:"application/json"}).done(function(e){t.sqlCtrl.clearHistory(),t.sqlCtrl.setValue(e.data),t.sqlCtrl.refresh()}).fail(function(){t.model.trigger("pgadmin-view:msql:error")}).always(function(){t.model.trigger("pgadmin-view:msql:fetched")})},remove:function(){h.sqlControl.unbind();var e=h.sqlControl.sqlCtrl.getWrapperElement();j(e).remove(),h.sqlControl.sqlCtrl=void 0}})}),w=h.sqlControl=new(y.get("control"))({field:y,model:m}),x=h.reviewSQLPage=new M.WizardPage({id:3,page_title:N("Final (Review Selection) (step 3 of 3)"),show_description:N("The SQL below will be executed on the database server to grant the selected privileges. Please click on <b>Finish</b> to complete the process."),model:m,view:new function(){var e=w.render().$el;e.addClass("h-100"),this.render=function(){return{el:e}}},beforePrev:function(e){var t=m.get("acl");if(!N.isUndefined(e.collection)&&0<e.collection.models.length)return!N.isUndefined(t)&&!N.isEmpty(t)&&0<t.length?e.collection.at(1).set("disable_next",!1):e.collection.at(1).set("disable_next",!0),!0}}),k=T.Collection.extend({model:M.WizardPage});this.wizardCollection=new k([_,v,x]),h.wizard=new(M.Wizard.extend({options:{title:N("Grant Wizard"),width:"",height:"",curr_page:0,show_left_panel:!1,show_header_cancel_btn:!0,show_header_maximize_btn:!0,disable_finish:!0,dialog_api:this,wizard_help:S("help.static",{filename:"grant_wizard.html"})},onFinish:function(){var e=m,t=e.toJSON("GET");!t||N.isEmpty(t)||N.isUndefined(t.objects)||e.save({},{attrs:t,validate:!1,cache:!1,success:function(){h.releaseObjects(),h.close()},error:function(e,t){E.pgNotifier("error",t,D("Error saving properties")),h.releaseObjects(),h.close()}})},onCancel:function(){h.releaseObjects(),h.close()}}))({collection:this.wizardCollection,el:e,model:m}),h.wizard.render()}}}),E.wizardDialog(!0).resizeTo(M.stdW.lg,M.stdH.lg)}},M.GrantWizard}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.supportedNodes=void 0;t.supportedNodes=["schema","coll-function","coll-sequence","coll-table","coll-view","coll-procedure","coll-mview","database","coll-trigger_function"]},function(e,t,n){"use strict";var a,r;n(10),n(16),n(30),n(6),n(31),a=[n(1),n(0),n(15),n(3),n(9),n(2),n(25)],void 0===(r=function(n,a,e,t,r,i,o){return r.WizardPage=e.Model.extend({defaults:{id:void 0,page_title:void 0,view:void 0,html:void 0,image:void 0,disable_prev:!1,disable_next:!1,disable_cancel:!1,show_progress_bar:"",onLoad:function(){return!0},beforeNext:function(){return!0},onNext:function(){},onBefore:function(){},beforePrev:function(){return!0}}}),r.Wizard=e.View.extend({options:{title:"Wizard",image:"left_panel.png",curr_page:0,disable_next:!1,disable_prev:!1,disable_finish:!1,disable_cancel:!1,show_header_cancel_btn:!1,show_header_maximize_btn:!1,dialog_api:null,height:400,width:650,show_left_panel:!0,wizard_help:""},tmpl:n.template('    <div class="pgadmin-wizard" style="height: <%= this.options.height %>px;    width: <%= this.options.width %>px">      <div class="wizard-header wizard-badge">        <div class="d-flex">          <div>              <h3><span id="main-title"><%= this.options.title %></span> -              <span id="step-title"><%= page_title %></span></h3>          </div>          <% if (this.options.show_header_cancel_btn) { %>            <div class="ml-auto">              <button class="ajs-close wizard-cancel-event pull-right"                title="'+i("Close")+'"></button>              <% if (this.options.show_header_maximize_btn) { %>                <button class="ajs-maximize wizard-maximize-event mr-1 pull-right"                  title="'+i("Maximize")+'"></button>              <% } %>            </div>          <% } %>        </div>      </div>      <div class="wizard-content row m-0">        <% if (this.options.show_left_panel) { %>          <div class="col-sm-3 wizard-left-panel">              <img src="<%= this.options.image %>"                alt="'+i("Left panel logo")+'"></div>        <% } %>        <div class="col-sm-<% if (this.options.show_left_panel) { %>9<% }          else { %>12<% } %> wizard-right-panel">          <% if ( typeof show_description !=  "undefined"){ %>            <div class="wizard-description">              <%= show_description %>            </div>          <% } %>          <div class="wizard-progress-bar"><% if (show_progress_bar) { %>            <p class="alert alert-info col-sm-12"><%= show_progress_bar %></p><% } %>          </div>          <div class="wizard-right-panel_content">          </div>        </div>      </div>      <div class="wizard-footer pg-prop-footer">        <div class="pg-prop-status-bar" style="visibility:hidden">          <div class="error-in-footer">             <div class="d-flex px-2 py-1">               <div class="pr-2">                 <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i>               </div>               <div class="alert-text"></div>               <div class="ml-auto close-error-bar">                 <a class="close-error fa fa-times text-danger"></a>               </div>             </div>           </div>         </div>        <div class="wizard-buttons d-flex">          <div>            <button title = "'+i("Help for this dialog.")+'"              class="btn btn-secondary pull-left wizard-help" <%=this.options.wizard_help ? "" : "disabled" %>>              <span class="fa fa-lg fa-question"></span></button>          </div>          <div class="ml-auto">              <button class="btn btn-secondary wizard-cancel" <%=this.options.disable_cancel ? "disabled" : ""%>>                <i class="fa fa-close"></i>&nbsp;'+i("Cancel")+'</button>              <button class="btn btn-secondary wizard-back" <%=this.options.disable_prev ? "disabled" : ""%>>                <i class="fa fa-backward"></i>&nbsp;'+i("Back")+'</button>              <button class="btn btn-secondary wizard-next" <%=this.options.disable_next ? "disabled" : ""%>>                '+i("Next")+'                &nbsp;<i class="fa fa-forward"></i></button>              <button class="btn btn-primary wizard-finish" <%=this.options.disable_finish ? "disabled" : ""%>>                <i class="fa fa-check"></i>&nbsp;'+i("Finish")+"</button>          </div>        </div>      </div>    </div>"),events:{"click button.wizard-next":"nextPage","click button.wizard-back":"prevPage","click button.wizard-cancel":"onCancel","click button.wizard-cancel-event":"onCancel","click button.wizard-maximize-event":"onMaximize","click button.wizard-finish":"finishWizard","click button.wizard-help":"onDialogHelp","click a.close-error":"closeErrorMsg"},initialize:function(e){this.options=n.extend({},this.options,e.options),this.currPage=this.collection.at(this.options.curr_page).toJSON()},render:function(){var t=this,e=this.currPage;return this.options.disable_next=!!this.options.disable_next||this.evalASFunc(this.currPage.disable_next),this.options.disable_prev=!!this.options.disable_prev||this.evalASFunc(this.currPage.disable_prev),this.options.disable_cancel=!!this.currPage.canCancel||this.evalASFunc(this.currPage.disable_cancel),e.html?e.content=e.html:e.view&&(e.content=e.view.render().el),a(this.el).html(this.tmpl(e)),a(this.el).find(".wizard-right-panel_content").html(e.content),this.onLoad(),setTimeout(function(){var e=a(t.el);o.findAndSetFocus(e)},100),this},nextPage:function(){if(!this.beforeNext())return!1;var e=this.onNext();return e?(this.currPage=this.collection.get(e).toJSON(),this.options.curr_page=this.collection.indexOf(this.collection.get(e))):this.options.curr_page<this.collection.length-1&&(this.options.curr_page=this.options.curr_page+1,this.currPage=this.collection.at(this.options.curr_page).toJSON()),this.enableDisableNext(),this.enableDisablePrev(),this.render()},prevPage:function(){if(!this.beforePrev())return!1;var e=this.onPrev();return e?(this.currPage=this.collection.get(e).toJSON(),this.options.curr_page=this.collection.indexOf(this.collection.get(e))):0<this.options.curr_page&&(this.options.curr_page=this.options.curr_page-1,this.currPage=this.collection.at(this.options.curr_page).toJSON()),this.enableDisableNext(),this.enableDisablePrev(),this.render()},finishWizard:function(){return this.onFinish(),this.remove(),this.off(),delete this.$el,delete this.el,!0},enableDisableNext:function(e){void 0!==e?this.options.disable_next=e:this.options.curr_page>=this.collection.length-1?this.options.disable_next=!0:this.options.disable_next=!1},enableDisablePrev:function(e){void 0!==e?this.options.disable_prev=e:this.options.curr_page<=0?this.options.disable_prev=!0:this.options.disable_prev=!1},closeErrorMsg:function(){a(this.el).find(".pg-prop-status-bar .alert-text").empty(),a(this.el).find(".pg-prop-status-bar").css("visibility","hidden")},beforeNext:function(){return this.evalASFunc(this.currPage.beforeNext)},beforePrev:function(){return this.evalASFunc(this.currPage.beforePrev)},onPrev:function(){return this.evalASFunc(this.currPage.onPrev)},onNext:function(){return this.evalASFunc(this.currPage.onNext)},onLoad:function(){return this.evalASFunc(this.currPage.onLoad)},onFinish:function(){return!0},onCancel:function(){return this.$el.remove(),!0},onMaximize:function(){var e=this.options.dialog_api,t=this.$el.find(".wizard-maximize-event");e&&(e.isMaximized()?(t.removeClass("ajs-maximized"),e.restore()):(t.addClass("ajs-maximized "+t.attr("class")),e.maximize()))},evalASFunc:function(e,t){return t=t||this.currPage,n.isFunction(e)?e.apply(t,[this]):e},onDialogHelp:function(){window.open(this.options.wizard_help,"pgadmin_help")}}),r}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";var a,r;n(10),n(16),n(30),n(18),n(11),n(6),n(31),a=[n(2),n(5),n(0),n(1),n(14),n(3),n(9),n(15),n(56),n(68),n(25),n(404),n(128),n(13),n(28),n(106)],void 0===(r=function(f,g,b,e,h,m,_,t,n,v,y,a,r){var i=(m=m||window.pgAdmin||{}).Tools=m.Tools||{};if(m.Tools.maintenance)return m.Tools.maintenance;var w=t.Model.extend({defaults:{op:"VACUUM",vacuum_full:!1,vacuum_freeze:!1,vacuum_analyze:!1,verbose:!0},initialize:function(e,t){var n=t.node_info;("primary_key"in n||"unique_constraint"in n||"index"in n)&&(this.set("op","REINDEX"),this.set("verbose",!1))},schema:[{id:"op",label:f("Maintenance operation"),cell:"string",type:"radioModern",controlsClassName:"pgadmin-controls col-12 col-sm-8",controlLabelClassName:"control-label col-sm-4 col-12",group:f("Options"),value:"VACUUM",options:[{label:"VACUUM",value:"VACUUM"},{label:"ANALYZE",value:"ANALYZE"},{label:"REINDEX",value:"REINDEX"},{label:"CLUSTER",value:"CLUSTER"}]},{type:"nested",control:"fieldset",label:f("Vacuum"),group:f("Options"),contentClass:"row",schema:[{id:"vacuum_full",group:f("Vacuum"),disabled:"isDisabled",type:"switch",extraToggleClasses:"pg-el-sm-4",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",label:f("FULL"),deps:["op"]},{id:"vacuum_freeze",deps:["op"],disabled:"isDisabled",type:"switch",extraToggleClasses:"pg-el-sm-4",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",label:f("FREEZE"),group:f("Vacuum")},{id:"vacuum_analyze",deps:["op"],disabled:"isDisabled",type:"switch",extraToggleClasses:"pg-el-sm-4",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",label:f("ANALYZE"),group:f("Vacuum")}]},{id:"verbose",group:f("Options"),deps:["op"],type:"switch",label:f("Verbose Messages"),disabled:"isDisabled"}],isDisabled:function(e){var t=this.node_info;switch(this.name){case"vacuum_full":case"vacuum_freeze":case"vacuum_analyze":return"VACUUM"!=e.get("op");case"verbose":return("primary_key"in t||"unique_constraint"in t||"index"in t)&&"REINDEX"==e.get("op")?(setTimeout(function(){e.set("verbose",!1)},10),!0):"REINDEX"==e.get("op");default:return!1}}});return i.maintenance={init:function(){if(!this.initialized){this.initialized=!0;for(var e=[{name:"maintenance",module:this,applies:["tools"],callback:"callback_maintenance",priority:10,label:f("Maintenance..."),icon:"fa fa-wrench",enable:r.enabled.bind(null,_.treeMenu,a.maintenanceSupportedNodes)}],t=0;t<a.maintenanceSupportedNodes.length;t++)e.push({name:"maintenance_context_"+a.maintenanceSupportedNodes[t],node:a.maintenanceSupportedNodes[t],module:this,applies:["context"],callback:"callback_maintenance",priority:10,label:f("Maintenance..."),icon:"fa fa-wrench",enable:r.enabled.bind(null,_.treeMenu,a.maintenanceSupportedNodes)});_.add_menus(e)}},callback_maintenance:function(e,t){for(var n=t||_.tree.selected(),a=null;n;){var r=_.tree.itemData(n);if("server"==r._type){a=r;break}if(!_.tree.hasParent(n)){h.alert(f("Please select server or child node from tree."));break}n=b(_.tree.parent(n))}if(a){var i="pg_bin_dir",o=f("Please configure the PostgreSQL Binary Path in the Preferences dialog.");(a.type&&"ppas"==a.type||"ppas"==a.server_type)&&(i="ppas_bin_dir",o=f("Please configure the EDB Advanced Server Binary Path in the Preferences dialog."));var s=_.get_preference("paths",i);if(s)if(s.value){var c=this,l=_.tree,d=(n=t||l.selected())&&1==n.length?l.itemData(n):void 0;if(d){var u=d&&_.Nodes[d._type];if(0<=u.getTreeNodeHierarchy.apply(u,[n]).database._label.indexOf("="))h.alert(f("Maintenance error"),f("Maintenance job creation failed. Databases with = symbols in the name cannot be maintained using this utility."));else{h.MaintenanceDialog||h.dialog("MaintenanceDialog",function(){return{main:function(e){this.set("title",e)},setup:function(){return{buttons:[{text:"",className:"btn btn-secondary pull-left fa fa-info pg-alertify-icon-button",attrs:{name:"object_help",type:"button",url:"maintenance.html",label:f("Maintenance")}},{text:"",key:112,className:"btn btn-secondary pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:f("Maintenance"),url:g("help.static",{filename:"maintenance_dialog.html"})}},{text:f("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button","data-btn-name":"cancel"},{text:f("OK"),key:13,className:"btn btn-primary fa fa-lg fa-check pg-alertify-button","data-btn-name":"ok"}],options:{modal:0,pinnable:!1,padding:!1,overflow:!1}}},callback:function(e){var t=_.tree.selected(),n=t&&1==t.length?_.tree.itemData(t):void 0,a=n&&_.Nodes[n._type];if("dialog_help"==e.button.element.name||"object_help"==e.button.element.name)return e.cancel=!0,void _.showHelp(e.button.element.name,e.button.element.getAttribute("url"),a,t);if("ok"===e.button["data-btn-name"]){var r=void 0,i=void 0,o=void 0,s=void 0,l=void 0;if(!n)return;var d=a.getTreeNodeHierarchy.apply(a,[t]);null!=d.schema&&(r=d.schema._label),null!=d.partition?i=d.partition._label:null!=d.table&&(i=d.table._label),null!=d.primary_key?o=d.primary_key._label:null!=d.unique_constraint?s=d.unique_constraint._label:null!=d.index&&(l=d.index._label),this.view.model.set({database:d.database._label,schema:r,table:i,primary_key:o,unique_constraint:s,index:l}),b.ajax({url:g("maintenance.create_job",{sid:d.server._id,did:d.database._id}),method:"POST",data:{data:JSON.stringify(this.view.model.toJSON())}}).done(function(e){e.data&&e.data.status?(h.success(e.data.info),_.Events.trigger("pgadmin-bgprocess:created",c)):h.alert(f("Maintenance job creation failed."),e.errormsg)}).fail(function(){h.alert(f("Maintenance job creation failed."))})}},build:function(){h.pgDialogBuild.apply(this)},hooks:{onclose:function(){this.view&&this.view.remove({data:!0,internal:!0,silent:!0})},onshow:function(){var e=b(this.elements.body).find(".tab-content:first > .tab-pane.active:first");y.findAndSetFocus(e)}},prepare:function(){var e=b("<div class='maintenance_dlg'></div>"),t=_.tree,n=t.selected(),a=n&&1==n.length?t.itemData(n):void 0,r=a&&_.Nodes[a._type];if(a){var i=r.getTreeNodeHierarchy.apply(r,[n]),o=new w({},{node_info:i}),s=v.generateViewSchema(i,o,"create",r,i.server,!0),l=this.view=new v.Dialog({el:e,model:o,schema:s});if(b(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),l.render(),"primary_key"==a._type||"unique_constraint"==a._type||"index"==a._type){var d=e.find(".pgadmin-controls label:lt(2)").removeClass("active").addClass("disabled")[1].nextElementSibling;b(d).addClass("active")}l.$el.attr("tabindex",-1),this.elements.content.appendChild(e.get(0))}}}});var p=g("maintenance.utility_exists",{sid:a._id});b.ajax({url:p,type:"GET"}).done(function(e){e.success?h.MaintenanceDialog(f("Maintenance...")).set("resizable",!0).resizeTo(m.Browser.stdW.md,m.Browser.stdH.md):h.alert(f("Utility not found"),e.errormsg)}).fail(function(){h.alert(f("Utility not found"),f("Failed to fetch Utility information"))})}}}else h.alert(f("Configuration required"),o);else h.alert(f("Failed to load preference %s of module %s",i,"paths"))}}},m.Tools.maintenance}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.maintenanceSupportedNodes=void 0;t.maintenanceSupportedNodes=["database","table","primary_key","unique_constraint","index","partition"]},function(e,t,n){"use strict";var a,r;n(10),n(30),n(18),n(11),n(6),n(31),a=[n(2),n(5),n(0),n(1),n(14),n(3),n(9),n(15),n(56),n(68),n(25),n(128),n(13),n(28),n(106)],void 0===(r=function(f,g,b,h,m,_,v,e,t,y,w,n){var a=(_=_||window.pgAdmin||{}).Tools=_.Tools||{};if(_.Tools.import_utility)return _.Tools.import_utility;var x=e.Model.extend({defaults:{is_import:!1,filename:void 0,format:"csv",encoding:void 0,oid:void 0,header:void 0,delimiter:"",quote:'"',escape:"'",null_string:void 0,columns:null,icolumns:[],database:void 0,schema:void 0,table:void 0},schema:[{id:"is_import",label:f("Import/Export"),cell:"switch",type:"switch",group:f("Options"),options:{onText:f("Import"),offText:f("Export"),width:"65"}},{type:"nested",control:"fieldset",label:f("File Info"),group:f("Options"),schema:[{id:"filename",label:f("Filename"),deps:["is_import"],type:"text",control:y.FileControl,group:f("File Info"),dialog_type:"select_file",supp_types:["csv","txt","*"],visible:"importing"},{id:"filename",label:f("Filename"),deps:["is_import"],type:"text",control:y.FileControl,group:f("File Info"),dialog_type:"create_file",supp_types:["csv","txt","*"],visible:"exporting"},{id:"format",label:f("Format"),cell:"string",control:"select2",group:f("File Info"),options:[{label:"binary",value:"binary"},{label:"csv",value:"csv"},{label:"text",value:"text"}],disabled:"isDisabled",select2:{allowClear:!1,width:"100%"}},{id:"encoding",label:f("Encoding"),cell:"string",control:"node-ajax-options",node:"database",url:"get_encodings",first_empty:!0,group:f("File Info")}]},{id:"columns",label:f("Columns to import"),cell:"string",deps:["is_import"],type:"array",first_empty:!1,control:y.NodeListByNameControl.extend({initialize:function(){y.NodeListByNameControl.prototype.initialize.apply(this,arguments);var t=this.field.get("options"),e=[];if(h.isFunction(t))try{var n=t.apply(this);for(var a in n)e.push(n[a].value)}catch(e){t=[],console.warn(e.stack||e)}else for(a in t)e.push(t[a].value);this.model.set("columns",e)}}),transform:function(e){var a=this,r=a.field.get("schema_node"),i=[];return h.each(e,function(e){if("_id"in e&&0<e._id){var t=h.isFunction(r.node_label)?r.node_label.apply(r,[e,a.model,a]):e.label,n=h.isFunction(r.node_image)?r.node_image.apply(r,[e,a.model,a]):r.node_image||"icon-"+r.type;i.push({value:e.label,image:n,label:t})}}),i},node:"column",url:"nodes",group:f("Columns"),select2:{multiple:!0,allowClear:!1,placeholder:f("Columns for importing..."),first_empty:!1,preserveSelectionOrder:!0},visible:"importing",helpMessage:f("An optional list of columns to be copied. If no column list is specified, all columns of the table will be copied.")},{id:"columns",label:f("Columns to export"),cell:"string",deps:["is_import"],type:"array",control:"node-list-by-name",first_empty:!1,node:"column",url:"nodes",group:f("Columns"),select2:{multiple:!0,allowClear:!0,first_empty:!1,placeholder:f("Colums for exporting..."),preserveSelectionOrder:!0},visible:"exporting",transform:function(e){var a=this,r=a.field.get("schema_node"),i=[];return h.each(e,function(e){var t=h.isFunction(r.node_label)?r.node_label.apply(r,[e,a.model,a]):e.label,n=h.isFunction(r.node_image)?r.node_image.apply(r,[e,a.model,a]):r.node_image||"icon-"+r.type;i.push({value:e.label,image:n,label:t})}),i},helpMessage:f("An optional list of columns to be copied. If no column list is specified, all columns of the table will be copied.")},{id:"null_string",label:f("NULL Strings"),cell:"string",type:"text",group:f("Columns"),disabled:"isDisabled",deps:["format"],helpMessage:f("Specifies the string that represents a null value. The default is \\N (backslash-N) in text format, and an unquoted empty string in CSV format. You might prefer an empty string even in text format for cases where you don't want to distinguish nulls from empty strings. This option is not allowed when using binary format.")},{id:"icolumns",label:f("Not null columns"),cell:"string",control:"node-list-by-name",node:"column",group:f("Columns"),deps:["format","is_import"],disabled:"isDisabled",type:"array",first_empty:!1,select2:{multiple:!0,allowClear:!0,first_empty:!1,placeholder:f("Not null columns...")},helpMessage:f("Do not match the specified column values against the null string. In the default case where the null string is empty, this means that empty values will be read as zero-length strings rather than nulls, even when they are not quoted. This option is allowed only in import, and only when using CSV format.")},{type:"nested",control:"fieldset",label:f("Miscellaneous"),group:f("Options"),schema:[{id:"oid",label:f("OID"),cell:"string",type:"switch",group:f("Miscellaneous")},{id:"header",label:f("Header"),cell:"string",type:"switch",group:f("Miscellaneous"),deps:["format"],disabled:"isDisabled"},{id:"delimiter",label:f("Delimiter"),cell:"string",first_empty:!0,type:"text",control:"node-ajax-options",group:f("Miscellaneous"),disabled:"isDisabled",deps:["format"],options:[{label:";",value:";"},{label:",",value:","},{label:"|",value:"|"},{label:"[tab]",value:"[tab]"}],select2:{tags:!0,allowClear:!1,width:"100%",placeholder:f("Select from list...")},helpMessage:f("Specifies the character that separates columns within each row (line) of the file. The default is a tab character in text format, a comma in CSV format. This must be a single one-byte character. This option is not allowed when using binary format.")},{id:"quote",label:f("Quote"),cell:"string",first_empty:!0,deps:["format"],type:"text",control:"node-ajax-options",group:f("Miscellaneous"),disabled:"isDisabled",options:[{label:'"',value:'"'},{label:"'",value:"'"}],select2:{tags:!0,allowClear:!1,width:"100%",placeholder:f("Select from list...")},helpMessage:f("Specifies the quoting character to be used when a data value is quoted. The default is double-quote. This must be a single one-byte character. This option is allowed only when using CSV format.")},{id:"escape",label:f("Escape"),cell:"string",first_empty:!0,deps:["format"],type:"text",control:"node-ajax-options",group:f("Miscellaneous"),disabled:"isDisabled",options:[{label:'"',value:'"'},{label:"'",value:"'"}],select2:{tags:!0,allowClear:!1,width:"100%",placeholder:f("Select from list...")},helpMessage:f("Specifies the character that should appear before a data character that matches the QUOTE value. The default is the same as the QUOTE value (so that the quoting character is doubled if it appears in the data). This must be a single one-byte character. This option is allowed only when using CSV format.")}]}],isDisabled:function(e){switch(this.name){case"quote":case"escape":case"header":return"csv"!=e.get("format");case"icolumns":return"csv"!=e.get("format")||!e.get("is_import");case"null_string":case"delimiter":return"binary"==e.get("format");default:return!1}},importing:function(e){return e.get("is_import")},exporting:function(e){return!e.importing.apply(this,arguments)}});return a.import_utility={init:function(){this.initialized||(this.initialized=!0,v.add_menus([{name:"import",node:"table",module:this,applies:["tools","context"],callback:"callback_import_export",category:"import",priority:10,label:f("Import/Export..."),icon:"fa fa-shopping-cart",enable:n.enabled.bind(null,v.treeMenu,["table"])}]))},callback_import_export:function(e,t){for(var n=t||v.tree.selected(),a=null;n;){var r=v.tree.itemData(n);if("server"==r._type){a=r;break}if(!v.tree.hasParent(n)){m.alert(f("Please select server or child node from tree."));break}n=b(v.tree.parent(n))}if(a){var i="pg_bin_dir",o=f("Please configure the PostgreSQL Binary Path in the Preferences dialog.");(a.type&&"ppas"==a.type||"ppas"==a.server_type)&&(i="ppas_bin_dir",o=f("Please configure the EDB Advanced Server Binary Path in the Preferences dialog."));var s=v.get_preference("paths",i);if(s)if(s.value){var l=v.tree,d=(n=t||l.selected())&&1==n.length?l.itemData(n):void 0,c=d&&v.Nodes[d._type];if(d){var u=c.getTreeNodeHierarchy.apply(c,[n]);m.ImportDialog||m.dialog("ImportDialog",function(){return{main:function(e,t,n,a){this.set("title",e),this.setting("pg_node",t),this.setting("pg_item",n),this.setting("pg_item_data",a)},build:function(){m.pgDialogBuild.apply(this)},setup:function(){return{buttons:[{text:f("Cancel"),key:27,"data-btn-name":"cancel",className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button"},{text:f("OK"),key:13,disable:!0,"data-btn-name":"ok",className:"btn btn-primary fa fa-lg fa-check pg-alertify-button"}],options:{modal:!0,padding:!1,overflow:!1}}},settings:{pg_node:null,pg_item:null,pg_item_data:null},callback:function(e){if("ok"===e.button["data-btn-name"]){var t=this.settings.pg_node,n=this.settings.pg_item,a=t.getTreeNodeHierarchy.apply(t,[n]);this.view.model.set({database:a.database._label,schema:a.schema._label,table:a.table._label});var r=this;b.ajax({url:g("import_export.create_job",{sid:a.server._id}),method:"POST",data:{data:JSON.stringify(this.view.model.toJSON())}}).done(function(e){e.success?(m.success(f("Import/Export job created."),5),v.Events.trigger("pgadmin-bgprocess:created",r)):m.alert(f("Import/Export job creation failed."),e.errormsg)}).fail(function(e){try{var t=JSON.parse(e.responseText);m.alert(f("Import/Export job failed."),t.errormsg)}catch(e){console.warn(e.stack||e)}})}},hooks:{onclose:function(){this.view&&this.view.remove({data:!0,internal:!0,silent:!0})},onupdate:function(e,t,n){switch(e){case"resizable":n?this.elements.content.removeAttribute("style"):this.elements.content.style.minHeight="inherit"}},onshow:function(){var e=b(this.elements.body).find(".tab-content:first > .tab-pane.active:first");w.findAndSetFocus(e)}},prepare:function(){var e=this;this.__internal.buttons[1].element.disabled=!0;var t=b("<div class='import_dlg'></div>"),n=this.settings.pg_node,a=this.settings.pg_item,r=n.getTreeNodeHierarchy.apply(n,[a]),i=new x({},{node_info:r}),o=y.generateViewSchema(r,i,"create",c,r.server,!0),s=this.view=new y.Dialog({el:t,model:i,schema:o});b(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),s.render(),this.elements.content.appendChild(t.get(0)),this.view.model.on("change",function(){h.isUndefined(this.get("filename"))||""===this.get("filename")?(e.__internal.buttons[1].element.disabled=!0,this.errorModel.set("filename",f("Please provide filename"))):(this.errorModel.clear(),h.isUndefined(this.get("delimiter"))||h.isNull(this.get("delimiter"))?(e.__internal.buttons[1].element.disabled=!0,this.errorModel.set("delimiter",f("Delimiter should contain only one character"))):(this.errorModel.clear(),h.isUndefined(this.get("quote"))||""===this.get("quote")||1!=this.get("quote").length?(e.__internal.buttons[1].element.disabled=!0,this.errorModel.set("quote",f("Quote should contain only one character"))):(this.errorModel.clear(),h.isUndefined(this.get("escape"))||""===this.get("escape")||1!=this.get("escape").length?(e.__internal.buttons[1].element.disabled=!0,this.errorModel.set("escape",f("Escape should contain only one character"))):(this.errorModel.clear(),e.__internal.buttons[1].element.disabled=!1))))}),s.$el.attr("tabindex",-1),setTimeout(function(){v.keyboardNavigation.getDialogTabNavigator(b(e.elements.dialog))},200)}}});var p=g("import_export.utility_exists",{sid:a._id});b.ajax({url:p,type:"GET"}).done(function(e){e.success?m.ImportDialog(f("Import/Export data - table '%s'",u.table.label),c,n,d).set("resizable",!0).resizeTo(_.Browser.stdW.md,_.Browser.stdH.lg):m.alert(f("Utility not found"),e.errormsg)}).fail(function(){m.alert(f("Utility not found"),f("Failed to fetch Utility information"))})}}else m.alert(f("Configuration required"),o);else m.alert(f("Failed to load preference %s of module %s",i,"paths"))}}},_.Tools.import_utility}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";var a,r;n(19),n(11),n(12),n(4),n(8),n(22),n(6),a=[n(2),n(5),n(0),n(1),n(47),n(3),n(9),n(15),n(28),n(42),n(13),n(158),n(159),n(25),n(59),n(254)],void 0===(r=function(u,p,f,i,g,e,b,t,n,a,r,h,m,o){var s=e.Tools=e.Tools||{},_=window.wcDocker;return e.Tools.Debugger||(s.Debugger={init:function(){if(!this.initialized){this.initialized=!0,b.add_menus([{name:"direct_debugger",node:"function",module:this,applies:["object","context"],callback:"get_function_information",category:u("Debugging"),priority:10,label:u("Debug"),data:{object:"function"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"global_debugger",node:"function",module:this,applies:["object","context"],callback:"check_func_debuggable",category:u("Debugging"),priority:10,label:u("Set breakpoint"),data:{object:"function",debug_type:"indirect"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"procedure_direct_debugger",node:"procedure",module:this,applies:["object","context"],callback:"get_function_information",category:u("Debugging"),priority:10,label:u("Debug"),data:{object:"procedure"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"procedure_indirect_debugger",node:"procedure",module:this,applies:["object","context"],callback:"check_func_debuggable",category:u("Debugging"),priority:10,label:u("Set breakpoint"),data:{object:"procedure",debug_type:"indirect"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"trigger_function_indirect_debugger",node:"trigger_function",module:this,applies:["object","context"],callback:"check_func_debuggable",priority:10,label:u("Set breakpoint"),category:u("Debugging"),icon:"fa fa-arrow-circle-right",data:{object:"trigger_function",debug_type:"indirect"},enable:"can_debug"},{name:"trigger_indirect_debugger",node:"trigger",module:this,applies:["object","context"],callback:"check_func_debuggable",priority:10,label:u("Set breakpoint"),category:u("Debugging"),icon:"fa fa-arrow-circle-right",data:{object:"trigger",debug_type:"indirect"},enable:"can_debug"},{name:"package_function_direct_debugger",node:"edbfunc",module:this,applies:["object","context"],callback:"get_function_information",category:u("Debugging"),priority:10,label:u("Debug"),data:{object:"edbfunc"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"package_function_global_debugger",node:"edbfunc",module:this,applies:["object","context"],callback:"check_func_debuggable",category:u("Debugging"),priority:10,label:u("Set breakpoint"),data:{object:"edbfunc",debug_type:"indirect"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"package_procedure_direct_debugger",node:"edbproc",module:this,applies:["object","context"],callback:"get_function_information",category:u("Debugging"),priority:10,label:u("Debug"),data:{object:"edbproc"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"package_procedure_global_debugger",node:"edbproc",module:this,applies:["object","context"],callback:"check_func_debuggable",category:u("Debugging"),priority:10,label:u("Set breakpoint"),data:{object:"edbproc",debug_type:"indirect"},icon:"fa fa-arrow-circle-right",enable:"can_debug"}]),this.frame=new b.Frame({name:"frm_debugger",title:u("Debugger"),width:500,isCloseable:!0,isPrivate:!0,icon:"fa fa-bug",url:"about:blank"}),this.frame.load(b.docker);var e=this,t=setInterval(function(){0<b.preference_version()&&(e.preferences=b.get_preferences_for_module("debugger"),clearInterval(t))},0);b.onPreferencesChange("debugger",function(){e.preferences=b.get_preferences_for_module("debugger")})}},can_debug:function(e,t,n){for(var a=b.tree,r=t,i=e;r;){if("catalog"==i._type)return!1;i=(r=a.hasParent(r)?a.parent(r):null)?a.itemData(r):null}var o=b.tree,s=o.selected(),l=s&&1==s.length?o.itemData(s):void 0,d=l&&b.Nodes[l._type];if(!l)return!1;var c=d.getTreeNodeHierarchy.apply(d,[s]);if(n&&n.debug_type&&"indirect"==n.debug_type&&!c.server.user.is_superuser)return!1;var u=c.function&&c.function.funcowner||c.procedure&&c.procedure.funcowner||c.edbfunc&&c.edbfunc.funcowner||c.edbproc&&c.edbproc.funcowner;return!(!c.server.user.is_superuser&&u!=c.server.user.name)&&(null==l.language&&"trigger"==l._type||null==l.language&&"edbfunc"==l._type||null==l.language&&"edbproc"==l._type||("plpgsql"==l.language||"edbspl"==l.language))},generate_url:function(e,t,n){var a="";i.each(i.sortBy(i.values(i.pick(t,function(e,t){return"server_group"!=t})),function(e){return e.priority}),function(e){a=o.sprintf("%s/%s",a,encodeURI(e._id))});var r={URL:e,BASEURL:p("debugger.index"),REF:a,OBJTYPE:encodeURI(n.type)};return"{BASEURL}{URL}/{OBJTYPE}{REF}".replace(/{(\w+)}/g,function(e,t){return r[t]})},check_func_debuggable:function(t,n){var e=b.tree,a=n||e.selected(),r=a&&1==a.length?e.itemData(a):void 0,i=r&&b.Nodes[r._type];if(r){var o=i.getTreeNodeHierarchy.apply(i,[a]),s=this.generate_url("init",o,i),l=this;f.ajax({url:s,cache:!1}).done(function(e){l.start_global_debugger(t,n,e.data.trans_id)}).fail(function(e){try{var t=JSON.parse(e.responseText);0==t.success&&g.alert(u("Debugger Error"),t.errormsg)}catch(e){console.warn(e.stack||e)}})}},start_global_debugger:function(e,t,n){var a=b.tree,r=t||a.selected(),i=r&&1==r.length?a.itemData(r):void 0,o=i&&b.Nodes[i._type],s=this;if(i){var l,d=o.getTreeNodeHierarchy.apply(o,[r]);"function"==i._type||"edbfunc"==i._type?l=p("debugger.initialize_target_for_function",{debug_type:"indirect",trans_id:n,sid:d.server._id,did:d.database._id,scid:d.schema._id,func_id:m.getFunctionId(d)}):"procedure"==i._type||"edbproc"==i._type?l=p("debugger.initialize_target_for_function",{debug_type:"indirect",trans_id:n,sid:d.server._id,did:d.database._id,scid:d.schema._id,func_id:m.getProcedureId(d)}):"trigger_function"==i._type?l=p("debugger.initialize_target_for_function",{debug_type:"indirect",trans_id:n,sid:d.server._id,did:d.database._id,scid:d.schema._id,func_id:d.trigger_function._id}):"trigger"==i._type&&"table"in d?l=p("debugger.initialize_target_for_trigger",{debug_type:"indirect",trans_id:n,sid:d.server._id,did:d.database._id,scid:d.schema._id,func_id:d.table._id,tri_id:d.trigger._id}):"trigger"==i._type&&"view"in d&&(l=p("debugger.initialize_target_for_trigger",{debug_type:"indirect",trans_id:n,sid:d.server._id,did:d.database._id,scid:d.schema._id,func_id:d.view._id,tri_id:d.trigger._id})),f.ajax({url:l,method:"GET"}).done(function(t){var n=p("debugger.direct",{trans_id:t.data.debuggerTransId});if(s.preferences.debugger_new_browser_tab)window.open(n,"_blank");else{b.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",function(e){e.openURL(n)});var e=b.docker.findPanels("properties"),a=b.docker.addPanel("frm_debugger",_.DOCK.STACKED,e[0]);a.focus(),a.on(_.EVENT.CLOSED,function(){var e=p("debugger.close",{trans_id:t.data.debuggerTransId});f.ajax({url:e,method:"DELETE"})})}}).fail(function(e){try{var t=JSON.parse(e.responseText);0==t.success&&g.alert(u("Debugger Error"),t.errormsg)}catch(e){console.warn(e.stack||e)}})}},get_function_information:function(e,t){var n=b.tree,a=t||n.selected(),r=a&&1==a.length?n.itemData(a):void 0,i=r&&b.Nodes[r._type],d=this,c="edbproc"==r._type;if(r){var o=i.getTreeNodeHierarchy.apply(i,[a]),s=this.generate_url("init",o,i);f.ajax({url:s,cache:!1}).done(function(e){var t=e.data.debug_info,a=e.data.trans_id;if(t[0].require_input)h(t[0],0,c,a);else{var n=b.tree,r=n.selected(),i=r&&1==r.length?n.itemData(r):void 0,o=i&&b.Nodes[i._type];if(!i)return;var s,l=o.getTreeNodeHierarchy.apply(o,[r]);"function"==i._type||"edbfunc"==i._type?s=p("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:a,sid:l.server._id,did:l.database._id,scid:l.schema._id,func_id:m.getFunctionId(l)}):"procedure"!=i._type&&"edbproc"!=i._type||(s=p("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:a,sid:l.server._id,did:l.database._id,scid:l.schema._id,func_id:m.getProcedureId(l)})),f.ajax({url:s,method:"GET"}).done(function(){var t=p("debugger.direct",{trans_id:a});if(d.preferences.debugger_new_browser_tab)window.open(t,"_blank");else{b.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",function(e){e.openURL(t)});var e=b.docker.findPanels("properties"),n=b.docker.addPanel("frm_debugger",_.DOCK.STACKED,e[0]);n.focus(),n.on(_.EVENT.CLOSED,function(){var e=p("debugger.close",{trans_id:a});f.ajax({url:e,method:"DELETE"})})}}).fail(function(e){g.alert(u("Debugger Target Initialization Error"),e.responseJSON.errormsg)})}}).fail(function(e){try{var t=JSON.parse(e.responseText);0==t.success&&g.alert(u("Debugger Error"),t.errormsg)}catch(e){console.warn(e.stack||e)}})}}}),e.Tools.Debugger}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";var a,r;n(4),n(8),a=[n(2),n(5),n(0),n(1),n(3),n(9),n(14),n(408),n(409)],void 0===(r=function(n,e,i,a,t,o,s){return o.Nodes["coll-pga_job"]||(o.Nodes["coll-pga_job"]=o.Collection.extend({node:"pga_job",label:n("pga_jobs"),type:"coll-pga_job",columns:["jobid","jobname","jobenabled","jlgstatus","jobnextrun","joblastrun","jobdesc"],hasStatistics:!1,canDrop:!0,canDropCascade:!1})),o.Nodes.pga_job||(o.Nodes.pga_job=o.Node.extend({parent_type:"server",type:"pga_job",dialogHelp:e("help.static",{filename:"pgagent_jobs.html"}),hasSQL:!0,hasDepends:!1,hasStatistics:!0,hasCollectiveStatistics:!0,width:"80%",height:"80%",canDrop:!0,label:n("pgAgent Job"),node_image:function(){return"icon-pga_job"},Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_pga_job_on_coll",node:"coll-pga_job",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("pgAgent Job..."),icon:"wcTabIcon icon-pga_job",data:{action:"create"}},{name:"create_pga_job",node:"pga_job",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:n("pgAgent Job..."),icon:"wcTabIcon icon-pga_job",data:{action:"create"}},{name:"run_now_pga_job",node:"pga_job",module:this,applies:["object","context"],callback:"run_pga_job_now",priority:4,label:n("Run now"),data:{action:"create"},icon:"fa fa-play-circle"}]))},model:o.Node.Model.extend({defaults:{jobname:"",jobid:void 0,jobenabled:!0,jobhostagent:"",jobjclid:1,jobcreated:void 0,jobchanged:void 0,jobnextrun:void 0,joblastrun:void 0,jlgstatus:void 0,jobrunningat:void 0,jobdesc:"",jsteps:[],jschedules:[]},idAttribute:"jobid",parse:function(){var e=o.Node.Model.prototype.parse.apply(this,arguments);return e&&(e.jobrunningat=e.jagagent||n("Not running currently."),e.jlgstatus=e.jlgstatus||n("Unknown")),e},schema:[{id:"jobname",label:n("Name"),type:"text",cellHeaderClasses:"width_percent_30"},{id:"jobid",label:n("ID"),mode:["properties"],type:"int"},{id:"jobenabled",label:n("Enabled?"),type:"switch",cellHeaderClasses:"width_percent_5"},{id:"jobclass",label:n("Job class"),type:"text",mode:["properties"]},{id:"jobjclid",label:n("Job class"),type:"int",control:"node-ajax-options",url:"classes",url_with_id:!1,cache_node:"server",mode:["create","edit"],select2:{allowClear:!1},helpMessage:n("Please select a class to categorize the job. This option will not affect the way the job runs.")},{id:"jobhostagent",label:n("Host agent"),type:"text",mode:["edit","create"],helpMessage:n("Enter the hostname of a machine running pgAgent if you wish to ensure only that machine will run this job. Leave blank if any host may run the job.")},{id:"jobhostagent",label:n("Host agent"),type:"text",mode:["properties"]},{id:"jobcreated",type:"text",mode:["properties"],label:n("Created")},{id:"jobchanged",type:"text",mode:["properties"],label:n("Changed")},{id:"jobnextrun",type:"text",mode:["properties"],label:n("Next run"),cellHeaderClasses:"width_percent_20"},{id:"joblastrun",type:"text",mode:["properties"],label:n("Last run"),cellHeaderClasses:"width_percent_20"},{id:"jlgstatus",type:"text",label:n("Last result"),cellHeaderClasses:"width_percent_5",mode:["properties"]},{id:"jobrunningat",type:"text",mode:["properties"],label:n("Running at")},{id:"jobdesc",label:n("Comment"),type:"multiline",cellHeaderClasses:"width_percent_15"},{id:"jsteps",label:"",group:n("Steps"),type:"collection",mode:["edit","create"],model:o.Nodes.pga_jobstep.model,canEdit:!0,control:"sub-node-collection",canAdd:!0,canDelete:!0,showError:!1,columns:["jstname","jstenabled","jstkind","jstconntype","jstonerror"]},{id:"jschedules",label:"",group:n("Schedules"),type:"collection",mode:["edit","create"],control:"sub-node-collection",canAdd:!0,canDelete:!0,canEdit:!0,model:o.Nodes.pga_schedule.model,showError:!1,columns:["jscname","jscenabled","jscstart","jscend"]}],validate:function(){var e=this.get("jobname");if(a.isUndefined(e)||a.isNull(e)||""==String(e).replace(/^\s+|\s+$/g,"")){var t=n("Name cannot be empty.");return this.errorModel.set("jobname",t),t}return this.errorModel.unset("jobname"),null}}),run_pga_job_now:function(e){var t=e||{},a=o.tree,r=t.item||a.selected(),n=r&&1==r.length?a.itemData(r):void 0;return n&&i.ajax({url:this.generate_url(r,"run_now",n,!0),method:"PUT"}).done(function(){a.unload(r)}).fail(function(e,t,n){s.pgRespErrorNotify(e,n),a.unload(r)}),!1}})),o.Nodes.pga_job}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";var a,r;n(10),n(4),n(8),n(6),a=[n(2),n(5),n(0),n(1),n(3),n(9),n(47),n(68),n(56),n(13),n(28)],void 0===(r=function(o,e,t,s,n,a,r,i,l){a.Nodes["coll-pga_jobstep"]||(a.Nodes["coll-pga_jobstep"]=a.Collection.extend({node:"pga_jobstep",label:o("Steps"),type:"coll-pga_jobstep",columns:["jstid","jstname","jstenabled","jstkind","jstconntype","jstonerror"],hasStatistics:!1,canDropCascade:!1}));var d=l.Extension.SwitchCell.extend({initialize:function(){l.Extension.SwitchCell.prototype.initialize.apply(this,arguments),l.Extension.DependentCell.prototype.initialize.apply(this,arguments)},dependentChanged:function(){var e=this.model,t=this.column,n=this.column.get("editable"),a=this.$el.find("input[type=checkbox]").first(),r=t.get("name");return(s.isFunction(n)?!!n.apply(t,[e]):!!n)?(this.$el.addClass("editable"),a.bootstrapToggle("disabled",!1)):(this.$el.removeClass("editable"),a.bootstrapToggle("disabled",!0),setTimeout(function(){e.set(r,!0)},10)),this.delegateEvents(),this},remove:l.Extension.DependentCell.prototype.remove});return a.Nodes.pga_jobstep||(a.Nodes.pga_jobstep=a.Node.extend({parent_type:"pga_job",type:"pga_jobstep",dialogHelp:e("help.static",{filename:"pgagent_jobs.html"}),hasSQL:!0,hasDepends:!1,hasStatistics:!0,hasCollectiveStatistics:!0,width:"70%",height:"80%",canDrop:!0,label:o("Step"),node_image:function(){return"icon-pga_jobstep"},Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_pga_jobstep_on_job",node:"pga_job",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("Job Step..."),data:{action:"create"},icon:"wcTabIcon icon-pga_jobstep"},{name:"create_pga_jobstep_on_coll",node:"coll-pga_jobstep",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("Job Step..."),data:{action:"create"},icon:"wcTabIcon icon-pga_jobstep"},{name:"create_pga_jobstep",node:"pga_jobstep",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:o("Job Step..."),data:{action:"create"},icon:"wcTabIcon icon-pga_jobstep"}]))},model:a.Node.Model.extend({defaults:{jstid:null,jstjobid:null,jstname:"",jstdesc:"",jstenabled:!0,jstkind:!0,jstconntype:!0,jstcode:"",jstconnstr:null,jstdbname:null,jstonerror:"f",jstnextrun:""},initialize:function(e,t){if(a.Node.Model.prototype.initialize.apply(this,arguments),this.isNew()&&this.get("jstconntype")){var n=arguments&&1<arguments.length&&t;n&&(s.isUndefined(n.node_info)&&s.isUndefined(n.collection.top.node_info)||this.set("jstdbname",(n.node_info||n.collection.top.node_info).server.db))}},idAttribute:"jstid",schema:[{id:"jstid",label:o("ID"),type:"int",cellHeaderClasses:"width_percent_5",mode:["properties"]},{id:"jstname",label:o("Name"),type:"text",disabled:!1,cellHeaderClasses:"width_percent_60"},{id:"jstenabled",label:o("Enabled?"),type:"switch",disabled:function(){return!1}},{id:"jstkind",label:o("Kind"),type:"switch",options:{onText:o("SQL"),offText:o("Batch"),onColor:"primary",offColor:"primary"},control:i.SwitchControl,disabled:function(){return!1}},{id:"jstconntype",label:o("Connection type"),type:"switch",deps:["jstkind"],mode:["properties"],disabled:function(e){return!e.get("jstkind")},options:{onText:o("Local"),offText:o("Remote"),onColor:"primary",offColor:"primary",width:"65"}},{id:"jstconntype",label:o("Connection type"),type:"switch",deps:["jstkind"],mode:["create","edit"],disabled:function(e){return!e.get("jstkind")},cell:d,editable:function(e){return e.get("jstkind")},options:{onText:o("Local"),offText:o("Remote"),onColor:"primary",offColor:"primary",width:"65"},helpMessage:o("Select <b>Local</b> if the job step will execute on the local database server, or <b>Remote</b> to specify a remote database server.")},{id:"jstdbname",label:o("Database"),type:"text",mode:["properties"],disabled:function(){return!1}},{id:"jstconnstr",type:"text",mode:["properties"],label:o("Connection string")},{id:"jstdbname",label:o("Database"),type:"text",control:"node-list-by-name",node:"database",cache_node:"database",select2:{allowClear:!0,placeholder:""},disabled:function(e){return!e.get("jstkind")||!e.get("jstconntype")},deps:["jstkind","jstconntype"],mode:["create","edit"],helpMessage:o("Please select the database on which the job step will run.")},{id:"jstconnstr",label:o("Connection string"),type:"text",deps:["jstkind","jstconntype"],disabled:function(e){return!e.get("jstkind")||e.get("jstconntype")},helpMessage:o("Please specify the connection string for the remote database server. Each parameter setting is in the form keyword = value. Spaces around the equal sign are optional. To write an empty value, or a value containing spaces, surround it with single quotes, e.g., keyword = 'a value'. Single quotes and backslashes within the value must be escaped with a backslash, i.e., ' and \\.<br>For more information, please see the documentation on %s",'<a href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING" target="_blank">libpq connection strings</a>'),mode:["create","edit"]},{id:"jstonerror",label:o("On error"),cell:"select2",control:"select2",options:[{label:o("Fail"),value:"f"},{label:o("Success"),value:"s"},{label:o("Ignore"),value:"i"}],select2:{allowClear:!1},disabled:function(){return!1}},{id:"jstdesc",label:o("Comment"),type:"multiline"},{id:"jstcode",label:"",cell:"string",deps:["jstkind"],type:"text",group:o("Code"),tabPanelCodeClass:"sql-code-control",control:i.SqlCodeControl}],validate:function(){var e,t=this.get("jstname"),n=null;if(s.isUndefined(t)||s.isNull(t)||""==String(t).replace(/^\s+|\s+$/g,"")?(n=o("Name cannot be empty."),this.errorModel.set("jstname",n)):this.errorModel.unset("jstname"),this.get("jstkind"))if(this.get("jstconntype"))this.errorModel.unset("jstconnstr"),t=this.get("jstdbname"),s.isUndefined(t)||s.isNull(t)||""==String(t).replace(/^\s+|\s+$/g,"")?(e=o("Please select a database."),n=n||e,this.errorModel.set("jstdbname",e)):this.errorModel.unset("jstdbname");else{this.errorModel.unset("jstdbname");var a=/\s*\b(\w+)\s*=\s*('([^'\\]*(?:\\.[^'\\]*)*)'|[\w|\.]*)/g;if(t=this.get("jstconnstr"),s.isUndefined(t)||s.isNull(t)||""==String(t).replace(/^\s+|\s+$/g,""))e=o("Please enter a connection string.");else if(""!=String(t).replace(a,""))e=o("Please enter a valid connection string.");else for(var r,i={host:!0,hostaddr:!0,port:!0,dbname:!0,user:!0,password:!0,connect_timeout:!0,client_encoding:!0,application_name:!0,options:!0,fallback_application_name:!0,sslmode:!0,sslcert:!0,sslkey:!0,sslrootcert:!0,sslcrl:!0,keepalives:!0,service:!0,keepalives_idle:!0,keepalives_interval:!0,keepalives_count:!0,sslcompression:!0,requirepeer:!0,krbsrvname:!0,gsslib:!0};r=a.exec(t);){if(i[r[1]]){if(r[2])continue;e=o("Please enter a valid connection string.");break}e=o("Invalid parameter in the connection string - %s.",r[1]);break}e?(n=n||e,this.errorModel.set("jstconnstr",e)):this.errorModel.unset("jstconnstr")}else this.errorModel.unset("jstconnstr"),this.errorModel.unset("jstdbname");return t=this.get("jstcode"),s.isUndefined(t)||s.isNull(t)||""==String(t).replace(/^\s+|\s+$/g,"")?(e=o("Please specify code to execute."),n=n||e,this.errorModel.set("jstcode",e)):this.errorModel.unset("jstcode"),t=this.get("jstonerror"),s.isUndefined(t)||s.isNull(t)||""!=String(t).replace(/^\s+|\s+$/g,"")?this.errorModel.unset("jstonerror"):(e=o("Please select valid on error option ."),this.errorModel.set("jstonerror",e)),n}})})),a.Nodes.pga_job}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";var a,r;n(16),n(23),n(40),n(4),n(8),n(29),a=[n(2),n(5),n(0),n(1),n(3),n(118),n(9),n(47),n(13),n(28)],void 0===(r=function(s,e,t,l,n,d,a,r,i,o){if(a.Nodes["coll-pga_schedule"]||(a.Nodes["coll-pga_schedule"]=a.Collection.extend({node:"pga_schedule",label:s("Schedules"),type:"coll-pga_schedule",columns:["jscid","jscname","jscenabled"],hasStatistics:!1,canDropCascade:!1})),!a.Nodes.pga_schedule){var c=[s("Sunday"),s("Monday"),s("Tuesday"),s("Wednesday"),s("Thursday"),s("Friday"),s("Saturday")],u=[s("1st"),s("2nd"),s("3rd"),s("4th"),s("5th"),s("6th"),s("7th"),s("8th"),s("9th"),s("10th"),s("11th"),s("12th"),s("13th"),s("14th"),s("15th"),s("16th"),s("17th"),s("18th"),s("19th"),s("20th"),s("21st"),s("22nd"),s("23rd"),s("24th"),s("25th"),s("26th"),s("27th"),s("28th"),s("29th"),s("30th"),s("31st"),s("Last day")],p=[s("January"),s("February"),s("March"),s("April"),s("May"),s("June"),s("July"),s("August"),s("September"),s("October"),s("November"),s("December")],f=[s("00"),s("01"),s("02"),s("03"),s("04"),s("05"),s("06"),s("07"),s("08"),s("09"),s("10"),s("11"),s("12"),s("13"),s("14"),s("15"),s("16"),s("17"),s("18"),s("19"),s("20"),s("21"),s("22"),s("23")],g=[s("00"),s("01"),s("02"),s("03"),s("04"),s("05"),s("06"),s("07"),s("08"),s("09"),s("10"),s("11"),s("12"),s("13"),s("14"),s("15"),s("16"),s("17"),s("18"),s("19"),s("20"),s("21"),s("22"),s("23"),s("24"),s("25"),s("26"),s("27"),s("28"),s("29"),s("30"),s("31"),s("32"),s("33"),s("34"),s("35"),s("36"),s("37"),s("38"),s("39"),s("40"),s("41"),s("42"),s("43"),s("44"),s("45"),s("46"),s("47"),s("48"),s("49"),s("50"),s("51"),s("52"),s("53"),s("54"),s("55"),s("56"),s("57"),s("58"),s("59")],b=o.Extension.MomentCell.extend({editor:o.Extension.DatetimePickerEditor,render:function(){this.$el.empty();var e=this.model;return this.$el.text(this.formatter.fromRaw(e.get(this.column.get("name")),e)||s("<any>")),this.delegateEvents(),this}}),h=o.Extension.MomentCell.extend({editor:o.Extension.DatetimePickerEditor}),m=function(e,t){var r=this;return r.selector=e,r.indexes=t,this.fromRaw=function(e){if(!l.isArray(e))return e;for(var t=[],n=0,a=[];n<e.length;n++)e[n]&&(t.push(r.selector[n]),a.push(n+1));return r.indexes?a:t.join(", ")},this.toRaw=function(e){if(!r.indexes)return e;for(var t=[],n=0,a=r.selector.length;n<a;n++)t.push(-1!=l.indexOf(e,String(n+1)));return t},r},_=function(e){var t=e.field.get("selector"),n=e.model.get(e.field.get("name")),a=[];return t&&(a=l.map(t,function(e,t){return{label:e,value:t+1,selected:n[t]}})),a},v=a.Node.Model.extend({defaults:{jexid:void 0,jexdate:null,jextime:null},idAttribute:"jexid",schema:[{id:"jexdate",type:"text",label:s("Date"),editable:!0,placeholder:s("<any>"),cell:b,options:{format:"YYYY-MM-DD"},displayFormat:"YYYY-MM-DD",modelFormat:"YYYY-MM-DD",cellHeaderClasses:"width_percent_50",allowEmpty:!0},{id:"jextime",type:"text",placeholder:s("<any>"),label:s("Time"),editable:!0,cell:b,options:{format:"HH:mm",buttons:{showToday:!1}},displayFormat:"HH:mm",modelFormat:"HH:mm:ss",displayInUTC:!0,allowEmpty:!0,cellHeaderClasses:"width_percent_50",modalInUTC:!0}],validate:function(){var t,n=this,e=this.collection,a=!1,r=this.get("jexdate")||"<any>",i=this.get("jextime")||"<any>",o=this.get("jexid")||this.cid;return n.errorModel.unset("jscdate"),r==i&&"<any>"==r?(t=s("Please specify date/time."),n.errorModel.set("jscdate",t)):e.each(function(e){a||o==(e.get("jexid")||e.cid)||r==(e.get("jexdate")||"<any>")&&i==(e.get("jextime")||"<any>")&&(t=s("Please specify unique set of exceptions."),e.errorModel.get("jscdate")!=t&&n.errorModel.set("jscdate",t),a=!0)}),t}}),y=i.Control.extend({template:l.template(["<div>","  <%=infotext%>","</div>"].join("\n")),className:"pgadmin-control-group"});a.Nodes.pga_schedule=a.Node.extend({parent_type:"pga_job",type:"pga_schedule",dialogHelp:e("help.static",{filename:"pgagent_jobs.html"}),hasSQL:!0,hasDepends:!1,hasStatistics:!1,canDrop:!0,label:s("Schedule"),node_image:"icon-pga_schedule",Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_pga_schedule_on_job",node:"pga_job",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:s("Schedule..."),icon:"wcTabIcon icon-pga_schedule",data:{action:"create"}},{name:"create_pga_schedule_on_coll",node:"coll-pga_schedule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:s("Schedule..."),icon:"wcTabIcon icon-pga_schedule",data:{action:"create"}},{name:"create_pga_schedule",node:"pga_schedule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:s("Schedule..."),icon:"wcTabIcon icon-pga_schedule",data:{action:"create"}}]))},model:a.Node.Model.extend({defaults:{jscid:null,jscjobid:null,jscname:"",jscdesc:"",jscenabled:!0,jscstart:null,jscend:null,jscweekdays:l.map(c,function(){return!1}),jscmonthdays:l.map(u,function(){return!1}),jscmonths:l.map(p,function(){return!1}),jschours:l.map(f,function(){return!1}),jscminutes:l.map(g,function(){return!1}),jscexceptions:[]},idAttribute:"jscid",parse:function(e){if(e.jscexceptions=[],e.jexid&&e.jexid.length)for(var t=0;t<e.jexid.length;t++)e.jscexceptions.push({jexid:e.jexid[t],jexdate:e.jexdate[t],jextime:e.jextime[t]});return delete e.jexid,delete e.jexdate,delete e.jextime,a.Node.Model.prototype.parse.apply(this,arguments)},schema:[{id:"jscid",label:s("ID"),type:"int",cellHeaderClasses:"width_percent_5",mode:["properties"]},{id:"jscname",label:s("Name"),type:"text",cellHeaderClasses:"width_percent_45",disabled:function(){return!1}},{id:"jscenabled",label:s("Enabled?"),type:"switch",disabled:function(){return!1},cellHeaderClasses:"width_percent_5"},{id:"jscstart",label:s("Start"),type:"text",control:"datetimepicker",cell:h,disabled:function(){return!1},displayInUTC:!1,displayFormat:"YYYY-MM-DD HH:mm:ss Z",modelFormat:"YYYY-MM-DD HH:mm:ss Z",options:{format:"YYYY-MM-DD HH:mm:ss Z",minDate:d().add(0,"m")},cellHeaderClasses:"width_percent_25"},{id:"jscend",label:s("End"),type:"text",control:"datetimepicker",cell:h,disabled:function(){return!1},displayInUTC:!1,displayFormat:"YYYY-MM-DD HH:mm:ss Z",options:{format:"YYYY-MM-DD HH:mm:ss Z",minDate:d().add(0,"m")},cellHeaderClasses:"width_percent_25",modelFormat:"YYYY-MM-DD HH:mm:ss Z"},{id:"jscweekdays",label:s("Week days"),type:"text",control:i.Control.extend({formatter:new m(c,!1)}),mode:["properties"]},{id:"jscmonthdays",label:s("Month days"),type:"text",control:i.Control.extend({formatter:new m(u,!1)}),mode:["properties"]},{id:"jscmonths",label:s("Months"),type:"text",control:i.Control.extend({formatter:new m(p,!1)}),mode:["properties"]},{id:"jschours",label:s("Hours"),type:"text",control:i.Control.extend({formatter:new m(f,!1)}),mode:["properties"]},{id:"jscminutes",label:s("Minutes"),type:"text",control:i.Control.extend({formatter:new m(g,!1)}),mode:["properties"]},{id:"jscexceptions",label:s("Exceptions"),type:"text",control:i.Control.extend({formatter:new function(){return this.fromRaw=function(e){var t,n="",a=0;if(!e)return n;for(;a<e.length;a++)t=e[a],a&&(n+=", "),n+="["+String((t.jexdate||"")+" "+(t.jextime||"")).replace(/^\s+|\s+$/g,"")+"]";return n},this.toRaw=function(e){return e},this}}),mode:["properties"]},{type:"control",mode:["create","edit"],group:s("Repeat"),infotext:s("Schedules are specified using a <b>cron-style</b> format.<br/><ul><li>For each selected time or date element, the schedule will execute.<br/>e.g. To execute at 5 minutes past every hour, simply select ‘05’ in the Minutes list box.<br/></li><li>Values from more than one field may be specified in order to further control the schedule.<br/>e.g. To execute at 12:05 and 14:05 every Monday and Thursday, you would click minute 05, hours 12 and 14, and weekdays Monday and Thursday.</li><li>For additional flexibility, the Month Days check list includes an extra Last Day option. This matches the last day of the month, whether it happens to be the 28th, 29th, 30th or 31st.</li></ul>"),control:y},{type:"nested",label:s("Days"),group:s("Repeat"),mode:["create","edit"],control:i.FieldsetControl.extend({render:function(){return i.FieldsetControl.prototype.render.apply(this,arguments)}}),schema:[{id:"jscweekdays",label:s("Week Days"),cell:"select2",group:s("Days"),control:"select2",type:"array",select2:{first_empty:!1,multiple:!0,allowClear:!0,placeholder:s("Select the weekdays..."),width:"style",dropdownAdapter:t.fn.select2.amd.require("select2/selectAllAdapter")},formatter:new m(c,!0),selector:c,options:_},{id:"jscmonthdays",label:s("Month Days"),cell:"select2",group:s("Days"),control:"select2",type:"array",select2:{first_empty:!1,multiple:!0,allowClear:!0,placeholder:s("Select the month days..."),width:"style",dropdownAdapter:t.fn.select2.amd.require("select2/selectAllAdapter")},formatter:new m(u,!0),selector:u,options:_},{id:"jscmonths",label:s("Months"),cell:"select2",group:s("Days"),control:"select2",type:"array",select2:{first_empty:!1,multiple:!0,allowClear:!0,placeholder:s("Select the months..."),width:"style",dropdownAdapter:t.fn.select2.amd.require("select2/selectAllAdapter")},formatter:new m(p,!0),selector:p,options:_}]},{type:"nested",control:"fieldset",label:s("Times"),group:s("Repeat"),mode:["create","edit"],schema:[{id:"jschours",label:s("Hours"),cell:"select2",group:s("Times"),control:"select2",type:"array",select2:{first_empty:!1,multiple:!0,allowClear:!0,placeholder:s("Select the hours..."),width:"style",dropdownAdapter:t.fn.select2.amd.require("select2/selectAllAdapter")},formatter:new m(f,!0),selector:f,options:_},{id:"jscminutes",label:s("Minutes"),cell:"select2",group:s("Times"),control:"select2",type:"array",select2:{first_empty:!1,multiple:!0,allowClear:!0,placeholder:s("Select the minutes..."),width:"style",dropdownAdapter:t.fn.select2.amd.require("select2/selectAllAdapter")},formatter:new m(g,!0),selector:g,options:_}]},{id:"jscexceptions",type:"collection",mode:["edit","create"],label:"",canEdit:!1,model:v,canAdd:!0,group:s("Exceptions"),canDelete:!0,cols:["jexdate","jextime"],control:"sub-node-collection"},{id:"jscdesc",label:s("Comment"),type:"multiline"}],validate:function(){var e,t=this.get("jscname"),n=null;if(l.isUndefined(t)||l.isNull(t)||""==String(t).replace(/^\s+|\s+$/g,"")?(e=s("Name cannot be empty."),this.errorModel.set("jscname",e),n=e):this.errorModel.unset("jscname"),t=this.get("jscstart"),l.isUndefined(t)||l.isNull(t)||""==String(t).replace(/^\s+|\s+$/g,"")?(e=s("Please enter the start time."),""==t&&this.set("jscstart",void 0),this.errorModel.set("jscstart",e),n=n||e):this.errorModel.unset("jscstart"),!n){if(t=this.get("jscend"),l.isUndefined(t)||l.isNull(t)||""==String(t).replace(/^\s+|\s+$/g,""))return void(""==t&&this.set("jscend",void 0));var a=this.get("jscstart"),r=this.get("jscend"),i=a.split(" "),o=r.split(" ");i=d(i[0]+" "+i[1]),(o=d(o[0]+" "+o[1])).isBefore(i)&&(n=s("Start time must be less than end time"),this.errorModel.set("jscstart",n))}return n}})})}return a.Nodes.pga_schedule}.apply(t,a))||(e.exports=r)},function(e,t,n){"use strict";n(411)},function(e,t,n){"use strict";n(412)},function(e,t,n){"use strict";n(413),n(197)},function(e,t,n){"use strict";n(414)},function(e,t,n){"use strict";var a=i(n(9)),r=i(n(2));function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,n(415).initialize)(a.default,r.default);e.exports={pgBrowser:o}},function(e,t,n){"use strict";n(7),n(7),Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e,t){e.Nodes["coll-external_table"]||(e.Nodes["coll-external_table"]=e.Collection.extend({node:"external_table",label:t("External Tables"),type:"coll-external_tables",columns:["name","fdwowner","description"]}));e.Nodes.external_table||(e.Nodes.external_table=e.Node.extend({parent_type:"database",type:"external_table",label:t("External Table"),collection_type:"coll-external_table",hasSQL:!0,model:e.Node.Model.extend({defaults:{name:void 0,type:void 0,encoding:void 0,format_type:void 0,format_option:void 0,external_options:void 0,command:void 0,execute_on:void 0},schema:[{id:"name",label:t("Name"),type:"text",mode:["properties"]},{id:"type",label:t("Type"),type:"text",mode:["properties"]},{id:"encoding",label:t("Encoding"),type:"text",mode:["properties"]},{id:"format_type",label:t("Format Type"),type:"text",mode:["properties"]},{id:"format_option",label:t("Format Optionos"),type:"text",mode:["properties"]},{id:"external_options",label:t("External Options"),type:"text",mode:["properties"]},{id:"command",label:t("Command"),type:"text",mode:["properties"]},{id:"execute_on",label:t("Execute on"),type:"text",mode:["properties"]}]})}));return e}}]).default});